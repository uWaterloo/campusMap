!function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var f=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t("whatwg-fetch"),t("es6-promise");var p=t("leaflet"),m=h(p),g=t("./locator"),_=h(g),y=t("./layer/parent"),v=h(y),b=t("./layer/html"),w=h(b),L=t("./layer/data"),x=t("./layer/building"),P=h(x),k=t("./layer/parking"),C=h(k),M=t("./directions"),T=h(M),S=t("urijs"),E=h(S),D=t("minivents"),A=h(D),R=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?"map":arguments[1];d(this,t),(0,A["default"])(this),this._config=e,this._map=null,this._tiles={},this._controls={},this._parentLayer=new v["default"]("Campus Map"),this._layers={},this._activeTiles=null,this._buildings=null,this._configure(n)}return t.prototype._configure=function(t){var e=this;m["default"].Icon.Default.imagePath=this._config.imagePath,this._map=m["default"].map(t,this._config.map.config),this._directions=new T["default"](this),this._configureTileLayers(),this._locator=new _["default"](this._config.map.locator),this._locator.addTo(this._map),this._scalebar=m["default"].control.scale(this._config.map.scalebar),this._scalebar.addTo(this._map);for(var n in this._config.map.controls){var i=this._config.map.controls[n];this._controls[n]=m["default"].control({position:i.position}),this._controls[n].onAdd=function(t){var e=m["default"].DomUtil.create("div","info legend");return e.innerHTML=i.html(),e},this._controls[n].addTo(this._map)}var o=m["default"].Util.extend(this._config.map.buildings,{map_config:this._config,generateDirectionsLink:this._directions.generateDirectionsLink.bind(this._directions)}),r=function(t){var n=new E["default"](""+e._config.uwapi.base+o.endpoint+".geojson");n.search(m["default"].extend({key:e._config.uwapi.key},o.endpoint_options||{})),fetch(n.href()).then(function(t){return t.json()}).then(function(e){return t.addData(e)})["catch"](function(t){})},s=function(t){var n=new E["default"](""+e._config.mapapi.base+o.indoor_maps_endpoint+".json");fetch(n.href()).then(function(t){if(t.ok)return t;throw 403===t.status?Error("Sorry, indoor maps are only available when connected to the University of Waterloo network."):Error("Sorry, an unexpected error occurred.")}).then(function(t){return t.json()}).then(function(e){return t.setIndoorMaps(e)})["catch"](function(e){t.setIndoorMapsUnavailable(e.message)})};this._buildings=new P["default"](o,r,s),this._buildings.getAttribution=function(){return'<a href="https://uwaterloo.ca/open-data/university-waterloo-open-data-license-agreement-v1">UWaterloo Open Data</a>'},this._buildings.addTo(this._map),this._configureLayers(this._config.map.layers,this._parentLayer);var a=this._map._container.querySelector(".leaflet-control-attribution");m["default"].DomEvent.addListener(a,"click",function(t){m["default"].DomEvent.preventDefault(t);var n=m["default"].DomUtil.create("div","");e._config.data_providers.forEach(function(t){var e=m["default"].DomUtil.create("h4","",n);e.innerText=t.name;var i=m["default"].DomUtil.create("p","",n);if(i.innerText=t.description,"service_information"in t){var o=m["default"].DomUtil.create("a","",n);o.href=t.service_information,o.innerText="Service Information"}if("license"in t){var r=m["default"].DomUtil.create("a","",n);r.href=t.license,r.innerText="License Terms"}}),e._config.present("Data Providers",n)})},t.prototype._configureTileLayers=function(){for(var t in this._config.map.tiles){var e=this._config.map.tiles[t];this._tiles[t]=m["default"].tileLayer(e.url,e.config),this._tiles[t].id=t}this.activeTiles=this._config.map.default_tiles},t.prototype._configureLayers=function(t,e){var n=this;t.forEach(function(t,i){var o=null;if(t=m["default"].Util.extend(t,{map_config:n._config,generateDirectionsLink:n._directions.generateDirectionsLink.bind(n._directions)}),t.id in n._layers)o=n._layers[t.id];else{switch(t.type){case"parent":o=new v["default"](t),n._configureLayers(t.sublayers,o);break;case"html":o=new w["default"](t);break;case"uwapi":case"uwbuilding":case"uwparking":var r=function(e){var i=new E["default"](""+n._config.uwapi.base+t.endpoint+".geojson");i.search(m["default"].extend({key:n._config.uwapi.key},t.endpoint_options||{})),fetch(i.href()).then(function(t){return t.json()}).then(function(t){return e.addData(t)})["catch"](function(t){})};o="uwbuilding"===t.type?new P["default"](t,r):"uwparking"===t.type?new C["default"](t,r):t.clustered===!1?new L.UnclusteredDataLayer(t,r):new L.DataLayer(t,r),o.getAttribution=function(){return'<a href="https://uwaterloo.ca/open-data/university-waterloo-open-data-license-agreement-v1">UWaterloo Open Data</a>'};break;default:return}t.autoload&&o.addTo(n._map),o.on("added",function(){n.emit("layer-added",o)}),o.on("removed",function(){n.emit("layer-removed",o)}),n._layers[t.id]=o}e.addSublayer(o)}),this.emit("configured")},t.prototype.clearLayers=function(){var t=this;Object.keys(this.layersById).forEach(function(e){var n=t.layersById[e];n.config&&n.config.autoload||t.map.hasLayer(n)&&t.map.removeLayer(n)})},f(t,[{key:"activeTiles",get:function(){return this._activeTiles},set:function(t){this._activeTiles&&this._map.removeLayer(this._activeTiles),this._activeTiles=this._tiles[t],this._activeTiles.addTo(this._map),this.emit("tiles-changed",this._activeTiles)}},{key:"config",get:function(){return this._config}},{key:"map",get:function(){return this._map}},{key:"tiles",get:function(){return this._tiles}},{key:"buildings",get:function(){return this._buildings}},{key:"controls",get:function(){return this._controls}},{key:"layers",get:function(){return this._parentLayer.sublayers}},{key:"layersById",get:function(){return this._layers}},{key:"directions",get:function(){return this._directions}}]),t}();n["default"]=R}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/campusmap.js","/js")},{"./directions":3,"./layer/building":4,"./layer/data":5,"./layer/html":6,"./layer/parent":8,"./layer/parking":9,"./locator":12,_process:53,buffer:17,"es6-promise":19,leaflet:48,minivents:50,urijs:56,"whatwg-fetch":58}],2:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var d=t("leaflet"),f=h(d),p=t("./layers"),m=h(p),g=t("./secrets"),_=h(g),y={debug:!1,imagePath:"https://uwaterloo.ca/map/dist",mapapi:{base:"https://uwaterloo.ca/map/api/"},uwapi:{key:_["default"].uw_api_key,base:"https://api.uwaterloo.ca/"},valhalla_api_key:_["default"].valhalla_api_key,map:{config:{center:[43.46898830444233,-80.54055154323578],zoom:16,minZoom:11,maxBounds:[[43.25,-81.0467],[43.71,-80.1528]]},scalebar:{position:"bottomleft",metric:!0},locator:{position:"topleft",marker_style:{radius:6,stroke:!0,color:"#ffffff",weight:2,opacity:1,fill:!0,fillColor:"#0033ff",fillOpacity:1,clickable:!1},accuracy_marker_style:{stroke:!0,color:"#abcdef",weight:3,opacity:.5,fill:!0,fillColor:"#abcdef",fillOpacity:.2,clickable:!1}},controls:{north_arrow:{position:"bottomleft",html:function(){return'<img alt="North arrow" height="30" width="20" src="'+f["default"].Icon.Default.imagePath+'/north.png">'}}},tiles:{D:{name:"Campus Map",url:"https://uwaterloo.ca/map/tiles/default/{z}/{x}/{y}.png",config:{maxNativeZoom:18,maxZoom:18,attribution:'<a href="http://www.openstreetmap.org/copyright">Map data © OpenStreetMap contributors.</a>'}},H:{name:"High Contrast",url:"https://uwaterloo.ca/map/tiles/hc/{z}/{x}/{y}.png",config:{maxNativeZoom:18,maxZoom:18,attribution:'<a href="http://www.openstreetmap.org/copyright">Map data © OpenStreetMap contributors.</a>'}}},default_tiles:"D",buildings:{type:"uwbuilding",id:"buildings",name:"Buildings",endpoint:"v2/buildings/list",endpoint_options:{source:"osm"},indoor_maps_endpoint:"indoor-maps/buildings"},layers:m["default"]},directions:{addWaypoints:!0,useZoomParameter:!0,autoRoute:!0,lineOptions:{styles:[{color:"white",opacity:1,weight:8},{color:"black",opacity:1,weight:6},{color:"#00b6ff",opacity:1,weight:4}]},summaryTemplate:'<h4>Directions</h4><p class="route-summary">{distance}, {time}</p>',collapsible:!0,show:!1,containerClassName:"routing",collapseBtn:function v(t){var v=f["default"].DomUtil.create("a","leaflet-routing-collapse-btn");f["default"].DomUtil.create("i","icon-direction ri-show",v),f["default"].DomUtil.create("i","icon-cancel ri-hide",v);f["default"].DomEvent.on(v,"click",t._toggle,t),t._container.insertBefore(v,t._container.firstChild)}},present:function(t,e){function n(){r.parentElement.removeChild(r),o.parentElement.removeChild(o),i&&i()}var i=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=f["default"].DomUtil.create("div","modal-backdrop fade in",document.body),r=f["default"].DomUtil.create("div","modal fade in",document.body),s=f["default"].DomUtil.create("div","modal-dialog modal-lg",r),a=f["default"].DomUtil.create("div","modal-content",s);r.style.display="block",f["default"].DomEvent.addListener(r,"click",function(t){(t.target||t.srcElement)===r&&n()});var u=f["default"].DomUtil.create("div","modal-header",a),l=f["default"].DomUtil.create("button","close",u);l.type="button",l.setAttribute("arial-label","close"),l.data||(l.data={}),l.data.dismiss="modal",l.innerHTML='<span aria-hidden="true">&times;</span>',f["default"].DomEvent.addListener(l,"click",n);var c=f["default"].DomUtil.create("h4","modal-title",u);c.innerHTML=t;var h=f["default"].DomUtil.create("div","modal-body",a);h.appendChild(e)},data_providers:[{name:"OpenStreetMap",description:"Map data © OpenStreetMap contributors",license:"http://www.openstreetmap.org/copyright"},{name:"University of Waterloo Open Data API",description:"Contains information provided by the University of Waterloo under license on an 'as is' basis",license:"https://uwaterloo.ca/open-data/university-waterloo-open-data-license-agreement-v1"},{name:"Nominatim",description:"Contains geocoding by Nominatim",service_information:"http://wiki.openstreetmap.org/wiki/Nominatim"},{name:"Mapzen",description:"Contains routing by Mapzen under license on an 'as is' basis",license:"https://mapzen.com/terms/"},{name:"Regional Municipality of Waterloo",description:"Contains information provided by the Regional Municipality of Waterloo under licence",license:"http://www.regionofwaterloo.ca/en/regionalGovernment/OpenDataLicence.asp"},{name:"Metrolinx",description:"Data used in this product or service is provided with the permission of Metrolinx. Metrolinx makes no representations or warranties of any kind, express or implied, and assumes no responsibility for the accuracy or currency of the data used in this product or service.",license:"http://www.gotransit.com/publicroot/en/schedules/DeveloperResources.aspx#useagreement"}]};n["default"]=y}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/config.js","/js")},{"./layers":10,"./secrets":14,_process:53,buffer:17,leaflet:48}],3:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var m=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),g=t("leaflet"),_=h(g);t("leaflet-routing-machine"),t("lrm-mapzen"),t("leaflet-control-geocoder");var y=function(t){function e(n){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];d(this,e);var o=f(this,t.call(this,i));return o._campusMap=n,o}return p(e,t),e.prototype.suggest=function(t,e,n){t.length<2||this.geocode(t,e,n,!1)},e.prototype.geocode=function(e,n,i){var o=this,r=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],s=[];r&&t.prototype.geocode.call(this,e,function(t){s=s.concat(t),n.call(i,s)},i),e=e.toLowerCase();var a=[];Object.keys(this.campusMap.buildings.buildings).forEach(function(t){a.push(o.campusMap.buildings.buildings[t])}),a=a.filter(function(t){return 0!==t.layer.getLatLng().lat&&0!==t.layer.getLatLng().lng&&(-1!==t.props.building_code.toLowerCase().indexOf(e)||-1!==t.props.building_name.toLowerCase().indexOf(e))}),a.sort(function(t,e){return t.props.building_code<e.props.building_code?-1:e.props.building_code<t.props.building_code?1:0}).forEach(function(t){s.push({name:t.props.building_name+" ("+t.props.building_code+")",bounds:null,center:t.layer.getLatLng()})}),r||n.call(i,s)},m(e,[{key:"campusMap",get:function(){return this._campusMap}}]),e}(_["default"].Control.Geocoder.Nominatim);_["default"].Control.Geocoder.uw=function(t,e){return new y(t,e)};var v=function(t){function e(){return d(this,e),f(this,t.apply(this,arguments))}return p(e,t),e.prototype.createStep=function(t,e,n,i){var o=_["default"].DomUtil.create("tr","step",i),r=_["default"].DomUtil.create("td","step",o);_["default"].DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+n,r);var s=_["default"].DomUtil.create("td","text",o);return s.innerHTML=t,"0 m"!==e?_["default"].DomUtil.create("td","distance",o).innerHTML=e:s.colSpan=2,o},e}(_["default"].Routing.ItineraryBuilder),b=function(t){function e(n,i,o){d(this,e),i.geocoderClass=function(){return r.geocoderClass()},i.createGeocoder=function(t,e,n){return r.createGeocoder(t,e,n)};var r=f(this,t.call(this,n,i));return r._directionsController=o,r._latLng=null,r}return p(e,t),e.prototype.switchMode=function(t){this.options.router.options.costing=t,this._directionsController._routingControl.route(),this.fire("modechanged",{mode:t})},e.prototype.createGeocoders=function(){var e=this,n=_["default"].DomUtil.create("form",""),i=t.prototype.createGeocoders.call(this);n.appendChild(i);var o=n.querySelector(".leaflet-routing-add-waypoint");o.innerText="Add another destination";var r=_["default"].DomUtil.create("div","form-group",n),s=_["default"].DomUtil.create("div","btn-group modes",r),a=_["default"].DomUtil.create("div","btn btn-default",s),u=_["default"].DomUtil.create("input","mode",a);u.name="mode",u.type="radio",u.value="auto",u.id="mode-auto";var l=_["default"].DomUtil.create("label","",a);l.htmlFor="mode-auto",l.innerHTML='<i class="icon-cab" alt="Driving"></i>',_["default"].DomEvent.addListener(u,"change",function(){return e.switchMode("auto")}),this.on("modechanged",function(t){return u.checked=t.mode===u.value});var c=_["default"].DomUtil.create("div","btn btn-default",s),h=_["default"].DomUtil.create("input","mode",c);h.name="mode",h.type="radio",h.value="pedestrian",h.id="mode-pedestrian",h.checked=!0;var d=_["default"].DomUtil.create("label","",c);return d.htmlFor="mode-pedestrian",d.innerHTML='<i class="icon-pitch" alt="Walking"></i>',_["default"].DomEvent.addListener(h,"change",function(){return e.switchMode("pedestrian")}),this.on("modechanged",function(t){return h.checked=t.mode===h.value}),_["default"].DomUtil.create("hr","",n),n},e.prototype.geocoderClass=function(){return"form-control"},e.prototype.createGeocoder=function(t,e,n){var i=this,o=_["default"].DomUtil.create("div","waypoint"),r=_["default"].DomUtil.create("div","input-group",o),s=_["default"].DomUtil.create("input","form-control",r);s.type="text";var a=_["default"].DomUtil.create("span","input-group-btn",r),u=_["default"].DomUtil.create("button","btn btn-link remove-waypoint",a);u.type="button";var l=_["default"].DomUtil.create("i","glyphicon glyphicon-remove",u);l.alt="Remove Waypoint";var c=_["default"].DomUtil.create("button","btn btn-default my-location",a);c.type="button",c.disabled=null===this._latLng;var h=_["default"].DomUtil.create("i","icon-direction",c);return h.alt="My Location",this._directionsController.campusMap.map.on("locationfound",function(t){c.disabled=t.accuracy>300,i._latLng=t.accuracy>300?null:t.latlng}),this._directionsController.campusMap.map.on("locationerror",function(t){c.disabled=!0,i._latLng=null}),_["default"].DomEvent.addListener(c,"click",function(e){_["default"].DomEvent.preventDefault(e),i._latLng&&i.spliceWaypoints(t,1,_["default"].Routing.waypoint(i._latLng,"My Location"))}),{container:o,input:s,closeButton:u}},e}(_["default"].Routing.Plan),w=function(){function t(e){d(this,t),this._campusMap=e,this._router=_["default"].Routing.mapzen(this._campusMap.config.valhalla_api_key,{costing:"pedestrian"}),this._formatter=new _["default"].Routing.mapzenFormatter,this._geocoder=_["default"].Control.Geocoder.uw(this.campusMap,{geocodingQueryParams:{viewbox:"-81.0467, 43.25, -80.1528, 43.71",bounded:1,"accept-language":"en"}});var n={router:this._router,formatter:this._formatter,geocoder:this._geocoder,itineraryBuilder:new v};n=_["default"].Util.extend(n,this.campusMap.config.directions),this._plan=new b([],n,this),n.plan=this._plan,this._routingControl=_["default"].Routing.control(n),this._routingControl.addTo(this._campusMap.map)}return t.prototype.generateDirectionsLink=function(t,e,n){var i=this;t=parseFloat(t),e=parseFloat(e);var o=_["default"].DomUtil.create("div","large-popup-label directions"),r=_["default"].DomUtil.create("a","directions-link",o);r.innerHTML="Directions to here",_["default"].DomEvent.addListener(r,"click",function(o){i._routingControl.spliceWaypoints(i._routingControl.getWaypoints().length-1,1,_["default"].Routing.waypoint(_["default"].latLng(t,e),n)),i._routingControl.show()}),_["default"].DomUtil.create("br","",o);var s=_["default"].DomUtil.create("a","directions-link",o);return s.innerHTML="Add as next destination",_["default"].DomEvent.addListener(s,"click",function(o){i._routingControl.spliceWaypoints(i._routingControl.getWaypoints().length,0,_["default"].Routing.waypoint(_["default"].latLng(t,e),n)),i._routingControl.show()}),o},m(t,[{key:"campusMap",get:function(){return this._campusMap}},{key:"controller",get:function(){return this._routingControl}},{key:"plan",get:function(){return this._plan}}]),t}();n["default"]=w}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/directions.js","/js")},{_process:53,buffer:17,leaflet:48,"leaflet-control-geocoder":33,"leaflet-routing-machine":36,"lrm-mapzen":49}],4:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var m=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),g=t("leaflet"),_=h(g),y=t("./data"),v=t("../lib/projective"),b=h(v),w=function(t){function e(n,i,o){d(this,e),n.options=n.options||{},n.options.pointToLayer||(n.options.pointToLayer=function(t,e){var i=_["default"].DomUtil.create("div","large-popup");if(t.properties.building_name){var o=_["default"].DomUtil.create("div","large-popup-header",i);_["default"].DomUtil.create("p","",o).innerHTML=t.properties.building_name}var s=_["default"].DomUtil.create("p","",i),a=function(e){t.properties.indoorMaps=e;var n=_["default"].DomUtil.create("a","show-indoor-maps",s);n.href="#",n.innerHTML="Indoor Maps",_["default"].DomEvent.addListener(n,"click",function(e){_["default"].DomEvent.preventDefault(e),r.showIndoorMaps(t.properties)})};if(t.properties.building_code in r._indoorMaps?a(r._indoorMaps[t.properties.building_code]):r._indoorMapsAvailable||r.on("indoormaps",function(){t.properties.building_code in r._indoorMaps&&a(r._indoorMaps[t.properties.building_code])}),t.properties.streamable_vid){var u=_["default"].DomUtil.create("iframe","",i);u.src="https://streamable.com/e/"+t.properties.streamable_vid+"?muted=1",u.width="100%",u.setAttribute("frameborder","0"),u.setAttribute("allowfullscreen",!0),u.setAttribute("webkitallowfullscreen",!0),u.setAttribute("mozallowfullscreen",!0),u.scrolling="no"}i.appendChild(n.generateDirectionsLink(e.lat,e.lng,t.properties.building_name+" ("+t.properties.building_code+")"));var l=_["default"].popup().setContent(i),c=_["default"].divIcon({iconSize:[30,30],className:"building-marker",popupAnchor:[0,-10],html:t.properties.building_code.substr(0,3)}),h=_["default"].marker(e,{icon:c});return h.bindPopup(l,{maxWidth:250,minWidth:250,maxHeight:400}),h.on("popupopen",function(){var e=_["default"].divIcon({iconSize:[30,30],className:"building-marker selected",popupAnchor:[0,-10],html:t.properties.building_code.substr(0,3)});h.setIcon(e),r.emit("buildingselected",t.properties)}),h.on("popupclose",function(){h.setIcon(c),r.emit("buildingdeselected",t.properties)}),h}),n.options.onEachFeature=function(t,e){e.feature=t,r._layers.push(e),e.on("popupclose",function(){r.map.getZoom()<16?r.removeLayer(e):r.map.getZoom()<17&&null!==e.feature.properties.building_parent&&r.removeLayer(e)}),t.properties.building_code in r._buildings&&null!==t.properties.building_parent||(r._buildings[t.properties.building_code]={props:t.properties,layer:e},r._buildingsById[t.properties.building_id]={props:t.properties,layer:e})};var r=f(this,t.call(this,n,i));return r._indoorMapsCallback=o,r._layers=[],r._buildings={},r._buildingsById={},r._indoorMapsAvailable=!1,r._indoorMaps={},r}return p(e,t),e.prototype.showIndoorMaps=function(t){function e(){var e=this;fetch(t.indoorMaps).then(function(t){return t.json()}).then(function(n){e._indoorMapsBuilding=t,i.innerHTML="";var o=_["default"].DomUtil.create("div","im",i);e._mapWrapper=_["default"].DomUtil.create("div","im-map",o),e._indoorMapElement=_["default"].DomUtil.create("div","",e._mapWrapper),e._indoorMapElement.id="im-map";e._roomSelector=_["default"].DomUtil.create("select","room-selector",o),_["default"].DomEvent.addListener(e._roomSelector,"change",function(t){e.selectRoom(e._roomSelector.value)});var r=_["default"].DomUtil.create("ul","im-floors",o),s=n.floors.slice(0);t.floors=s,s.reverse().forEach(function(n){n.building=t;var i=_["default"].DomUtil.create("li","",r),o=_["default"].DomUtil.create("a","switch-floor",i);o.href="#",o.innerHTML=n.name,_["default"].DomEvent.addListener(o,"click",function(t){_["default"].DomEvent.preventDefault(t),e.selectFloor(n)}),e.on("floorselected",function(t,e){n===e?_["default"].DomUtil.addClass(i,"selected"):_["default"].DomUtil.removeClass(i,"selected")})}),e.selectFloor(n.floors[0]),e.emit("indoormapsstart",t)})["catch"](function(t){i.innerHTML="Sorry, an unexpected error occurred while loading indoor maps."})}var n=this;if("string"==typeof t)return!1;var i=_["default"].DomUtil.create("div","");i.innerHTML='<i class="icon-spin6 animate-spin"></i>&nbsp;Loading indoor maps...',this._indoorMaps.error?i.innerHTML=this._indoorMaps.error:this._indoorMapsAvailable?t.indoorMaps?e.bind(this)():i.innerHTML="Sorry, indoor maps are not available for this building.":this.on("indoormaps",e.bind(this)),this._config.map_config.present(t.building_name+" ("+t.building_code+")",i,function(){n.selectRoom(null),n.emit("indoormapsend",t),n._indoorMap=null,n._indoorMapsBuilding=null})},e.prototype.selectFloor=function(t){var e=this,n=8;if("string"==typeof t){var i=this._indoorMapsBuilding.floors.filter(function(e){return e.name===t});if(1!==i.length)return!1;t=i[0]}if(t!=this._activeFloor){this._activeFloor=t,this.selectRoom(null);var o=Math.ceil(Math.log(Math.max(t.perspective.size.height,t.perspective.size.width))/Math.log(2))-n,r=[],s=[];t.perspective.reference.forEach(function(t){r.push([parseFloat(t.control.x),parseFloat(t.control.y)]),s.push([parseFloat(t.target.x),parseFloat(t.target.y)])});var a=new b["default"]({from:r,to:s}),u=_["default"].DomUtil.create("div","im-map-map");this._mapWrapper.replaceChild(u,this._indoorMapElement),this._indoorMapElement=u,this._indoorMap=_["default"].map(u,{center:[-125,100],zoom:1,minZoom:0,maxZoom:o,crs:_["default"].CRS.Simple,attributionControl:!1});var l=_["default"].tileLayer(t.perspective.tiles,{zoomOffset:n,noWrap:!0,continuousWorld:!0});for(l.addTo(this._indoorMap);this._roomSelector.firstChild;)this._roomSelector.removeChild(this._roomSelector.firstChild);var c=_["default"].DomUtil.create("option","",this._roomSelector);c.value="",c.innerText="Select a room...",this._markers=[],this._room_labels=_["default"].markerClusterGroup({disableClusteringAtZoom:this._indoorMap.getMaxZoom()}),t.locations.filter(function(t){return"rooms"===t.type}).forEach(function(n){n.selected=!1;var i=_["default"].marker(e._indoorMap.unproject(a.transform([n.latitude,n.longitude]),e._indoorMap.getMaxZoom()),{icon:_["default"].divIcon({className:"room-marker",html:"<div class='room-number'>"+n.name.replace(/.*\s(.+)/,"$1")+"</div>"}),title:n.name,clickable:!0});i.location=n,n.marker=i,n.floor=t,i.addTo(e._room_labels),i.on("click",function(){n.selected?e.selectRoom(null):e.selectRoom(n)}),e._markers.push(i);var o=_["default"].DomUtil.create("option","",e._roomSelector);o.value=n.name,o.innerText=n.name}),this._room_labels.addTo(this._indoorMap),setTimeout(function(){return e._indoorMap.invalidateSize()},500),this.emit("floorselected",t.building,t,this._indoorMap)}},e.prototype.selectRoom=function(t){if("string"==typeof t)if(""===t)t=null;else{var e=this._markers.filter(function(e){return e.location.name===t});if(1!==e.length)return!1;t=e[0].location}this._selectedRoom&&(this._selectedRoom.selected=!1,this._selectedRoom.marker.setIcon(_["default"].divIcon({className:"room-marker",html:"<div class='room-number'>"+this._selectedRoom.name.replace(/.*\s(.+)/,"$1")+"</div>"})),this._indoorMap.removeLayer(this._selectedRoom.marker),this._room_labels.addLayer(this._selectedRoom.marker),this.emit("roomdeselected",this._selectedRoom.floor.building,this._selectedRoom.floor,this._selectedRoom),this._selectedRoom=null),t&&(this._selectedRoom=t,this._selectedRoom.selected=!0,this._selectedRoom.marker.setIcon(_["default"].divIcon({className:"room-marker",html:"<div class='room-number selected'>"+this._selectedRoom.name.replace(/.*\s(.+)/,"$1")+"</div>"})),this._room_labels.removeLayer(t.marker),this._indoorMap.addLayer(t.marker),this.emit("roomselected",this._selectedRoom.floor.building,this._selectedRoom.floor,this._selectedRoom))},e.prototype._filter=function(t){var e=this;this._layers.forEach(function(t){t.getPopup()._isOpen||(e.map.getZoom()<16?e.removeLayer(t):e.map.getZoom()<17&&null!==t.feature.properties.building_parent?e.removeLayer(t):e.hasLayer(t)||e.addLayer(t))})},e.prototype.addData=function(e){t.prototype.addData.call(this,e),this.map&&this._filter({})},e.prototype.onAdd=function(e){t.prototype.onAdd.call(this,e),this._indoorMapsRequested||(this._indoorMapsCallback(this),this._indoorMapsRequested=!0),e.on("zoomend",this._filter.bind(this)),this._filter({})},e.prototype.onRemove=function(e){e.off("zoomend",this._filter.bind(this)),t.prototype.onRemove.call(this,e)},e.prototype.setIndoorMaps=function(t){this._indoorMapsAvailable||(this._indoorMaps=t,this._indoorMapsAvailable=!0,this.emit("indoormaps"))},e.prototype.setIndoorMapsUnavailable=function(t){this._indoorMaps={error:t},this._indoorMapsAvailable=!0,this.emit("indoormaps")},e.prototype.selectBuilding=function(t){function e(t,e){if(!t||t in this._buildings||t in this._buildingsById)if(t){var n=t in this._buildings?this._buildings[t]:this._buildingsById[t];e&&this.map.setView(n.layer.getLatLng()),this.addLayer(n.layer),n.layer.openPopup()}else this._layers.forEach(function(t){t.closePopup()})}var n=this,i=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];!t||t in this._buildings||t in this._buildingsById?e.call(this,t,i):!function(){var o=function r(n){var o=this;!n.properties||n.properties.building_code!==t&&n.properties.building_id!==t||(setTimeout(function(){return e.call(o,t,i)},100),this.off("data",r))};n.on("data",o.bind(n))}()},m(e,[{key:"buildings",get:function(){return this._buildings}},{key:"buildingInfo",get:function(){var t=this,e={};return Object.keys(this._buildings).forEach(function(n){e[n]=t._buildings[n].props}),e}}]),e}(y.UnclusteredDataLayer);n["default"]=w}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/layer/building.js","/js/layer")},{"../lib/projective":11,"./data":5,_process:53,buffer:17,leaflet:48}],5:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.UnclusteredDataLayer=n.DataLayer=void 0;var m=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),g=t("leaflet"),_=h(g);t("leaflet.markercluster");var y=t("./named"),v=n.DataLayer=function(t){function e(n,i){d(this,e);var n=n||{};n.options=n.options||{},n.options.onEachFeature=function(t,e){return o.addLayer(e)};var o=f(this,t.call(this,{showCoverageOnHover:!1,maxClusterRadius:50,spiderfiyOnMaxZoom:!0,zoomToBoundsOnClick:!0,iconCreateFunction:function(t){var e=_["default"].divIcon({iconSize:[60,70],className:"marker-container",iconAnchor:[30,76],html:'<div class="marker-subcontainer"><p class="map-marker-label-inv"><span class="map-marker-label-bak">'+t.getChildCount()+'</span></p><i class="map-marker-with-label '+n.icon_class+'"></i><img alt="Map marker background" src="'+_["default"].Icon.Default.imagePath+'/container-icon.svg"></div>'
});return e.options.zIndexOffset=2e3,e}}));return o._map=null,o._config=n,o._dataCallback=i,o._unclusteredDataLayer=new b(n,i),o.addLayer(o._unclusteredDataLayer),o}return p(e,t),e.prototype.on=function(e,n){"added"===e|"removed"===e?this._unclusteredDataLayer.on(e,n):t.prototype.on.call(this,e,n)},e.prototype.off=function(e,n){"added"===e|"removed"===e?this._unclusteredDataLayer.off(e,n):t.prototype.off.call(this,e,n)},e.prototype.addData=function(t){this._unclusteredDataLayer.addData(t)},e.prototype.onAdd=function(e){this._map=e,this._dataRequested||(this._dataCallback(this),this._dataRequested=!0),t.prototype.onAdd.call(this,e),this._unclusteredDataLayer.emit("added")},e.prototype.onRemove=function(e){this._unclusteredDataLayer.emit("removed"),t.prototype.onRemove.call(this,e),this._map=null},m(e,[{key:"active",get:function(){return null!==this._map},set:function(t){}},{key:"id",get:function(){return this._unclusteredDataLayer.id}},{key:"name",get:function(){return this._unclusteredDataLayer.name}},{key:"config",get:function(){return this._unclusteredDataLayer._config}}]),e}(_["default"].MarkerClusterGroup);n["default"]=v;var b=n.UnclusteredDataLayer=function(t){function e(n,i){d(this,e),n.options=_["default"].Util.extend({featureName:function(t,e){return e.properties.name},iconLabel:function(t,e){return null},popupContent:function(t,e,n){return null},icon:function(t,e,n){var i=t.options.iconLabel(t,e);if(i){var o=i.length>6?"map-marker-label-small":"map-marker-label";return _["default"].divIcon({iconSize:[60,70],className:"marker-container",iconAnchor:[30,76],html:'<div class="marker-subcontainer"><p class="'+o+'">'+i+'</p><i class="map-marker-with-label '+t.icon_class+'"></i><img alt="Map marker background" src="'+_["default"].Icon.Default.imagePath+'/container-icon.svg"></div>'})}return _["default"].divIcon({iconSize:[60,70],className:"marker-container",iconAnchor:[30,76],html:'<div class="marker-subcontainer"><i class="map-marker '+t.icon_class+'"></i><img alt="Map marker background" src="'+_["default"].Icon.Default.imagePath+'/container-icon.svg"></div>'})},pointToLayer:function(t,e){var i=_["default"].DomUtil.create("div","large-popup"),o=_["default"].DomUtil.create("div","large-popup-header",i);_["default"].DomUtil.create("p","",o).innerHTML=n.options.featureName(n,t);var r=n.options.popupContent(n,t,e);r&&i.appendChild(r),i.appendChild(n.generateDirectionsLink(e.lat,e.lng,n.options.featureName(n,t)));var s=n.options.iconLabel(n,t);if(s){var a=_["default"].DomUtil.create("div","large-popup-label",i);a.innerText=s;var u=_["default"].DomUtil.create("i","large-popup-icon "+n.icon_class,i);u.alt="POI Icon"}else{var l=_["default"].DomUtil.create("i","large-popup-icon-no-label "+n.icon_class,i);l.alt="POI Icon"}var c=_["default"].popup().setContent(i),h=n.options.icon(n,t,e),d=_["default"].marker(e,{icon:h});return d.bindPopup(c),d}},n.options);var o=f(this,t.call(this,n,[],n.options));return o._config=n,o._dataCallback=i,o._dataRequested=!1,o}return p(e,t),e.prototype.onAdd=function(e){this._dataRequested||(this._dataCallback(this),this._dataRequested=!0),t.prototype.onAdd.call(this,e)},e}(y.NamedGeoJSONLayer)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/layer/data.js","/js/layer")},{"./named":7,_process:53,buffer:17,leaflet:48,"leaflet.markercluster":47}],6:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=t("./named"),g=function(t){function e(n){h(this,e);var i=d(this,t.call(this,n));return i._html=n.html,i}return f(e,t),e.prototype.onAdd=function(t){},e.prototype.onRemove=function(t){},p(e,[{key:"html",get:function(){return this._html}}]),e}(m.NamedLayer);n["default"]=g}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/layer/html.js","/js/layer")},{"./named":7,_process:53,buffer:17}],7:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.NamedGeoJSONLayer=n.NamedLayer=void 0;var m=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),g=t("leaflet"),_=h(g),y=t("minivents"),v=h(y);n.NamedLayer=function(t){function e(n){d(this,e);var i=f(this,t.call(this));return(0,v["default"])(i),i._id=n.id,i._name=n.name||n.id,i._config=n,i}return p(e,t),e.prototype.onAdd=function(t){this._map=t,this.emit("added")},e.prototype.onRemove=function(t){this.emit("removed"),this._map=null},m(e,[{key:"active",get:function(){return null!==this._map},set:function(t){}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"config",get:function(){return this._config}},{key:"map",get:function(){return this._map}}]),e}(_["default"].Class),n.NamedGeoJSONLayer=function(t){function e(n,i,o){d(this,e);var r=f(this,t.call(this,i,o));return(0,v["default"])(r),r._id=n.id,r._name=n.name||n.id,r._config=n,r}return p(e,t),e.prototype.addData=function(e){t.prototype.addData.call(this,e),this.emit&&this.emit("data",e)},e.prototype.onAdd=function(e){this._map=e,t.prototype.onAdd.call(this,e),this.emit("added")},e.prototype.onRemove=function(e){this.emit("removed"),this._map=null,t.prototype.onRemove.call(this,e)},m(e,[{key:"active",get:function(){return null!==this._map},set:function(t){}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"config",get:function(){return this._config}},{key:"map",get:function(){return this._map}}]),e}(_["default"].GeoJSON)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/layer/named.js","/js/layer")},{_process:53,buffer:17,leaflet:48,minivents:50}],8:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=t("./named"),g=function(t){function e(n,i){h(this,e);var o=d(this,t.call(this,n,i));return o._sublayers=[],o}return f(e,t),e.prototype.addSublayer=function(t){this._sublayers.push(t)},p(e,[{key:"sublayers",get:function(){return this._sublayers}}]),e}(m.NamedLayer);n["default"]=g}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/layer/parent.js","/js/layer")},{"./named":7,_process:53,buffer:17}],9:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var m=t("leaflet"),g=h(m),_=t("./data"),y=(t("../directions"),function(t){function e(n,i){d(this,e),n=g["default"].Util.extend({watpark_endpoint:"v2/parking/watpark"},n);var o=fetch(""+n.map_config.uwapi.base+n.watpark_endpoint+".json?key="+n.map_config.uwapi.key).then(function(t){return t.json()}).then(function(t){return t.data});return n=g["default"].Util.extend({options:{pointToLayer:function(t,e){var i=g["default"].DomUtil.create("div","large-popup"),r=g["default"].DomUtil.create("div","watpark",i);o.then(function(e){var n=e.filter(function(e){return e.lot_name===t.properties.name});if(1==n.length){var i=n[0],o=g["default"].DomUtil.create("div","large-popup-subheader",r);o.innerText=i.capacity-i.current_count+" Spots Left";var s=g["default"].DomUtil.create("div","progress",r),a=g["default"].DomUtil.create("div","progress-bar",s);a.role="progressbar",a.setAttribute("aria-valuenow",i.current_count),a.setAttribute("aria-valuemin",0),a.setAttribute("aria-aluemax",i.capacity),a.style.width=i.percent_filled+"%",a.innerText=i.percent_filled+"% Full"}});var s=g["default"].DomUtil.create("div","large-popup-label",i),a=g["default"].DomUtil.create("a","",s);a.innerHTML="Parking Information",a.href="https://uwaterloo.ca/parking/lot-information",i.appendChild(n.generateDirectionsLink(e.lat,e.lng,t.properties.name));var u=g["default"].DomUtil.create("span","large-popup-label",i);u.innerHTML=n.lot_type.toUpperCase(),g["default"].DomUtil.create("br","",i);var l=g["default"].DomUtil.create("span","popup-lot-letter-label",i);l.innerHTML=t.properties.name.substr(0,3);var c=g["default"].popup().setContent(i),h=g["default"].divIcon({iconSize:[60,70],className:"marker-container",iconAnchor:[30,76],html:'<div class="marker-subcontainer"><p class="map-marker-label">'+n.lot_type.toUpperCase()+'</p><span class="lot-letter-label">'+t.properties.name.substr(0,3)+'</span><img alt="Map marker background" src="'+g["default"].Icon.Default.imagePath+'/container-icon.svg"></div>'}),d=g["default"].marker(e,{icon:h});return d.bindPopup(c),d}}},n||{}),f(this,t.call(this,n,i))}return p(e,t),e}(_.DataLayer));n["default"]=y}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/layer/parking.js","/js/layer")},{"../directions":3,"./data":5,_process:53,buffer:17,leaflet:48}],10:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var d=t("leaflet"),f=h(d),p={"help-lines":{type:"uwapi",id:"help-lines",name:"Help Lines",icon_class:"icon-help-phone",endpoint:"v2/poi/helplines"},"accessible-parking":{type:"uwapi",id:"accessible-parking",name:"Accessible Parking",icon_class:"icon-parking-circle",endpoint:"v2/parking/lots/accessible",options:{iconLabel:function(t,e){return"ACCESSIBLE"}}}},m=[{type:"parent",id:"emergency-information",name:"Emergency Information",sublayers:[{type:"html",id:"emergency-contacts",name:"Emergency Contacts",html:"<b>In the event of an emergency, call 9-1-1 or Campus Police at extension 22222 or (519) 888-4911.</b>"},{type:"html",id:"watsafe",name:"WatSAFE",html:'Download the <a href="https://uwaterloo.ca/watsafe">WatSAFE app</a> to receive emergency alerts and notifications.'},{type:"uwapi",id:"aed",name:"Automatic External Defibrillators",icon_class:"icon-aed",endpoint:"v2/poi/defibrillators",options:{iconLabel:function(t,e){return e.properties.room?e.properties.room:e.properties.level?"FLOOR "+e.properties.level:""},popupContent:function(t,e,n){var i=f["default"].DomUtil.create("div"),o=f["default"].DomUtil.create("p","large-popup-subheader",i);o.innerText=e.properties.description;var r=f["default"].DomUtil.create("div","large-popup-label",i),s=f["default"].DomUtil.create("a","",r);if(s.innerText="AED Information (UW Safety Office)",s.href="https://uwaterloo.ca/safety-office/emergency-procedures/first-aid/automated-external-defibrillators-aeds",e.properties.image){var a=f["default"].DomUtil.create("img","popup-image large-image",i);a.src=e.properties.image}return i}}},p["help-lines"]]},{type:"parent",id:"places",name:"Places",sublayers:[{type:"uwapi",id:"food",name:"Places to Eat",icon_class:"icon-food",endpoint:"v2/foodservices/locations",options:{featureName:function(t,e){return e.properties.outlet_name},iconLabel:function(t,e){return e.properties.is_open_now?"OPEN":"CLOSED"},popupContent:function(t,e,n){function i(t){return 10>t?"0"+t:""+t}var o=f["default"].DomUtil.create("div");if(e.properties.notice){var r=f["default"].DomUtil.create("p","large-subheader",o);r.innerHTML="<b>"+e.properties.notice+"</b>"}var s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],a=new Date,u=a.getFullYear()+"-"+i(a.getMonth()+1)+"-"+i(a.getDate()),l=s[a.getDay()];if(-1!==e.properties.dates_closed.indexOf(u))f["default"].DomUtil.create("div","large-popup-subheader",o).innerHTML="Exception: Closed Today";else{var c=!1;e.properties.special_hours.forEach(function(t){t.date===u&&(c=!0,f["default"].DomUtil.create("div","large-popup-subheader",o).innerHTML="Today's Special Hours: "+t.opening_hour+" to "+special_closing_hour)}),c||e.properties.opening_hours[l].is_closed?f["default"].DomUtil.create("div","large-popup-subheader",o).innerHTML="Closed Today":f["default"].DomUtil.create("div","large-popup-subheader",o).innerHTML="Today's Hours: "+e.properties.opening_hours[l].opening_hour+" to "+e.properties.opening_hours[l].closing_hour}if(e.properties.logo){var h=f["default"].DomUtil.create("img","popup-image",o);h.src=e.properties.logo}return o}}},{type:"uwapi",id:"libraries",name:"Libraries",icon_class:"icon-library",endpoint:"v2/poi/libraries"}]},{type:"parent",id:"transit",name:"Transit",sublayers:[{type:"uwapi",id:"grt",name:"GRT Stops",icon_class:"icon-bus",endpoint:"v2/transit/grt/stops",options:{iconLabel:function(t,e){return e.properties.id},popupContent:function(t,e,n){var i=f["default"].DomUtil.create("div"),o=f["default"].DomUtil.create("div","large-popup-label",i),r=f["default"].DomUtil.create("a","",o);return r.innerHTML="GRT Trip Planner",r.href="http://web.grt.ca/hastinfoweb/",i}}},{type:"uwapi",id:"go-transit",name:"GO Transit",icon_class:"icon-bus",endpoint:"v2/transit/go/stops"},{type:"uwapi",id:"greyhound",name:"Greyhound",icon_class:"icon-bus",endpoint:"v2/poi/greyhound"},{type:"uwapi",id:"community-carshare",name:"Community CarShare",icon_class:"icon-cab",endpoint:"v2/poi/carshare"}]},{type:"parent",id:"information",name:"Information",sublayers:[{type:"uwapi",id:"visitor-information",name:"Visitor Information",icon_class:"icon-info",endpoint:"v2/poi/visitorinformation"},{type:"uwapi",id:"construction-sites",name:"Construction Sites",icon_class:"icon-construction",endpoint:"v2/poi/constructionsites"},p["help-lines"],{type:"uwapi",id:"photospheres",name:"Photospheres",icon_class:"icon-camera",endpoint:"v2/poi/photospheres",options:{popupContent:function(t,e,n){var i=f["default"].DomUtil.create("div"),o=f["default"].DomUtil.create("div","large-popup-label",i),r=f["default"].DomUtil.create("a","",o);return r.innerHTML="View Photosphere",r.href=e.properties.url,i}}},{type:"uwapi",id:"atms",name:"ATMs",icon_class:"icon-credit-card",endpoint:"v2/poi/atms"}]},{type:"parent",id:"parking",name:"Parking",sublayers:[{type:"uwparking",lot_type:"visitor",id:"visitor-parking",name:"Visitor Parking",icon_class:"icon-parking-circle",endpoint:"v2/parking/lots/visitor"},{type:"uwapi",id:"meter-parking",name:"Meter Parking",icon_class:"icon-parking-circle",endpoint:"v2/parking/lots/meter",options:{iconLabel:function(t,e){return"METER"}}},{type:"uwapi",id:"short-term-parking",name:"Short Term Parking",icon_class:"icon-parking-circle",endpoint:"v2/parking/lots/shortterm",options:{iconLabel:function(t,e){return"SHORT TERM"}}},{type:"uwapi",id:"motorcycle-parking",name:"Motorcylce Parking",icon_class:"icon-parking-circle",endpoint:"v2/parking/lots/motorcycle",options:{iconLabel:function(t,e){return"MOTORCYCLE"}}},p["accessible-parking"],{type:"uwparking",lot_type:"permit",id:"permit-parking",name:"Permit Parking",icon_class:"icon-parking-circle",endpoint:"v2/parking/lots/permit"}]},{type:"parent",id:"accessibility",name:"Accessibility",sublayers:[p["accessible-parking"],{type:"uwapi",id:"accessible-entrances",name:"Accessible Entrances",icon_class:"icon-accessibility",endpoint:"v2/poi/accessibleentrances"}]}];n["default"]=m}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/layers.js","/js")},{_process:53,buffer:17,leaflet:48}],11:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}var d=t("numeric"),f=h(d),p=function(t){var e={};t=t||{},e.from=t.from||[],e.to=t.to||[];var n=[],i=[],o=[],r=[],s=[],a=[],u=[],l=[],c=function(){u=e.from[0]||[0,0],l=e.to[0]||[0,0];var t=[[e.from[0][0]-u[0],e.from[1][0]-u[0],e.from[2][0]-u[0]],[e.from[0][1]-u[1],e.from[1][1]-u[1],e.from[2][1]-u[1]],[1,1,1]],c=[[e.to[0][0]-l[0],e.to[1][0]-l[0],e.to[2][0]-l[0]],[e.to[0][1]-l[1],e.to[1][1]-l[1],e.to[2][1]-l[1]],[1,1,1]],h=f["default"].solve(t,[e.from[3][0]-u[0],e.from[3][1]-u[1],1]),d=f["default"].solve(c,[e.to[3][0]-l[0],e.to[3][1]-l[1],1]);n=[[t[0][0]*h[0],t[0][1]*h[1],t[0][2]*h[2]],[t[1][0]*h[0],t[1][1]*h[1],t[1][2]*h[2]],[t[2][0]*h[0],t[2][1]*h[1],t[2][2]*h[2]]],i=[[c[0][0]*d[0],c[0][1]*d[1],c[0][2]*d[2]],[c[1][0]*d[0],c[1][1]*d[1],c[1][2]*d[2]],[c[2][0]*d[0],c[2][1]*d[1],c[2][2]*d[2]]],r=f["default"].inv(n),s=f["default"].inv(i),o=f["default"].dot(i,r),a=f["default"].dot(n,s)},h=function(){n=new Array(2),i=new Array(2),u=e.from.length>2?e.from.pop():new Array(2),l=e.to.length>2?e.to.pop():new Array(2);for(var t=0;t<e.from.length;t++)for(var c=0;2>c;c++)n[c]=n[c]||[],i[c]=i[c]||[],u[c]=u[c]||0,l[c]=l[c]||0,n[c][t]=e.from[t][c]-u[c],i[c][t]=e.to[t][c]-l[c];r=f["default"].inv(n),s=f["default"].inv(i),o=f["default"].dot(i,r),a=f["default"].dot(n,s)},d=function(){e.to.length!=e.from.length&&(e.to.length>e.from.length?e.to.length.splice(e.from.length):e.from.length.splice(e.to.length)),e.from.length<4?h():c()};return e.inverse=function(t){var n;return e.from.length<4?(n=f["default"].dot(a,[t[0]-l[0],t[1]-l[1]]),n=[n[0]+u[0],n[1]+u[1]]):(n=f["default"].dot(a,[t[0]-l[0],t[1]-l[1],1]),n=[n[0]/n[2]+u[0],n[1]/n[2]+u[1]]),n},e.transform=function(t){var n;return e.from.length<4?(n=f["default"].dot(o,[t[0]-u[0],t[1]-u[1]]),n=[n[0]+l[0],n[1]+l[1]]):(n=f["default"].dot(o,[t[0]-u[0],t[1]-u[1],1]),n=[n[0]/n[2]+l[0],n[1]/n[2]+l[1]]),n},d(),e};e.exports=p}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/lib/projective.js","/js/lib")},{_process:53,buffer:17,numeric:51}],12:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var m=t("leaflet"),g=h(m),_=function(t){function e(n){d(this,e);var i=f(this,t.call(this,n));return i._locator_marker=g["default"].circleMarker(null,n.marker_style),i._accuracy_marker=g["default"].circle(null,null,n.accuracy_marker_style),i}return p(e,t),e.prototype.onAdd=function(t){var e=this;this._map=t;var n=g["default"].DomUtil.create("div","leaflet-bar leaflet-control");return this._button=g["default"].DomUtil.create("a","my-location-btn disabled",n),this._button.href="#",this._button.alt="Enable geolocation",this._button.setAttribute("aria-label","Enable geolocation"),this._button.disabled=!0,g["default"].DomEvent.addListener(this._button,"click",function(t){g["default"].DomEvent.preventDefault(t),e._latLng&&e._map.setView(e._latLng,17)}),this._icon=g["default"].DomUtil.create("i","icon-circle",this._button),t.on("locationfound",this._locationFound.bind(this)),t.on("locationerror",this._locationError.bind(this)),t.locate({watch:!0,timeout:1e4,enableHighAccuracy:!0}),n},e.prototype.onRemove=function(t){this._map.off("locationfound",this._locationFound.bind(this)),this._map.off("locationerror",this._locationError.bind(this)),this._map=null},e.prototype._locationFound=function(t){return t.accuracy>300?void this._locationError({msg:"Location is not accurate enough."}):(this._latLng=t.latlng,g["default"].DomUtil.removeClass(this._button,"disabled"),this._locator_marker.setLatLng(t.latlng),this._locator_marker.addTo(this._map),this._accuracy_marker.setLatLng(t.latlng),this._accuracy_marker.setRadius(t.accuracy),void this._accuracy_marker.addTo(this._map))},e.prototype._locationError=function(t){this._latLng=null,g["default"].DomUtil.addClass(this._button,"disabled"),this._map.removeLayer(this._locator_marker),this._map.removeLayer(this._accuracy_marker)},e}(g["default"].Control);n["default"]=_}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/locator.js","/js")},{_process:53,buffer:17,leaflet:48}],13:[function(t,e,n){(function(e,n,i,o,r,s,a,u,l){"use strict";function c(t){return t&&t.__esModule?t:{"default":t}}var h=t("leaflet"),d=c(h),f=t("./campusmap"),p=c(f),m=t("./config"),g=c(m),_=t("./uri"),y=c(_),v=t("urijs"),b=c(v),w=angular.module("portalApp");w.controller("campusMapCtrl",["$scope","$timeout","directionsService",function(t,e,n){window.directionsService=n;var i=null;t.$on("viewClosed",function(){1==t.activeColumn&&i&&(i(),i=null)}),g["default"].present=function(n,o){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];i=r,t.$apply(function(){function i(e){if(window.requestAnimationFrame){var n;!function(){n=null;var i=function o(){t.campusMap.value.map.invalidateSize(),n=requestAnimationFrame(o)};n=requestAnimationFrame(i),setTimeout(function(){cancelAnimationFrame(n)},e)}()}else setTimeout(function(){t.campusMap.value.map.invalidateSize()},e)}t.portalHelpers.showView("campusMapPresent.html",2),t.presentTitle=n,e(function(){var t=$('<div id="campusMapPresent" />');$(o).appendTo(t),$("#campusMapPresent").replaceWith(t)},100),i(1500),$(".widgetCloseButton").click(function(){i(1100)})})},t.search={value:null},t.campusMap={value:null},t.buildings={value:null},t.uri={value:null},t.toggleLayer=function(e){t.campusMap.value.map.hasLayer(e)?t.campusMap.value.map.removeLayer(e):t.campusMap.value.map.addLayer(e)},t.$watch("campusMap.value",function(e,n){if(e){e.buildings.on("data",function(){t.buildings.value=[],Object.keys(e.buildings.buildings).forEach(function(n){var i=e.buildings.buildings[n],o=i.layer.getLatLng();0===o.lat&&0===o.lng||t.buildings.value.push(i.props)})});var i=new y["default"](e,new b["default"]("https://uwaterloo.ca/map/"));t.uri.value=i.uri.href(),i.on("urichanged",function(e){t.$$phase?t.uri.value=e.href():t.$apply(function(){return t.uri.value=e.href()})})}}),t.portalHelpers.showView("campusMap.html",1),t.$on("$destroy",function(){$(".leaflet-routing-geocoder-result").remove()})}]).directive("campusmap",["$timeout",function(t){function e(t,e,n){t.campusMap.value=new p["default"](g["default"],e[0]);var i=d["default"].control({position:"topright"});i.onAdd=function(e){var n=d["default"].DomUtil.create("div","leaflet-bar leaflet-control"),i=d["default"].DomUtil.create("a","",n);return i.href="#",i.innerHTML='<i class="icon-menu"></i>',d["default"].DomEvent.on(i,"click",function(e){function n(e){if(window.requestAnimationFrame){var n;!function(){n=null;var i=function o(){t.campusMap.value.map.invalidateSize(),n=requestAnimationFrame(o)};n=requestAnimationFrame(i),setTimeout(function(){cancelAnimationFrame(n)},e)}()}else setTimeout(function(){t.campusMap.value.map.invalidateSize()},e)}d["default"].DomEvent.stopPropagation(e),d["default"].DomEvent.preventDefault(e),t.$parent.$apply(function(){return t.$parent.portalHelpers.showView("campusMapSettings.html",2)}),n(1500),$(".widgetCloseButton").click(function(){n(1100)})}),n},i.addTo(t.campusMap.value.map);var o=d["default"].control.layers({Default:t.campusMap.value.tiles.D,"High Contrast":t.campusMap.value.tiles.H},[]);o.addTo(t.campusMap.value.map),setTimeout(function(){t.campusMap.value.map.invalidateSize()},500)}return{restrict:"E",scope:{campusMap:"=map"},link:e}}])}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/portal.js","/js")},{"./campusmap":1,"./config":2,"./uri":15,_process:53,buffer:17,leaflet:48,urijs:56}],14:[function(t,e,n){(function(t,e,i,o,r,s,a,u,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var c={uw_api_key:"17ecdf04d8bb17750e28e2307cd86e44",valhalla_api_key:"valhalla-toFWZ7k"};n["default"]=c}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/secrets.js","/js")},{_process:53,buffer:17}],15:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(t){return t&&t.__esModule?t:{"default":t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=t("urijs"),g=h(m),_=t("./campusmap"),y=(h(_),t("leaflet")),v=h(y),b=t("minivents"),w=h(b),L=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];d(this,t),(0,w["default"])(this),this._campusMap=e,n?this._uri=n:this._uri=new g["default"](window.location.href),this._processURI(),this.campusMap.on("tiles-changed",this._tilesChanged.bind(this)),this._tilesChanged(this.campusMap.activeTiles),this.campusMap.buildings.on("buildingselected",this._buildingSelected.bind(this)),this.campusMap.buildings.on("buildingdeselected",this._buildingDeselected.bind(this)),this.campusMap.buildings.on("floorselected",this._floorSelected.bind(this)),this.campusMap.buildings.on("roomselected",this._roomSelected.bind(this)),this.campusMap.buildings.on("roomdeselected",this._roomDeselected.bind(this)),this.campusMap.buildings.on("indoormapsend",this._indoorMapsEnd.bind(this)),this.campusMap.on("layer-added",this._layerShown.bind(this)),this.campusMap.on("layer-removed",this._layerRemoved.bind(this)),this.campusMap.map.on("moveend",this._moveEnd.bind(this)),this.campusMap.directions.plan.on("waypointschanged",this._waypointsChanged.bind(this)),this.campusMap.directions.plan.on("modechanged",this._modeChanged.bind(this))}return t.prototype._processURI=function(){var t=this,e=this.uri,n=e.search(!0);"basemap"in n&&(this.campusMap.activeTiles=n.basemap),"directions_mode"in n&&this.campusMap.directions.plan.switchMode(n.directions_mode);var i=this._getWaypointsFromURI(e);this.campusMap.directions.controller.setWaypoints(i);var o=e.filename(),r=o.match(/(.+)-([^-]+)?/i);if(this.campusMap.buildings.selectBuilding(r?r[1]:o,!1),r&&!function(){var e=function o(e){t.campusMap.buildings.showIndoorMaps(e),t.campusMap.buildings.off("buildingselected",o),setTimeout(function(){return t._floorSelected(e,{name:r[2]})},100)},i=function s(){t.campusMap.buildings.selectFloor(r[2]),t.campusMap.buildings.off("indoormapsstart",s),n.room&&t.campusMap.buildings.selectRoom(n.room)};t.campusMap.buildings.on("buildingselected",e),t.campusMap.buildings.on("indoormapsstart",i)}(),"buildings"in n){this.campusMap.buildings.selectBuilding(n.buildings,!1);var s=this.uri;s.removeSearch("buildings"),this.uri=s}var a=this._getLayersFromURI(e);a.forEach(function(e){return t.campusMap.layersById[e].addTo(t.campusMap.map)});var u=(0,g["default"])("?"+e.fragment().replace(/\//g,"%2F")),l=u.search(!0).map,c=u.search(!0).indoor;if(l){var h=l.split("/"),d=parseInt(h[0]),f=parseFloat(h[1]),p=parseFloat(h[2]);this.campusMap.map.setView(new v["default"].latLng(f,p),d)}r&&c&&!function(){var e=function n(e,i,o){if(i.name==r[2]){t.campusMap.buildings.off("floorselected",n);var s=c.split("/"),a=parseInt(s[0]),u=parseFloat(s[1]),l=parseFloat(s[2]);o.setView(new v["default"].latLng(u,l),a)}};t.campusMap.buildings.on("floorselected",e)}()},t.prototype._tilesChanged=function(t){var e=this.uri;e.setSearch("basemap",t.id),this.uri=e},t.prototype._buildingSelected=function(t){var e=this.uri;e.filename(t.building_code),this.uri=e},t.prototype._buildingDeselected=function(t){var e=this.uri;e.filename()===t.building_code&&(e.filename(""),this.uri=e)},t.prototype._getLayersFromURI=function(t){var e=t.search(!0);return"layer"in e?"object"===f(e.layer)?e.layer:[e.layer]:[]},t.prototype._getWaypointsFromURI=function(t){var e=t.search(!0);if(!("directions_waypoint"in e))return[];var n="string"==typeof e.directions_waypoint?[e.directions_waypoint]:e.directions_waypoint;return n=n.map(function(t){t=t.split(",");for(var e=3;e<t.length;++e)""!=t[2]&&(t[2]+=","),t[2]+=t[e];return{latLng:v["default"].latLng(parseFloat(t[0]),parseFloat(t[1])),
name:t[2]}})},t.prototype._layerShown=function(t){var e=this.uri,n=this._getLayersFromURI(e);-1===n.indexOf(t.id)&&n.push(t.id),e.setSearch("layer",n),this.uri=e},t.prototype._layerRemoved=function(t){var e=this.uri,n=this._getLayersFromURI(e);n=n.filter(function(e){return e!==t.id}),e.setSearch("layer",n),this.uri=e},t.prototype._moveEnd=function(){var t=this.uri,e=(0,g["default"])("?"+t.fragment().replace(/\//g,"%2F")),n=this.campusMap.map,i=n.getZoom(),o=n.getCenter().lat.toFixed(4),r=n.getCenter().lng.toFixed(4);e.setSearch("map",i+"/"+o+"/"+r),t.hash(e.query().replace(/%2F/g,"/")),this.uri=t},t.prototype._floorSelected=function(t,e,n){var i=this.uri;i.filename(t.building_code+"-"+e.name),this.uri=i,n&&(this._indoorMap=n,n.on("moveend",this._indoorMapMoveEnd.bind(this)),this._indoorMapMoveEnd())},t.prototype._indoorMapMoveEnd=function(){var t=this.uri,e=(0,g["default"])("?"+t.fragment().replace(/\//g,"%2F")),n=this._indoorMap;if(n){var i=n.getZoom(),o=n.getCenter().lat.toFixed(2),r=n.getCenter().lng.toFixed(2);e.setSearch("indoor",i+"/"+o+"/"+r)}else e.removeSearch("indoor");t.hash(e.query().replace(/%2F/g,"/")),this.uri=t},t.prototype._roomSelected=function(t,e,n){var i=this.uri;i.setSearch("room",n.name),this.uri=i},t.prototype._roomDeselected=function(t,e,n){var i=this.uri;i.removeSearch("room"),this.uri=i},t.prototype._indoorMapsEnd=function(t){this._indoorMap=null,this._indoorMapMoveEnd();var e=this.uri;e.filename(""+t.building_code),e.removeSearch("room"),this.uri=e},t.prototype._waypointsChanged=function(t){var e=this.uri,n=t.waypoints.filter(function(t){return t.latLng}).map(function(t){var e=t.latLng.lat.toFixed(4)+", "+t.latLng.lng.toFixed(4);return t.name&&(e=t.name),t.latLng.lat+","+t.latLng.lng+","+e});0!==n.count?e.setSearch("directions_waypoint",n):e.removeSearch("directions_waypoint"),this.uri=e},t.prototype._modeChanged=function(t){var e=this.uri;e.setSearch("directions_mode",t.mode),this.uri=e},p(t,[{key:"campusMap",get:function(){return this._campusMap}},{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t,this.emit("urichanged",t)}}]),t}();n["default"]=L}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/js/uri.js","/js")},{"./campusmap":1,_process:53,buffer:17,leaflet:48,minivents:50,urijs:56}],16:[function(t,e,n){(function(t,e,i,o,r,s,a,u,l){"use strict";function c(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;n>e;++e)m[e]=t[e],g[t.charCodeAt(e)]=e;g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63}function h(t){var e,n,i,o,r,s,a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");r="="===t[a-2]?2:"="===t[a-1]?1:0,s=new _(3*a/4-r),i=r>0?a-4:a;var u=0;for(e=0,n=0;i>e;e+=4,n+=3)o=g[t.charCodeAt(e)]<<18|g[t.charCodeAt(e+1)]<<12|g[t.charCodeAt(e+2)]<<6|g[t.charCodeAt(e+3)],s[u++]=o>>16&255,s[u++]=o>>8&255,s[u++]=255&o;return 2===r?(o=g[t.charCodeAt(e)]<<2|g[t.charCodeAt(e+1)]>>4,s[u++]=255&o):1===r&&(o=g[t.charCodeAt(e)]<<10|g[t.charCodeAt(e+1)]<<4|g[t.charCodeAt(e+2)]>>2,s[u++]=o>>8&255,s[u++]=255&o),s}function d(t){return m[t>>18&63]+m[t>>12&63]+m[t>>6&63]+m[63&t]}function f(t,e,n){for(var i,o=[],r=e;n>r;r+=3)i=(t[r]<<16)+(t[r+1]<<8)+t[r+2],o.push(d(i));return o.join("")}function p(t){for(var e,n=t.length,i=n%3,o="",r=[],s=16383,a=0,u=n-i;u>a;a+=s)r.push(f(t,a,a+s>u?u:a+s));return 1===i?(e=t[n-1],o+=m[e>>2],o+=m[e<<4&63],o+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],o+=m[e>>10],o+=m[e>>4&63],o+=m[e<<2&63],o+="="),r.push(o),r.join("")}n.toByteArray=h,n.fromByteArray=p;var m=[],g=[],_="undefined"!=typeof Uint8Array?Uint8Array:Array;c()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/base64-js/lib/b64.js","/node_modules/base64-js/lib")},{_process:53,buffer:17}],17:[function(t,e,n){(function(e,i,o,r,s,a,u,l,c){"use strict";function h(){try{var t=new Uint8Array(1);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function d(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(t,e){if(d()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return _(this,t)}return p(this,t,e,n)}function p(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?b(t,e,n,i):"string"==typeof e?y(t,e,n):w(t,e)}function m(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number')}function g(t,e,n,i){return m(e),0>=e?f(t,e):void 0!==n?"string"==typeof i?f(t,e).fill(n,i):f(t,e).fill(n):f(t,e)}function _(t,e){if(m(e),t=f(t,0>e?0:0|L(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;e>n;n++)t[n]=0;return t}function y(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|P(e,n);return t=f(t,i),t.write(e,n),t}function v(t,e){var n=0|L(e.length);t=f(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function b(t,e,n,i){if(e.byteLength,0>n||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=v(t,e),t}function w(t,e){if(o.isBuffer(e)){var n=0|L(e.length);return t=f(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||nt(e.length)?f(t,0):v(t,e);if("Buffer"===e.type&&rt(e.data))return v(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function L(t){if(t>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|t}function x(t){return+t!=t&&(t=0),o.alloc(+t)}function P(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":case void 0:return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return tt(t).length;default:if(i)return X(t).length;e=(""+e).toLowerCase(),i=!0}}function k(t,e,n){var i=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,e>>>=0,e>=n)return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return I(this,e,n);case"binary":return z(this,e,n);case"base64":return U(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function C(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function M(t,e,n,i){function o(t,e){return 1===r?t[e]:t.readUInt16BE(e*r)}var r=1,s=t.length,a=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;r=2,s/=2,a/=2,n/=2}for(var u=-1,l=0;s>n+l;l++)if(o(t,n+l)===o(e,-1===u?0:l-u)){if(-1===u&&(u=l),l-u+1===a)return(n+u)*r}else-1!==u&&(l-=l-u),u=-1;return-1}function T(t,e,n,i){n=Number(n)||0;var o=t.length-n;i?(i=Number(i),i>o&&(i=o)):i=o;var r=e.length;if(r%2!==0)throw new Error("Invalid hex string");i>r/2&&(i=r/2);for(var s=0;i>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function S(t,e,n,i){return et(X(e,t.length-n),t,n,i)}function E(t,e,n,i){return et($(e),t,n,i)}function D(t,e,n,i){return E(t,e,n,i)}function A(t,e,n,i){return et(tt(e),t,n,i)}function R(t,e,n,i){return et(K(e,t.length-n),t,n,i)}function U(t,e,n){return 0===e&&n===t.length?it.fromByteArray(t):it.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var i=[],o=e;n>o;){var r=t[o],s=null,a=r>239?4:r>223?3:r>191?2:1;if(n>=o+a){var u,l,c,h;switch(a){case 1:128>r&&(s=r);break;case 2:u=t[o+1],128===(192&u)&&(h=(31&r)<<6|63&u,h>127&&(s=h));break;case 3:u=t[o+1],l=t[o+2],128===(192&u)&&128===(192&l)&&(h=(15&r)<<12|(63&u)<<6|63&l,h>2047&&(55296>h||h>57343)&&(s=h));break;case 4:u=t[o+1],l=t[o+2],c=t[o+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(h=(15&r)<<18|(63&u)<<12|(63&l)<<6|63&c,h>65535&&1114112>h&&(s=h))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),o+=a}return B(i)}function B(t){var e=t.length;if(st>=e)return String.fromCharCode.apply(String,t);for(var n="",i=0;e>i;)n+=String.fromCharCode.apply(String,t.slice(i,i+=st));return n}function I(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)i+=String.fromCharCode(127&t[o]);return i}function z(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)i+=String.fromCharCode(t[o]);return i}function j(t,e,n){var i=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>i)&&(n=i);for(var o="",r=e;n>r;r++)o+=J(t[r]);return o}function N(t,e,n){for(var i=t.slice(e,n),o="",r=0;r<i.length;r+=2)o+=String.fromCharCode(i[r]+256*i[r+1]);return o}function F(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function W(t,e,n,i,r,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||s>e)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function Z(t,e,n,i){0>e&&(e=65535+e+1);for(var o=0,r=Math.min(t.length-n,2);r>o;o++)t[n+o]=(e&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function H(t,e,n,i){0>e&&(e=4294967295+e+1);for(var o=0,r=Math.min(t.length-n,4);r>o;o++)t[n+o]=e>>>8*(i?o:3-o)&255}function G(t,e,n,i,o,r){if(n+i>t.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function q(t,e,n,i,o){return o||G(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),ot.write(t,e,n,i,23,4),n+4}function V(t,e,n,i,o){return o||G(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),ot.write(t,e,n,i,52,8),n+8}function Q(t){if(t=Y(t).replace(at,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function J(t){return 16>t?"0"+t.toString(16):t.toString(16)}function X(t,e){e=e||1/0;for(var n,i=t.length,o=null,r=[],s=0;i>s;s++){if(n=t.charCodeAt(s),n>55295&&57344>n){if(!o){if(n>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&r.push(239,191,189);continue}o=n;continue}if(56320>n){(e-=3)>-1&&r.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&r.push(239,191,189);if(o=null,128>n){if((e-=1)<0)break;r.push(n)}else if(2048>n){if((e-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function $(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function K(t,e){for(var n,i,o,r=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),i=n>>8,o=n%256,r.push(o),r.push(i);return r}function tt(t){return it.toByteArray(Q(t))}function et(t,e,n,i){for(var o=0;i>o&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}function nt(t){return t!==t}var it=t("base64-js"),ot=t("ieee754"),rt=t("isarray");n.Buffer=o,n.SlowBuffer=x,n.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:h(),n.kMaxLength=d(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,n){return p(null,t,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,n){return g(null,t,e,n)},o.allocUnsafe=function(t){return _(null,t)},o.allocUnsafeSlow=function(t){return _(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,s=Math.min(n,i);s>r;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return i>n?-1:n>i?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!rt(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var i=o.allocUnsafe(e),r=0;for(n=0;n<t.length;n++){var s=t[n];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},o.byteLength=P,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;t>e;e+=2)C(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;t>e;e+=4)C(this,e,e+3),C(this,e+1,e+2);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):k.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,i,r){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),0>e||n>t.length||0>i||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var s=r-i,a=n-e,u=Math.min(s,a),l=this.slice(i,r),c=t.slice(e,n),h=0;u>h;++h)if(l[h]!==c[h]){s=l[h],a=c[h];break}return a>s?-1:s>a?1:0},o.prototype.indexOf=function(t,e,n){if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:M(this,t,e,n);if("number"==typeof t)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):M(this,[t],e,n);throw new TypeError("val must be string, number or Buffer")},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return T(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":return E(this,t,e,n);case"binary":return D(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var st=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t);var i;if(o.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=o.prototype;else{var r=e-t;i=new o(r,void 0);for(var s=0;r>s;s++)i[s]=this[s+t]}return i},o.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||F(t,e,this.length);for(var i=this[t],o=1,r=0;++r<e&&(o*=256);)i+=this[t+r]*o;return i},o.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||F(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i},o.prototype.readUInt8=function(t,e){return e||F(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||F(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||F(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||F(t,e,this.length);for(var i=this[t],o=1,r=0;++r<e&&(o*=256);)i+=this[t+r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},o.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||F(t,e,this.length);for(var i=e,o=1,r=this[t+--i];i>0&&(o*=256);)r+=this[t+--i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},o.prototype.readInt8=function(t,e){return e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||F(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||F(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||F(t,4,this.length),ot.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||F(t,4,this.length),ot.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||F(t,8,this.length),ot.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||F(t,8,this.length),ot.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var o=Math.pow(2,8*n)-1;W(this,t,e,n,o,0)}var r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var o=Math.pow(2,8*n)-1;W(this,t,e,n,o,0)}var r=n-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||W(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||W(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Z(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||W(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Z(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||W(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):H(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||W(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var o=Math.pow(2,8*n-1);W(this,t,e,n,o-1,-o)}var r=0,s=1,a=0;for(this[e]=255&t;++r<n&&(s*=256);)0>t&&0===a&&0!==this[e+r-1]&&(a=1),this[e+r]=(t/s>>0)-a&255;return e+n},o.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var o=Math.pow(2,8*n-1);W(this,t,e,n,o-1,-o)}var r=n-1,s=1,a=0;for(this[e+r]=255&t;--r>=0&&(s*=256);)0>t&&0===a&&0!==this[e+r+1]&&(a=1),this[e+r]=(t/s>>0)-a&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||W(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||W(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Z(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||W(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Z(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||W(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):H(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||W(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return q(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return q(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return V(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return V(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,s=i-n;if(this===t&&e>n&&i>e)for(r=s-1;r>=0;r--)t[r+e]=this[r+n];else if(1e3>s||!o.TYPED_ARRAY_SUPPORT)for(r=0;s>r;r++)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},o.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);256>r&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t=255&t);if(0>e||this.length<e||this.length<n)throw new RangeError("Out of range index");if(e>=n)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;n>s;s++)this[s]=t;else{var a=o.isBuffer(t)?t:X(new o(t,i).toString()),u=a.length;for(s=0;n-e>s;s++)this[s+e]=a[s%u]}return this};var at=/[^+\/0-9A-Za-z-_]/g}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/buffer/index.js","/node_modules/buffer")},{_process:53,"base64-js":16,buffer:17,ieee754:20,isarray:21}],18:[function(t,e,n){(function(t,n,i,o,r,s,a,u,l){function c(t,e,n){function i(t){return t>=200&&300>t||304===t}function o(){void 0===a.status||i(a.status)?e.call(a,null,a):e.call(a,a,null)}var r=!1;if("undefined"==typeof window.XMLHttpRequest)return e(Error("Browser not supported"));if("undefined"==typeof n){var s=t.match(/^\s*https?:\/\/[^\/]*/);n=s&&s[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var a=new window.XMLHttpRequest;if(n&&!("withCredentials"in a)){a=new window.XDomainRequest;var u=e;e=function(){if(r)u.apply(this,arguments);else{var t=this,e=arguments;setTimeout(function(){u.apply(t,e)},0)}}}return"onload"in a?a.onload=o:a.onreadystatechange=function(){4===a.readyState&&o()},a.onerror=function(t){e.call(this,t||!0,null),e=function(){}},a.onprogress=function(){},a.ontimeout=function(t){e.call(this,t,null),e=function(){}},a.onabort=function(t){e.call(this,t,null),e=function(){}},a.open("GET",t,!0),a.send(null),r=!0,a}"undefined"!=typeof e&&(e.exports=c)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/corslite/corslite.js","/node_modules/corslite")},{_process:53,buffer:17}],19:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){(function(){"use strict";function o(t){return"function"==typeof t||"object"==typeof t&&null!==t}function r(t){return"function"==typeof t}function s(t){Q=t}function a(t){$=t}function u(){return function(){n.nextTick(f)}}function l(){return function(){V(f)}}function c(){var t=0,e=new et(f),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function h(){var t=new MessageChannel;return t.port1.onmessage=f,function(){t.port2.postMessage(0)}}function d(){return function(){setTimeout(f,1)}}function f(){for(var t=0;X>t;t+=2){var e=ot[t],n=ot[t+1];e(n),ot[t]=void 0,ot[t+1]=void 0}X=0}function p(){try{var e=t,n=e("vertx");return V=n.runOnLoop||n.runOnContext,l()}catch(i){return d()}}function m(t,e){var n=this,i=new this.constructor(_);void 0===i[at]&&B(i);var o=n._state;if(o){var r=arguments[o-1];$(function(){R(o,i,r,n._result)})}else S(n,i,t,e);return i}function g(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(_);return k(n,t),n}function _(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function b(t){try{return t.then}catch(e){return ht.error=e,ht}}function w(t,e,n,i){try{t.call(e,n,i)}catch(o){return o}}function L(t,e,n){$(function(t){var i=!1,o=w(n,e,function(n){i||(i=!0,e!==n?k(t,n):M(t,n))},function(e){i||(i=!0,T(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&o&&(i=!0,T(t,o))},t)}function x(t,e){e._state===lt?M(t,e._result):e._state===ct?T(t,e._result):S(e,void 0,function(e){k(t,e)},function(e){T(t,e)})}function P(t,e,n){e.constructor===t.constructor&&n===rt&&constructor.resolve===st?x(t,e):n===ht?T(t,ht.error):void 0===n?M(t,e):r(n)?L(t,e,n):M(t,e)}function k(t,e){t===e?T(t,y()):o(e)?P(t,e,b(e)):M(t,e)}function C(t){t._onerror&&t._onerror(t._result),E(t)}function M(t,e){t._state===ut&&(t._result=e,t._state=lt,0!==t._subscribers.length&&$(E,t))}function T(t,e){t._state===ut&&(t._state=ct,t._result=e,$(C,t))}function S(t,e,n,i){var o=t._subscribers,r=o.length;t._onerror=null,o[r]=e,o[r+lt]=n,o[r+ct]=i,0===r&&t._state&&$(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,o,r=t._result,s=0;s<e.length;s+=3)i=e[s],o=e[s+n],i?R(n,i,o,r):o(r);t._subscribers.length=0}}function D(){this.error=null}function A(t,e){try{return t(e)}catch(n){return dt.error=n,dt}}function R(t,e,n,i){var o,s,a,u,l=r(n);if(l){if(o=A(n,i),o===dt?(u=!0,s=o.error,o=null):a=!0,e===o)return void T(e,v())}else o=i,a=!0;e._state!==ut||(l&&a?k(e,o):u?T(e,s):t===lt?M(e,o):t===ct&&T(e,o))}function U(t,e){try{e(function(e){k(t,e)},function(e){T(t,e)})}catch(n){T(t,n)}}function O(){return ft++}function B(t){t[at]=ft++,t._state=void 0,t._result=void 0,t._subscribers=[]}function I(t){return new yt(this,t).promise}function z(t){var e=this;return new e(J(t)?function(n,i){for(var o=t.length,r=0;o>r;r++)e.resolve(t[r]).then(n,i)}:function(t,e){e(new TypeError("You must pass an array to race."))})}function j(t){var e=this,n=new e(_);return T(n,t),n}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function W(t){this[at]=O(),this._result=this._state=void 0,this._subscribers=[],_!==t&&("function"!=typeof t&&N(),this instanceof W?U(this,t):F())}function Z(t,e){this._instanceConstructor=t,this.promise=new t(_),this.promise[at]||B(this.promise),J(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&M(this.promise,this._result))):T(this.promise,H())}function H(){return new Error("Array Methods must be provided an Array")}function G(){var t;if("undefined"!=typeof i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=_t)}var q;q=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var V,Q,Y,J=q,X=0,$=function(t,e){ot[X]=t,ot[X+1]=e,X+=2,2===X&&(Q?Q(f):Y())},K="undefined"!=typeof window?window:void 0,tt=K||{},et=tt.MutationObserver||tt.WebKitMutationObserver,nt="undefined"==typeof self&&"undefined"!=typeof n&&"[object process]"==={}.toString.call(n),it="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ot=new Array(1e3);Y=nt?u():et?c():it?h():void 0===K&&"function"==typeof t?p():d();var rt=m,st=g,at=Math.random().toString(36).substring(16),ut=void 0,lt=1,ct=2,ht=new D,dt=new D,ft=0,pt=I,mt=z,gt=j,_t=W;W.all=pt,W.race=mt,W.resolve=st,W.reject=gt,W._setScheduler=s,W._setAsap=a,W._asap=$,W.prototype={constructor:W,then:rt,"catch":function(t){return this.then(null,t)}};var yt=Z;Z.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ut&&t>n;n++)this._eachEntry(e[n],n)},Z.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===st){var o=b(t);if(o===rt&&t._state!==ut)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===_t){var r=new n(_);P(r,t,o),this._willSettleAt(r,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(i(t),e)},Z.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===ut&&(this._remaining--,t===ct?T(i,n):this._result[e]=n),0===this._remaining&&M(i,this._result)},Z.prototype._willSettleAt=function(t,e){var n=this;S(t,void 0,function(t){n._settledAt(lt,e,t)},function(t){n._settledAt(ct,e,t)})};var vt=G,bt={Promise:_t,polyfill:vt};"function"==typeof define&&define.amd?define(function(){return bt}):"undefined"!=typeof e&&e.exports?e.exports=bt:"undefined"!=typeof this&&(this.ES6Promise=bt),vt()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/es6-promise/dist/es6-promise.js","/node_modules/es6-promise/dist")},{_process:53,buffer:17}],20:[function(t,e,n){(function(t,e,i,o,r,s,a,u,l){n.read=function(t,e,n,i,o){var r,s,a=8*o-i-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?o-1:0,d=n?-1:1,f=t[e+h];for(h+=d,r=f&(1<<-c)-1,f>>=-c,c+=a;c>0;r=256*r+t[e+h],h+=d,c-=8);for(s=r&(1<<-c)-1,r>>=-c,c+=i;c>0;s=256*s+t[e+h],h+=d,c-=8);if(0===r)r=1-l;else{if(r===u)return s?NaN:(f?-1:1)*(1/0);s+=Math.pow(2,i),r-=l}return(f?-1:1)*s*Math.pow(2,r-i)},n.write=function(t,e,n,i,o,r){var s,a,u,l=8*r-o-1,c=(1<<l)-1,h=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:r-1,p=i?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),
e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?d/u:d*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[n+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+f]=255&s,f+=p,s/=256,l-=8);t[n+f-p]|=128*m}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{_process:53,buffer:17}],21:[function(t,e,n){(function(t,n,i,o,r,s,a,u,l){var c={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==c.call(t)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/isarray/index.js","/node_modules/isarray")},{_process:53,buffer:17}],22:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("./geocoders/nominatim")["class"];e.exports={"class":h.Control.extend({options:{showResultIcons:!1,collapsed:!0,expand:"click",position:"topright",placeholder:"Search...",errorMessage:"Nothing found."},_callbackId:0,initialize:function(t){h.Util.setOptions(this,t),this.options.geocoder||(this.options.geocoder=new d)},onAdd:function(t){var e,n="leaflet-control-geocoder",i=h.DomUtil.create("div",n+" leaflet-bar"),o=h.DomUtil.create("a","leaflet-control-geocoder-icon",i),r=this._form=h.DomUtil.create("form",n+"-form",i);return o.innerHTML="&nbsp;",o.href="javascript:void(0);",this._map=t,this._container=i,e=this._input=h.DomUtil.create("input"),e.type="text",e.placeholder=this.options.placeholder,h.DomEvent.addListener(e,"keydown",this._keydown,this),this._errorElement=document.createElement("div"),this._errorElement.className=n+"-form-no-error",this._errorElement.innerHTML=this.options.errorMessage,this._alts=h.DomUtil.create("ul",n+"-alternatives leaflet-control-geocoder-alternatives-minimized"),r.appendChild(e),this._container.appendChild(this._errorElement),i.appendChild(this._alts),h.DomEvent.addListener(r,"submit",this._geocode,this),this.options.collapsed?"click"===this.options.expand?h.DomEvent.addListener(o,"click",function(t){0===t.button&&2!==t.detail&&this._toggle()},this):(h.DomEvent.addListener(o,"mouseover",this._expand,this),h.DomEvent.addListener(o,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(h.DomEvent.addListener(o,"click",function(t){this._geocode(t)},this),this._expand()),h.DomEvent.disableClickPropagation(i),i},_geocodeResult:function(t){if(h.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber"),1===t.length)this._geocodeResultSelected(t[0]);else if(t.length>0){this._alts.innerHTML="",this._results=t,h.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");for(var e=0;e<t.length;e++)this._alts.appendChild(this._createAlt(t[e],e))}else h.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")},markGeocode:function(t){return this._map.fitBounds(t.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new h.Marker(t.center).bindPopup(t.html||t.name).addTo(this._map).openPopup(),this},_geocode:function(t){return h.DomEvent.preventDefault(t),h.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber"),this._clearResults(),this.options.geocoder.geocode(this._input.value,this._geocodeResult,this),!1},_geocodeResultSelected:function(t){this.options.collapsed?this._collapse():this._clearResults(),this.markGeocode(t)},_toggle:function(){this._container.className.indexOf("leaflet-control-geocoder-expanded")>=0?this._collapse():this._expand()},_expand:function(){h.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select()},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-geocoder-expanded",""),h.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),h.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_clearResults:function(){h.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,h.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_createAlt:function(t,e){var n=h.DomUtil.create("li",""),i=h.DomUtil.create("a","",n),o=this.options.showResultIcons&&t.icon?h.DomUtil.create("img","",i):null,r=t.html?void 0:document.createTextNode(t.name),s=function(e){h.DomEvent.preventDefault(e),this._geocodeResultSelected(t)};return o&&(o.src=t.icon),n.setAttribute("data-result-index",e),t.html?i.innerHTML=i.innerHTML+t.html:i.appendChild(r),h.DomEvent.addListener(n,"click",s,this),n},_keydown:function(t){var e=this,n=function(t){e._selection&&(h.DomUtil.removeClass(e._selection,"leaflet-control-geocoder-selected"),e._selection=e._selection[t>0?"nextSibling":"previousSibling"]),e._selection||(e._selection=e._alts[t>0?"firstChild":"lastChild"]),e._selection&&h.DomUtil.addClass(e._selection,"leaflet-control-geocoder-selected")};switch(t.keyCode){case 27:this.options.collapsed&&this._collapse();break;case 38:n(-1),h.DomEvent.preventDefault(t);break;case 40:n(1),h.DomEvent.preventDefault(t);break;case 13:if(this._selection){var i=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[i]),this._clearResults(),h.DomEvent.preventDefault(t)}}return!0}}),factory:function(t){return new h.Control.Geocoder(t)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/control.js","/node_modules/leaflet-control-geocoder/src")},{"./geocoders/nominatim":30,_process:53,buffer:17,leaflet:48}],23:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("../util");e.exports={"class":h.Class.extend({options:{service_url:"http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"},initialize:function(t,e){h.setOptions(this,e),this._accessToken=t},geocode:function(t,e,n){var i={SingleLine:t,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"};this._key&&this._key.length&&(i.token=this._key),d.getJSON(this.options.service_url+"/findAddressCandidates",i,function(t){var i,o,r,s=[];if(t.candidates&&t.candidates.length)for(var a=0;a<=t.candidates.length-1;a++)i=t.candidates[a],o=h.latLng(i.location.y,i.location.x),r=h.latLngBounds(h.latLng(i.extent.ymax,i.extent.xmax),h.latLng(i.extent.ymin,i.extent.xmin)),s[a]={name:i.address,bbox:r,center:o};e.call(n,s)})},suggest:function(t,e,n){return this.geocode(t,e,n)},reverse:function(t,e,n,i){var o={location:encodeURIComponent(t.lng)+","+encodeURIComponent(t.lat),distance:100,f:"json"};d.getJSON(this.options.service_url+"/reverseGeocode",o,function(t){var e,o=[];t&&!t.error&&(e=h.latLng(t.location.y,t.location.x),o.push({name:t.address.Match_addr,center:e,bounds:h.latLngBounds(e,e)})),n.call(i,o)})}}),factory:function(t,e){return new h.Control.Geocoder.ArcGis(t,e)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/geocoders/arcgis.js","/node_modules/leaflet-control-geocoder/src/geocoders")},{"../util":34,_process:53,buffer:17,leaflet:48}],24:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("../util");e.exports={"class":h.Class.extend({initialize:function(t){this.key=t},geocode:function(t,e,n){d.jsonp("//dev.virtualearth.net/REST/v1/Locations",{query:t,key:this.key},function(t){var i=[];if(t.resourceSets.length>0)for(var o=t.resourceSets[0].resources.length-1;o>=0;o--){var r=t.resourceSets[0].resources[o],s=r.bbox;i[o]={name:r.name,bbox:h.latLngBounds([s[0],s[1]],[s[2],s[3]]),center:h.latLng(r.point.coordinates)}}e.call(n,i)},this,"jsonp")},reverse:function(t,e,n,i){d.jsonp("//dev.virtualearth.net/REST/v1/Locations/"+t.lat+","+t.lng,{key:this.key},function(t){for(var e=[],o=t.resourceSets[0].resources.length-1;o>=0;o--){var r=t.resourceSets[0].resources[o],s=r.bbox;e[o]={name:r.name,bbox:h.latLngBounds([s[0],s[1]],[s[2],s[3]]),center:h.latLng(r.point.coordinates)}}n.call(i,e)},this,"jsonp")}}),factory:function(t){return new h.Control.Geocoder.Bing(t)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/geocoders/bing.js","/node_modules/leaflet-control-geocoder/src/geocoders")},{"../util":34,_process:53,buffer:17,leaflet:48}],25:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("../util");e.exports={"class":h.Class.extend({options:{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t,e){this._key=t,h.setOptions(this,e),this.options.serviceUrl=this.options.service_url||this.options.serviceUrl},geocode:function(t,e,n){var i={address:t};this._key&&this._key.length&&(i.key=this._key),i=h.Util.extend(i,this.options.geocodingQueryParams),d.getJSON(this.options.serviceUrl,i,function(t){var i,o,r,s=[];if(t.results&&t.results.length)for(var a=0;a<=t.results.length-1;a++)i=t.results[a],o=h.latLng(i.geometry.location),r=h.latLngBounds(h.latLng(i.geometry.viewport.northeast),h.latLng(i.geometry.viewport.southwest)),s[a]={name:i.formatted_address,bbox:r,center:o,properties:i.address_components};e.call(n,s)})},reverse:function(t,e,n,i){var o={latlng:encodeURIComponent(t.lat)+","+encodeURIComponent(t.lng)};o=h.Util.extend(o,this.options.reverseQueryParams),this._key&&this._key.length&&(o.key=this._key),d.getJSON(this.options.serviceUrl,o,function(t){var e,o,r,s=[];if(t.results&&t.results.length)for(var a=0;a<=t.results.length-1;a++)e=t.results[a],o=h.latLng(e.geometry.location),r=h.latLngBounds(h.latLng(e.geometry.viewport.northeast),h.latLng(e.geometry.viewport.southwest)),s[a]={name:e.formatted_address,bbox:r,center:o,properties:e.address_components};n.call(i,s)})}}),factory:function(t,e){return new h.Control.Geocoder.Google(t,e)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/geocoders/google.js","/node_modules/leaflet-control-geocoder/src/geocoders")},{"../util":34,_process:53,buffer:17,leaflet:48}],26:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("../util");e.exports={"class":h.Class.extend({options:{geocodeUrl:"http://geocoder.api.here.com/6.2/geocode.json",reverseGeocodeUrl:"http://reverse.geocoder.api.here.com/6.2/reversegeocode.json",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t){h.setOptions(this,t)},geocode:function(t,e,n){var i={searchtext:t,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1};i=h.Util.extend(i,this.options.geocodingQueryParams),this.getJSON(this.options.geocodeUrl,i,e,n)},reverse:function(t,e,n,i){var o={prox:encodeURIComponent(t.lat)+","+encodeURIComponent(t.lng),mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1};o=h.Util.extend(o,this.options.reverseQueryParams),this.getJSON(this.options.reverseGeocodeUrl,o,n,i)},getJSON:function(t,e,n,i){d.getJSON(t,e,function(t){var e,o,r,s=[];if(t.response.view&&t.response.view.length)for(var a=0;a<=t.response.view[0].result.length-1;a++)e=t.response.view[0].result[a].location,o=h.latLng(e.displayPosition.latitude,e.displayPosition.longitude),r=h.latLngBounds(h.latLng(e.mapView.topLeft.latitude,e.mapView.topLeft.longitude),h.latLng(e.mapView.bottomRight.latitude,e.mapView.bottomRight.longitude)),s[a]={name:e.address.label,bbox:r,center:o};n.call(i,s)})}}),factory:function(t){return new h.Control.Geocoder.HERE(t)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/geocoders/here.js","/node_modules/leaflet-control-geocoder/src/geocoders")},{"../util":34,_process:53,buffer:17,leaflet:48}],27:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("../util");e.exports={"class":h.Class.extend({options:{serviceUrl:"https://api.tiles.mapbox.com/v4/geocode/mapbox.places-v1/"},initialize:function(t,e){h.setOptions(this,e),this._accessToken=t},geocode:function(t,e,n){d.getJSON(this.options.serviceUrl+encodeURIComponent(t)+".json",{access_token:this._accessToken},function(t){var i,o,r,s=[];if(t.features&&t.features.length)for(var a=0;a<=t.features.length-1;a++)i=t.features[a],o=h.latLng(i.center.reverse()),r=i.hasOwnProperty("bbox")?h.latLngBounds(h.latLng(i.bbox.slice(0,2).reverse()),h.latLng(i.bbox.slice(2,4).reverse())):h.latLngBounds(o,o),s[a]={name:i.place_name,bbox:r,center:o};e.call(n,s)})},suggest:function(t,e,n){return this.geocode(t,e,n)},reverse:function(t,e,n,i){d.getJSON(this.options.serviceUrl+encodeURIComponent(t.lng)+","+encodeURIComponent(t.lat)+".json",{access_token:this._accessToken},function(t){var e,o,r,s=[];if(t.features&&t.features.length)for(var a=0;a<=t.features.length-1;a++)e=t.features[a],o=h.latLng(e.center.reverse()),r=e.hasOwnProperty("bbox")?h.latLngBounds(h.latLng(e.bbox.slice(0,2).reverse()),h.latLng(e.bbox.slice(2,4).reverse())):h.latLngBounds(o,o),s[a]={name:e.place_name,bbox:r,center:o};n.call(i,s)})}}),factory:function(t,e){return new h.Control.Geocoder.Mapbox(t,e)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/geocoders/mapbox.js","/node_modules/leaflet-control-geocoder/src/geocoders")},{"../util":34,_process:53,buffer:17,leaflet:48}],28:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("../util");e.exports={"class":h.Class.extend({options:{serviceUrl:"//www.mapquestapi.com/geocoding/v1"},initialize:function(t,e){this._key=decodeURIComponent(t),h.Util.setOptions(this,e)},_formatName:function(){var t,e=[];for(t=0;t<arguments.length;t++)arguments[t]&&e.push(arguments[t]);return e.join(", ")},geocode:function(t,e,n){d.jsonp(this.options.serviceUrl+"/address",{key:this._key,location:t,limit:5,outFormat:"json"},function(t){var i,o,r=[];if(t.results&&t.results[0].locations)for(var s=t.results[0].locations.length-1;s>=0;s--)i=t.results[0].locations[s],o=h.latLng(i.latLng),r[s]={name:this._formatName(i.street,i.adminArea4,i.adminArea3,i.adminArea1),bbox:h.latLngBounds(o,o),center:o};e.call(n,r)},this)},reverse:function(t,e,n,i){d.jsonp(this.options.serviceUrl+"/reverse",{key:this._key,location:t.lat+","+t.lng,outputFormat:"json"},function(t){var e,o,r=[];if(t.results&&t.results[0].locations)for(var s=t.results[0].locations.length-1;s>=0;s--)e=t.results[0].locations[s],o=h.latLng(e.latLng),r[s]={name:this._formatName(e.street,e.adminArea4,e.adminArea3,e.adminArea1),bbox:h.latLngBounds(o,o),center:o};n.call(i,r)},this)}}),factory:function(t,e){return new h.Control.Geocoder.MapQuest(t,e)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/geocoders/mapquest.js","/node_modules/leaflet-control-geocoder/src/geocoders")},{"../util":34,_process:53,buffer:17,leaflet:48}],29:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("../util");e.exports={"class":h.Class.extend({options:{serviceUrl:"//search.mapzen.com/v1",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t,e){h.Util.setOptions(this,e),this._apiKey=t,this._lastSuggest=0},geocode:function(t,e,n){var i=this;d.getJSON(this.options.serviceUrl+"/search",h.extend({api_key:this._apiKey,text:t},this.options.geocodingQueryParams),function(t){e.call(n,i._parseResults(t,"bbox"))})},suggest:function(t,e,n){var i=this;d.getJSON(this.options.serviceUrl+"/autocomplete",h.extend({api_key:this._apiKey,text:t},this.options.geocodingQueryParams),h.bind(function(t){t.geocoding.timestamp>this._lastSuggest&&(this._lastSuggest=t.geocoding.timestamp,e.call(n,i._parseResults(t,"bbox")))},this))},reverse:function(t,e,n,i){var o=this;d.getJSON(this.options.serviceUrl+"/reverse",h.extend({api_key:this._apiKey,"point.lat":t.lat,"point.lon":t.lng},this.options.reverseQueryParams),function(t){n.call(i,o._parseResults(t,"bounds"))})},_parseResults:function(t,e){var n=[];return h.geoJson(t,{pointToLayer:function(t,e){return h.circleMarker(e)},onEachFeature:function(t,i){var o={};o.name=i.feature.properties.label,o[e]=i.getBounds(),o.center=o[e].getCenter(),o.properties=i.feature.properties,n.push(o)}}),n}}),factory:function(t,e){return new h.Control.Geocoder.Mapzen(t,e)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/geocoders/mapzen.js","/node_modules/leaflet-control-geocoder/src/geocoders")},{"../util":34,_process:53,buffer:17,leaflet:48}],30:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("../util");e.exports={"class":h.Class.extend({options:{serviceUrl:"//nominatim.openstreetmap.org/",geocodingQueryParams:{},reverseQueryParams:{},htmlTemplate:function(t){var e=t.address,n=[];return(e.road||e.building)&&n.push("{building} {road} {house_number}"),(e.city||e.town||e.village||e.hamlet)&&n.push('<span class="'+(n.length>0?"leaflet-control-geocoder-address-detail":"")+'">{postcode} {city} {town} {village} {hamlet}</span>'),(e.state||e.country)&&n.push('<span class="'+(n.length>0?"leaflet-control-geocoder-address-context":"")+'">{state} {country}</span>'),d.template(n.join("<br/>"),e,!0)}},initialize:function(t){h.Util.setOptions(this,t)},geocode:function(t,e,n){d.jsonp(this.options.serviceUrl+"search",h.extend({q:t,limit:5,format:"json",addressdetails:1},this.options.geocodingQueryParams),function(t){for(var i=[],o=t.length-1;o>=0;o--){for(var r=t[o].boundingbox,s=0;4>s;s++)r[s]=parseFloat(r[s]);i[o]={icon:t[o].icon,name:t[o].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(t[o]):void 0,bbox:h.latLngBounds([r[0],r[2]],[r[1],r[3]]),center:h.latLng(t[o].lat,t[o].lon),properties:t[o]}}e.call(n,i)},this,"json_callback")},reverse:function(t,e,n,i){d.jsonp(this.options.serviceUrl+"reverse",h.extend({lat:t.lat,lon:t.lng,zoom:Math.round(Math.log(e/256)/Math.log(2)),addressdetails:1,format:"json"},this.options.reverseQueryParams),function(t){var e,o=[];t&&t.lat&&t.lon&&(e=h.latLng(t.lat,t.lon),o.push({name:t.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(t):void 0,center:e,bounds:h.latLngBounds(e,e),properties:t})),n.call(i,o)},this,"json_callback")}}),factory:function(t){return new h.Control.Geocoder.Nominatim(t)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/geocoders/nominatim.js","/node_modules/leaflet-control-geocoder/src/geocoders")},{"../util":34,_process:53,buffer:17,leaflet:48}],31:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("../util");e.exports={"class":h.Class.extend({options:{serviceUrl:"//photon.komoot.de/api/",reverseUrl:"//photon.komoot.de/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]},initialize:function(t){h.setOptions(this,t)},geocode:function(t,e,n){var i=h.extend({q:t},this.options.geocodingQueryParams);d.getJSON(this.options.serviceUrl,i,h.bind(function(t){e.call(n,this._decodeFeatures(t))},this))},suggest:function(t,e,n){return this.geocode(t,e,n)},reverse:function(t,e,n,i){var o=h.extend({lat:t.lat,lon:t.lng},this.options.geocodingQueryParams);d.getJSON(this.options.reverseUrl,o,h.bind(function(t){n.call(i,this._decodeFeatures(t))},this))},_decodeFeatures:function(t){var e,n,i,o,r,s,a=[];if(t&&t.features)for(e=0;e<t.features.length;e++)n=t.features[e],i=n.geometry.coordinates,o=h.latLng(i[1],i[0]),r=n.properties.extent,s=r?h.latLngBounds([r[1],r[0]],[r[3],r[2]]):h.latLngBounds(o,o),a.push({name:this._deocodeFeatureName(n),center:o,bbox:s,properties:n.properties});return a},_deocodeFeatureName:function(t){var e,n;for(e=0;!n&&e<this.options.nameProperties.length;e++)n=t.properties[this.options.nameProperties[e]];return n}}),factory:function(t){return new h.Control.Geocoder.Photon(t)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/geocoders/photon.js","/node_modules/leaflet-control-geocoder/src/geocoders")},{"../util":34,_process:53,buffer:17,leaflet:48}],32:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("../util");e.exports={"class":h.Class.extend({options:{serviceUrl:"http://api.what3words.com/"},initialize:function(t){this._accessToken=t},geocode:function(t,e,n){d.getJSON(this.options.serviceUrl+"w3w",{key:this._accessToken,string:t.split(/\s+/).join(".")},function(t){var i,o,r,s=[];t.position&&t.position.length&&(i=t.words,o=h.latLng(t.position[0],t.position[1]),r=h.latLngBounds(o,o),s[0]={name:i.join("."),bbox:r,center:o}),e.call(n,s)})},suggest:function(t,e,n){return this.geocode(t,e,n)},reverse:function(t,e,n,i){d.getJSON(this.options.serviceUrl+"position",{key:this._accessToken,position:[t.lat,t.lng].join(",")},function(t){var e,o,r,s=[];t.position&&t.position.length&&(e=t.words,o=h.latLng(t.position[0],t.position[1]),r=h.latLngBounds(o,o),s[0]={name:e.join("."),bbox:r,center:o}),n.call(i,s)})}}),factory:function(t){return new h.Control.Geocoder.What3Words(t)}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/geocoders/what3words.js","/node_modules/leaflet-control-geocoder/src/geocoders")},{"../util":34,_process:53,buffer:17,leaflet:48}],33:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=t("./control"),f=t("./geocoders/nominatim"),p=t("./geocoders/bing"),m=t("./geocoders/mapquest"),g=t("./geocoders/mapbox"),_=t("./geocoders/what3words"),y=t("./geocoders/google"),v=t("./geocoders/photon"),b=t("./geocoders/mapzen"),w=t("./geocoders/arcgis"),L=t("./geocoders/here");e.exports=h.Util.extend(d["class"],{Nominatim:f["class"],nominatim:f.factory,Bing:p["class"],bing:p.factory,MapQuest:m["class"],mapQuest:m.factory,Mapbox:g["class"],mapbox:g.factory,What3Words:_["class"],what3words:_.factory,Google:y["class"],google:y.factory,Photon:v["class"],photon:v.factory,Mapzen:b["class"],mapzen:b.factory,ArcGis:w["class"],arcgis:w.factory,HERE:L["class"],here:L.factory}),h.Util.extend(h.Control,{Geocoder:e.exports,geocoder:d.factory})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/index.js","/node_modules/leaflet-control-geocoder/src")},{"./control":22,"./geocoders/arcgis":23,"./geocoders/bing":24,"./geocoders/google":25,"./geocoders/here":26,"./geocoders/mapbox":27,"./geocoders/mapquest":28,"./geocoders/mapzen":29,"./geocoders/nominatim":30,"./geocoders/photon":31,"./geocoders/what3words":32,_process:53,buffer:17,leaflet:48}],34:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){var h=t("leaflet"),d=0,f=function(){function t(t){return i[t]}var e=/[&<>"'`]/g,n=/[&<>"'`]/,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return function(i){return null==i?"":i?(i=""+i,n.test(i)?i.replace(e,t):i):i+""}}();e.exports={jsonp:function(t,e,n,i,o){var r="_l_geocoder_"+d++;e[o||"callback"]=r,window[r]=h.Util.bind(n,i);var s=document.createElement("script");s.type="text/javascript",s.src=t+h.Util.getParamString(e),s.id=r,document.getElementsByTagName("head")[0].appendChild(s)},getJSON:function(t,e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){return 4===i.readyState?200!==i.status&&304!==i.status?void n(""):void n(JSON.parse(i.response)):void 0},i.open("GET",t+h.Util.getParamString(e),!0),i.setRequestHeader("Accept","application/json"),i.send(null)},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var i=e[n];return void 0===i?i="":"function"==typeof i&&(i=i(e)),f(i)})},htmlEscape:f}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-control-geocoder/src/util.js","/node_modules/leaflet-control-geocoder/src")},{_process:53,buffer:17,leaflet:48}],35:[function(t,e,n){(function(t,e,n,i,o,r,s,a,u){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.Autocomplete=L.Class.extend({options:{timeout:500,blurTimeout:100,noResultsMessage:"No results found."},initialize:function(t,e,n,i){L.setOptions(this,i),this._elem=t,this._resultFn=i.resultFn?L.Util.bind(i.resultFn,i.resultContext):null,this._autocomplete=i.autocompleteFn?L.Util.bind(i.autocompleteFn,i.autocompleteContext):null,this._selectFn=L.Util.bind(e,n),this._container=L.DomUtil.create("div","leaflet-routing-geocoder-result"),this._resultTable=L.DomUtil.create("table","",this._container),L.DomEvent.addListener(this._elem,"input",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keypress",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keydown",this._keyDown,this),L.DomEvent.addListener(this._elem,"blur",function(){this._isOpen&&this.close()},this)},close:function(){L.DomUtil.removeClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!1},_open:function(){var t=this._elem.getBoundingClientRect();this._container.parentElement||(this._container.style.left=t.left+window.scrollX+"px",this._container.style.top=t.bottom+window.scrollY+"px",this._container.style.width=t.right-t.left+"px",document.body.appendChild(this._container)),L.DomUtil.addClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!0},_setResults:function(t){var e,n,i,o;for(delete this._selection,this._results=t;this._resultTable.firstChild;)this._resultTable.removeChild(this._resultTable.firstChild);for(e=0;e<t.length;e++)n=L.DomUtil.create("tr","",this._resultTable),n.setAttribute("data-result-index",e),i=L.DomUtil.create("td","",n),o=document.createTextNode(t[e].name),i.appendChild(o),L.DomEvent.addListener(i,"mousedown",L.DomEvent.preventDefault),L.DomEvent.addListener(i,"click",this._createClickListener(t[e]));e||(n=L.DomUtil.create("tr","",this._resultTable),i=L.DomUtil.create("td","leaflet-routing-geocoder-no-results",n),i.innerHTML=this.options.noResultsMessage),this._open(),t.length>0&&this._select(1)},_createClickListener:function(t){var e=this._resultSelected(t);return L.bind(function(){this._elem.blur(),e()},this)},_resultSelected:function(t){return L.bind(function(){this.close(),this._elem.value=t.name,this._lastCompletedText=t.name,this._selectFn(t)},this)},_keyPressed:function(t){var e;return this._isOpen&&13===t.keyCode&&this._selection?(e=parseInt(this._selection.getAttribute("data-result-index"),10),this._resultSelected(this._results[e])(),void L.DomEvent.preventDefault(t)):13===t.keyCode?void this._complete(this._resultFn,!0):this._autocomplete&&document.activeElement===this._elem?(this._timer&&clearTimeout(this._timer),void(this._timer=setTimeout(L.Util.bind(function(){this._complete(this._autocomplete)},this),this.options.timeout))):void this._unselect()},_select:function(t){var e=this._selection;e&&(L.DomUtil.removeClass(e.firstChild,"leaflet-routing-geocoder-selected"),e=e[t>0?"nextSibling":"previousSibling"]),e||(e=this._resultTable[t>0?"firstChild":"lastChild"]),e&&(L.DomUtil.addClass(e.firstChild,"leaflet-routing-geocoder-selected"),this._selection=e)},_unselect:function(){this._selection&&L.DomUtil.removeClass(this._selection.firstChild,"leaflet-routing-geocoder-selected"),delete this._selection},_keyDown:function(t){if(this._isOpen)switch(t.keyCode){case 27:return this.close(),void L.DomEvent.preventDefault(t);case 38:return this._select(-1),void L.DomEvent.preventDefault(t);case 40:return this._select(1),void L.DomEvent.preventDefault(t)}},_complete:function(t,e){function n(t){this._lastCompletedText=i,e&&1===t.length?this._resultSelected(t[0])():this._setResults(t)}var i=this._elem.value;i&&(i!==this._lastCompletedText?t(i,n,this):e&&n.call(this,this._results))}})}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.Autocomplete.js","/node_modules/leaflet-routing-machine/src")},{_process:53,buffer:17}],36:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){!function(){"use strict";var n=t("leaflet");n.Routing=n.Routing||{},n.extend(n.Routing,t("./L.Routing.Itinerary")),n.extend(n.Routing,t("./L.Routing.Line")),n.extend(n.Routing,t("./L.Routing.Plan")),n.extend(n.Routing,t("./L.Routing.OSRMv1")),n.extend(n.Routing,t("./L.Routing.ErrorControl")),n.Routing.Control=n.Routing.Itinerary.extend({options:{fitSelectedRoutes:"smart",routeLine:function(t,e){return n.Routing.line(t,e)},autoRoute:!0,routeWhileDragging:!1,routeDragInterval:500,waypointMode:"connect",useZoomParameter:!1,showAlternatives:!1},initialize:function(t){n.Util.setOptions(this,t),this._router=this.options.router||new n.Routing.OSRMv1(t),this._plan=this.options.plan||n.Routing.plan(this.options.waypoints,t),this._requestCount=0,n.Routing.Itinerary.prototype.initialize.call(this,t),this.on("routeselected",this._routeSelected,this),this._plan.on("waypointschanged",this._onWaypointsChanged,this),t.routeWhileDragging&&this._setupRouteDragging(),this.options.autoRoute&&this.route()},onAdd:function(t){var e=n.Routing.Itinerary.prototype.onAdd.call(this,t);return this._map=t,this._map.addLayer(this._plan),this.options.useZoomParameter&&this._map.on("zoomend",function(){this.route({callback:n.bind(this._updateLineCallback,this)})},this),this._plan.options.geocoder&&e.insertBefore(this._plan.createGeocoders(),e.firstChild),e},onRemove:function(t){return this._line&&t.removeLayer(this._line),t.removeLayer(this._plan),n.Routing.Itinerary.prototype.onRemove.call(this,t)},getWaypoints:function(){return this._plan.getWaypoints()},setWaypoints:function(t){return this._plan.setWaypoints(t),this},spliceWaypoints:function(){var t=this._plan.spliceWaypoints.apply(this._plan,arguments);return t},getPlan:function(){return this._plan},getRouter:function(){return this._router},_routeSelected:function(t){var e=t.route,n=this.options.showAlternatives&&t.alternatives,i=this.options.fitSelectedRoutes,o="smart"===i&&!this._waypointsVisible()||"smart"!==i&&i;this._updateLines({route:e,alternatives:n}),o&&this._map.fitBounds(this._line.getBounds()),"snap"===this.options.waypointMode&&(this._plan.off("waypointschanged",this._onWaypointsChanged,this),
this.setWaypoints(e.waypoints),this._plan.on("waypointschanged",this._onWaypointsChanged,this))},_waypointsVisible:function(){var t,e,i,o,r,s=this.getWaypoints();try{for(t=this._map.getSize(),o=0;o<s.length;o++)r=this._map.latLngToLayerPoint(s[o].latLng),e?e.extend(r):e=n.bounds([r]);return i=e.getSize(),(i.x>t.x/5||i.y>t.y/5)&&this._waypointsInViewport()}catch(a){return!1}},_waypointsInViewport:function(){var t,e,n=this.getWaypoints();try{t=this._map.getBounds()}catch(i){return!1}for(e=0;e<n.length;e++)if(t.contains(n[e].latLng))return!0;return!1},_updateLines:function(t){var e=void 0!==this.options.addWaypoints?this.options.addWaypoints:!0;this._clearLines(),this._alternatives=[],t.alternatives&&t.alternatives.forEach(function(t,e){this._alternatives[e]=this.options.routeLine(t,n.extend({isAlternative:!0},this.options.altLineOptions||this.options.lineOptions)),this._alternatives[e].addTo(this._map),this._hookAltEvents(this._alternatives[e])},this),this._line=this.options.routeLine(t.route,n.extend({addWaypoints:e,extendToWaypoints:"connect"===this.options.waypointMode},this.options.lineOptions)),this._line.addTo(this._map),this._hookEvents(this._line)},_hookEvents:function(t){t.on("linetouched",function(t){this._plan.dragNewWaypoint(t)},this)},_hookAltEvents:function(t){t.on("linetouched",function(t){var e=this._routes.slice(),n=e.splice(t.target._route.routesIndex,1)[0];this.fire("routeselected",{route:n,alternatives:e})},this)},_onWaypointsChanged:function(t){this.options.autoRoute&&this.route({}),this._plan.isReady()||(this._clearLines(),this._clearAlts()),this.fire("waypointschanged",{waypoints:t.waypoints})},_setupRouteDragging:function(){var t,e=0;this._plan.on("waypointdrag",n.bind(function(i){t=i.waypoints,e||(e=setTimeout(n.bind(function(){this.route({waypoints:t,geometryOnly:!0,callback:n.bind(this._updateLineCallback,this)}),e=void 0},this),this.options.routeDragInterval))},this)),this._plan.on("waypointdragend",function(){e&&(clearTimeout(e),e=void 0),this.route()},this)},_updateLineCallback:function(t,e){t?this._clearLines():this._updateLines({route:e[0],alternatives:e.slice(1)})},route:function(t){var e,n=++this._requestCount;t=t||{},this._plan.isReady()&&(this.options.useZoomParameter&&(t.z=this._map&&this._map.getZoom()),e=t&&t.waypoints||this._plan.getWaypoints(),this.fire("routingstart",{waypoints:e}),this._router.route(e,t.callback||function(i,o){if(n===this._requestCount){if(this._clearLines(),this._clearAlts(),i)return void this.fire("routingerror",{error:i});if(o.forEach(function(t,e){t.routesIndex=e}),t.geometryOnly){var r=o.splice(0,1)[0];this._routeSelected({route:r,alternatives:o})}else this.fire("routesfound",{waypoints:e,routes:o}),this.setAlternatives(o)}},this,t))},_clearLines:function(){if(this._line&&(this._map.removeLayer(this._line),delete this._line),this._alternatives&&this._alternatives.length){for(var t in this._alternatives)this._map.removeLayer(this._alternatives[t]);this._alternatives=[]}}}),n.Routing.control=function(t){return new n.Routing.Control(t)},e.exports=n.Routing}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.Control.js","/node_modules/leaflet-routing-machine/src")},{"./L.Routing.ErrorControl":37,"./L.Routing.Itinerary":40,"./L.Routing.Line":42,"./L.Routing.OSRMv1":44,"./L.Routing.Plan":45,_process:53,buffer:17,leaflet:48}],37:[function(t,e,n){(function(t,e,n,i,o,r,s,a,u){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.ErrorControl=L.Control.extend({options:{header:"Routing error",formatMessage:function(t){return t.status<0?"Calculating the route caused an error. Technical description follows: <code><pre>"+t.message+"</pre></code":"The route could not be calculated. "+t.message}},initialize:function(t,e){L.Control.prototype.initialize.call(this,e),t.on("routingerror",L.bind(function(t){this._element&&(this._element.children[1].innerHTML=this.options.formatMessage(t.error),this._element.style.visibility="visible")},this)).on("routingstart",L.bind(function(){this._element&&(this._element.style.visibility="hidden")},this))},onAdd:function(){var t,e;return this._element=L.DomUtil.create("div","leaflet-bar leaflet-routing-error"),this._element.style.visibility="hidden",t=L.DomUtil.create("h3",null,this._element),e=L.DomUtil.create("span",null,this._element),t.innerHTML=this.options.header,this._element},onRemove:function(){delete this._element}}),L.Routing.errorControl=function(t,e){return new L.Routing.ErrorControl(t,e)}}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.ErrorControl.js","/node_modules/leaflet-routing-machine/src")},{_process:53,buffer:17}],38:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){!function(){"use strict";var n=t("leaflet");n.Routing=n.Routing||{},n.extend(n.Routing,t("./L.Routing.Localization")),n.Routing.Formatter=n.Class.extend({options:{units:"metric",unitNames:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"mín",seconds:"s"},language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(t){n.setOptions(this,t)},formatDistance:function(t,e){var i,o,r,s,a=this.options.unitNames,u=0>=e,l=u?function(t){return t}:n.bind(this._round,this);return"imperial"===this.options.units?(o=t/.9144,r=o>=1e3?{value:l(t/1609.344,e),unit:a.miles}:{value:l(o,e),unit:a.yards}):(i=l(t,e),r={value:i>=1e3?i/1e3:i,unit:i>=1e3?a.kilometers:a.meters}),u&&(s=Math.pow(10,-e),r.value=Math.round(r.value*s)/s),n.Util.template(this.options.distanceTemplate,r)},_round:function(t,e){var n=e||this.options.roundingSensitivity,i=Math.pow(10,(Math.floor(t/n)+"").length-1),o=Math.floor(t/i),r=o>5?i:i/2;return Math.round(t/r)*r},formatTime:function(t){return t>86400?Math.round(t/3600)+" h":t>3600?Math.floor(t/3600)+" h "+Math.round(t%3600/60)+" min":t>300?Math.round(t/60)+" min":t>60?Math.floor(t/60)+" min"+(t%60!==0?" "+t%60+" s":""):t+" s"},formatInstruction:function(t,e){return void 0===t.text?n.Util.template(this._getInstructionTemplate(t,e),n.extend({exitStr:t.exit?n.Routing.Localization[this.options.language].formatOrder(t.exit):"",dir:n.Routing.Localization[this.options.language].directions[t.direction]},t)):t.text},getIconName:function(t,e){switch(t.type){case"Straight":return 0===e?"depart":"continue";case"SlightRight":return"bear-right";case"Right":return"turn-right";case"SharpRight":return"sharp-right";case"TurnAround":return"u-turn";case"SharpLeft":return"sharp-left";case"Left":return"turn-left";case"SlightLeft":return"bear-left";case"WaypointReached":return"via";case"Roundabout":return"enter-roundabout";case"DestinationReached":return"arrive"}},_getInstructionTemplate:function(t,e){var i="Straight"===t.type?0===e?"Head":"Continue":t.type,o=n.Routing.Localization[this.options.language].instructions[i];return o[0]+(o.length>1&&t.road?o[1]:"")}}),e.exports=n.Routing}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.Formatter.js","/node_modules/leaflet-routing-machine/src")},{"./L.Routing.Localization":43,_process:53,buffer:17,leaflet:48}],39:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){!function(){"use strict";function n(t){t.setSelectionRange?t.setSelectionRange(0,9999):t.select()}var i=t("leaflet");i.Routing=i.Routing||{},i.extend(i.Routing,t("./L.Routing.Autocomplete")),i.Routing.GeocoderElement=i.Class.extend({includes:i.Mixin.Events,options:{createGeocoder:function(t,e,n){var o=i.DomUtil.create("div","leaflet-routing-geocoder"),r=i.DomUtil.create("input","",o),s=n.addWaypoints?i.DomUtil.create("span","leaflet-routing-remove-waypoint",o):void 0;return r.disabled=!n.addWaypoints,{container:o,input:r,closeButton:s}},geocoderPlaceholder:function(t,e,n){var o=i.Routing.Localization[n.options.language].ui;return 0===t?o.startPlaceholder:e-1>t?i.Util.template(o.viaPlaceholder,{viaNumber:t}):o.endPlaceholder},geocoderClass:function(){return""},waypointNameFallback:function(t){var e=t.lat<0?"S":"N",n=t.lng<0?"W":"E",i=(Math.round(1e4*Math.abs(t.lat))/1e4).toString(),o=(Math.round(1e4*Math.abs(t.lng))/1e4).toString();return e+i+", "+n+o},maxGeocoderTolerance:200,autocompleteOptions:{},language:"en"},initialize:function(t,e,o,r){i.setOptions(this,r);var s=this.options.createGeocoder(e,o,this.options),a=s.closeButton,u=s.input;u.setAttribute("placeholder",this.options.geocoderPlaceholder(e,o,this)),u.className=this.options.geocoderClass(e,o),this._element=s,this._waypoint=t,this.update(),u.value=t.name,i.DomEvent.addListener(u,"click",function(){n(this)},u),a&&i.DomEvent.addListener(a,"click",function(){this.fire("delete",{waypoint:this._waypoint})},this),new i.Routing.Autocomplete(u,function(e){u.value=e.name,t.name=e.name,t.latLng=e.center,this.fire("geocoded",{waypoint:t,value:e})},this,i.extend({resultFn:this.options.geocoder.geocode,resultContext:this.options.geocoder,autocompleteFn:this.options.geocoder.suggest,autocompleteContext:this.options.geocoder},this.options.autocompleteOptions))},getContainer:function(){return this._element.container},setValue:function(t){this._element.input.value=t},update:function(t){var e,n=this._waypoint;n.name=n.name||"",!n.latLng||!t&&n.name||(e=this.options.waypointNameFallback(n.latLng),this.options.geocoder&&this.options.geocoder.reverse?this.options.geocoder.reverse(n.latLng,67108864,function(t){t.length>0&&t[0].center.distanceTo(n.latLng)<this.options.maxGeocoderTolerance?n.name=t[0].name:n.name=e,this._update()},this):(n.name=e,this._update()))},focus:function(){var t=this._element.input;t.focus(),n(t)},_update:function(){var t=this._waypoint,e=t&&t.name?t.name:"";this.setValue(e),this.fire("reversegeocoded",{waypoint:t,value:e})}}),i.Routing.geocoderElement=function(t,e,n,o){return new i.Routing.GeocoderElement(t,e,n,o)},e.exports=i.Routing}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.GeocoderElement.js","/node_modules/leaflet-routing-machine/src")},{"./L.Routing.Autocomplete":35,_process:53,buffer:17,leaflet:48}],40:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){!function(){"use strict";var n=t("leaflet");n.Routing=n.Routing||{},n.extend(n.Routing,t("./L.Routing.Formatter")),n.extend(n.Routing,t("./L.Routing.ItineraryBuilder")),n.Routing.Itinerary=n.Control.extend({includes:n.Mixin.Events,options:{pointMarkerStyle:{radius:5,color:"#03f",fillColor:"white",opacity:1,fillOpacity:.7},summaryTemplate:"<h2>{name}</h2><h3>{distance}, {time}</h3>",timeTemplate:"{time}",containerClassName:"",alternativeClassName:"",minimizedClassName:"",itineraryClassName:"",totalDistanceRoundingSensitivity:-1,show:!0,collapsible:void 0,collapseBtn:function(t){var e=n.DomUtil.create("span",t.options.collapseBtnClass);n.DomEvent.on(e,"click",t._toggle,t),t._container.insertBefore(e,t._container.firstChild)},collapseBtnClass:"leaflet-routing-collapse-btn"},initialize:function(t){n.setOptions(this,t),this._formatter=this.options.formatter||new n.Routing.Formatter(this.options),this._itineraryBuilder=this.options.itineraryBuilder||new n.Routing.ItineraryBuilder({containerClassName:this.options.itineraryClassName})},onAdd:function(t){var e=this.options.collapsible;return e=e||void 0===e&&t.getSize().x<=640,this._container=n.DomUtil.create("div","leaflet-routing-container leaflet-bar "+(this.options.show?"":"leaflet-routing-container-hide ")+(e?"leaflet-routing-collapsible ":"")+this.options.containerClassName),this._altContainer=this.createAlternativesContainer(),this._container.appendChild(this._altContainer),n.DomEvent.disableClickPropagation(this._container),n.DomEvent.addListener(this._container,"mousewheel",function(t){n.DomEvent.stopPropagation(t)}),e&&this.options.collapseBtn(this),this._container},onRemove:function(){},createAlternativesContainer:function(){return n.DomUtil.create("div","leaflet-routing-alternatives-container")},setAlternatives:function(t){var e,n,i;for(this._clearAlts(),this._routes=t,e=0;e<this._routes.length;e++)n=this._routes[e],i=this._createAlternative(n,e),this._altContainer.appendChild(i),this._altElements.push(i);return this._selectRoute({route:this._routes[0],alternatives:this._routes.slice(1)}),this},show:function(){n.DomUtil.removeClass(this._container,"leaflet-routing-container-hide")},hide:function(){n.DomUtil.addClass(this._container,"leaflet-routing-container-hide")},_toggle:function(){var t=n.DomUtil.hasClass(this._container,"leaflet-routing-container-hide");this[t?"show":"hide"]()},_createAlternative:function(t,e){var i=n.DomUtil.create("div","leaflet-routing-alt "+this.options.alternativeClassName+(e>0?" leaflet-routing-alt-minimized "+this.options.minimizedClassName:"")),o=this.options.summaryTemplate,r=n.extend({name:t.name,distance:this._formatter.formatDistance(t.summary.totalDistance,this.options.totalDistanceRoundingSensitivity),time:this._formatter.formatTime(t.summary.totalTime)},t);return i.innerHTML="function"==typeof o?o(r):n.Util.template(o,r),n.DomEvent.addListener(i,"click",this._onAltClicked,this),this.on("routeselected",this._selectAlt,this),i.appendChild(this._createItineraryContainer(t)),i},_clearAlts:function(){for(var t=this._altContainer;t&&t.firstChild;)t.removeChild(t.firstChild);this._altElements=[]},_createItineraryContainer:function(t){var e,n,i,o,r,s,a=this._itineraryBuilder.createContainer(),u=this._itineraryBuilder.createStepsContainer();for(a.appendChild(u),e=0;e<t.instructions.length;e++)n=t.instructions[e],r=this._formatter.formatInstruction(n,e),o=this._formatter.formatDistance(n.distance),s=this._formatter.getIconName(n,e),i=this._itineraryBuilder.createStep(r,o,s,u),this._addRowListeners(i,t.coordinates[n.index]);return a},_addRowListeners:function(t,e){n.DomEvent.addListener(t,"mouseover",function(){this._marker=n.circleMarker(e,this.options.pointMarkerStyle).addTo(this._map)},this),n.DomEvent.addListener(t,"mouseout",function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)},this),n.DomEvent.addListener(t,"click",function(t){this._map.panTo(e),n.DomEvent.stopPropagation(t)},this)},_onAltClicked:function(t){for(var e=t.target||window.event.srcElement;!n.DomUtil.hasClass(e,"leaflet-routing-alt");)e=e.parentElement;var i=this._altElements.indexOf(e),o=this._routes.slice(),r=o.splice(i,1)[0];this.fire("routeselected",{route:r,alternatives:o})},_selectAlt:function(t){var e,i,o,r;if(e=this._altElements[t.route.routesIndex],n.DomUtil.hasClass(e,"leaflet-routing-alt-minimized"))for(i=0;i<this._altElements.length;i++)o=this._altElements[i],r=i===t.route.routesIndex?"removeClass":"addClass",n.DomUtil[r](o,"leaflet-routing-alt-minimized"),this.options.minimizedClassName&&n.DomUtil[r](o,this.options.minimizedClassName),i!==t.route.routesIndex&&(o.scrollTop=0);n.DomEvent.stop(t)},_selectRoute:function(t){this._marker&&(this._map.removeLayer(this._marker),delete this._marker),this.fire("routeselected",t)}}),n.Routing.itinerary=function(t){return new n.Routing.Itinerary(t)},e.exports=n.Routing}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.Itinerary.js","/node_modules/leaflet-routing-machine/src")},{"./L.Routing.Formatter":38,"./L.Routing.ItineraryBuilder":41,_process:53,buffer:17,leaflet:48}],41:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){!function(){"use strict";var n=t("leaflet");n.Routing=n.Routing||{},n.Routing.ItineraryBuilder=n.Class.extend({options:{containerClassName:""},initialize:function(t){n.setOptions(this,t)},createContainer:function(t){var e=n.DomUtil.create("table",t||""),i=n.DomUtil.create("colgroup","",e);return n.DomUtil.create("col","leaflet-routing-instruction-icon",i),n.DomUtil.create("col","leaflet-routing-instruction-text",i),n.DomUtil.create("col","leaflet-routing-instruction-distance",i),e},createStepsContainer:function(){return n.DomUtil.create("tbody","")},createStep:function(t,e,i,o){var r,s,a=n.DomUtil.create("tr","",o);return s=n.DomUtil.create("td","",a),r=n.DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+i,s),s.appendChild(r),s=n.DomUtil.create("td","",a),s.appendChild(document.createTextNode(t)),s=n.DomUtil.create("td","",a),s.appendChild(document.createTextNode(e)),a}}),e.exports=n.Routing}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.ItineraryBuilder.js","/node_modules/leaflet-routing-machine/src")},{_process:53,buffer:17,leaflet:48}],42:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){!function(){"use strict";var n=t("leaflet");n.Routing=n.Routing||{},n.Routing.Line=n.LayerGroup.extend({includes:n.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(t,e){n.setOptions(this,e),n.LayerGroup.prototype.initialize.call(this,e),this._route=t,this.options.extendToWaypoints&&this._extendToWaypoints(),this._addSegment(t.coordinates,this.options.styles,this.options.addWaypoints)},addTo:function(t){return t.addLayer(this),this},getBounds:function(){return n.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var t,e=this._route.inputWaypoints,n=[];for(t=0;t<e.length;t++)n.push(this._findClosestRoutePoint(e[t].latLng));return n},_findClosestRoutePoint:function(t){var e,n,i,o=Number.MAX_VALUE;for(n=this._route.coordinates.length-1;n>=0;n--)i=t.distanceTo(this._route.coordinates[n]),o>i&&(e=n,o=i);return e},_extendToWaypoints:function(){var t,e,i,o=this._route.inputWaypoints,r=this._getWaypointIndices();for(t=0;t<o.length;t++)e=o[t].latLng,i=n.latLng(this._route.coordinates[r[t]]),e.distanceTo(i)>this.options.missingRouteTolerance&&this._addSegment([e,i],this.options.missingRouteStyles)},_addSegment:function(t,e,i){var o,r;for(o=0;o<e.length;o++)r=n.polyline(t,e[o]),this.addLayer(r),i&&r.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(t){for(var e=this._getWaypointIndices(),n=e.length-1;n>=0&&e[n]>t;)n--;return n},_onLineTouched:function(t){var e=this._findNearestWpBefore(this._findClosestRoutePoint(t.latlng));this.fire("linetouched",{afterIndex:e,latlng:t.latlng})},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}}),n.Routing.line=function(t,e){return new n.Routing.Line(t,e)},e.exports=n.Routing}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.Line.js","/node_modules/leaflet-routing-machine/src")},{_process:53,buffer:17,leaflet:48}],43:[function(t,e,n){(function(t,n,i,o,r,s,a,u,l){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.Localization={en:{directions:{N:"north",NE:"northeast",E:"east",SE:"southeast",S:"south",SW:"southwest",W:"west",NW:"northwest"},instructions:{Head:["Head {dir}"," on {road}"],Continue:["Continue {dir}"," on {road}"],SlightRight:["Slight right"," onto {road}"],Right:["Right"," onto {road}"],SharpRight:["Sharp right"," onto {road}"],TurnAround:["Turn around"],SharpLeft:["Sharp left"," onto {road}"],Left:["Left"," onto {road}"],SlightLeft:["Slight left"," onto {road}"],WaypointReached:["Waypoint reached"],Roundabout:["Take the {exitStr} exit in the roundabout"," onto {road}"],DestinationReached:["Destination reached"]},formatOrder:function(t){var e=t%10-1,n=["st","nd","rd"];return n[e]?t+n[e]:t+"th"},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"End"}},de:{directions:{N:"Norden",NE:"Nordosten",E:"Osten",SE:"Südosten",S:"Süden",SW:"Südwesten",W:"Westen",NW:"Nordwesten"},instructions:{Head:["Richtung {dir}"," auf {road}"],Continue:["Geradeaus Richtung {dir}"," auf {road}"],SlightRight:["Leicht rechts abbiegen"," auf {road}"],Right:["Rechts abbiegen"," auf {road}"],SharpRight:["Scharf rechts abbiegen"," auf {road}"],TurnAround:["Wenden"],SharpLeft:["Scharf links abbiegen"," auf {road}"],Left:["Links abbiegen"," auf {road}"],SlightLeft:["Leicht links abbiegen"," auf {road}"],WaypointReached:["Zwischenhalt erreicht"],Roundabout:["Nehmen Sie die {exitStr} Ausfahrt im Kreisverkehr"," auf {road}"],DestinationReached:["Sie haben ihr Ziel erreicht"]},formatOrder:function(t){return t+"."},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Ziel"}},sv:{directions:{N:"norr",NE:"nordost",E:"öst",SE:"sydost",S:"syd",SW:"sydväst",W:"väst",NW:"nordväst"},instructions:{Head:["Åk åt {dir}"," på {road}"],Continue:["Fortsätt {dir}"," på {road}"],SlightRight:["Svagt höger"," på {road}"],Right:["Sväng höger"," på {road}"],SharpRight:["Skarpt höger"," på {road}"],TurnAround:["Vänd"],SharpLeft:["Skarpt vänster"," på {road}"],Left:["Sväng vänster"," på {road}"],SlightLeft:["Svagt vänster"," på {road}"],WaypointReached:["Viapunkt nådd"],Roundabout:["Tag {exitStr} avfarten i rondellen"," till {road}"],DestinationReached:["Framme vid resans mål"]},formatOrder:function(t){return["första","andra","tredje","fjärde","femte","sjätte","sjunde","åttonde","nionde","tionde"][t-1]},ui:{startPlaceholder:"Från",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Till"}},sp:{directions:{N:"norte",NE:"noreste",E:"este",SE:"sureste",S:"sur",SW:"suroeste",W:"oeste",NW:"noroeste"},instructions:{Head:["Derecho {dir}"," sobre {road}"],Continue:["Continuar {dir}"," en {road}"],SlightRight:["Leve giro a la derecha"," sobre {road}"],Right:["Derecha"," sobre {road}"],SharpRight:["Giro pronunciado a la derecha"," sobre {road}"],TurnAround:["Dar vuelta"],SharpLeft:["Giro pronunciado a la izquierda"," sobre {road}"],Left:["Izquierda"," en {road}"],SlightLeft:["Leve giro a la izquierda"," en {road}"],WaypointReached:["Llegó a un punto del camino"],Roundabout:["Tomar {exitStr} salida en la rotonda"," en {road}"],DestinationReached:["Llegada a destino"]},formatOrder:function(t){return t+"º"},ui:{startPlaceholder:"Inicio",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Destino"}},nl:{directions:{N:"noordelijke",NE:"noordoostelijke",E:"oostelijke",SE:"zuidoostelijke",S:"zuidelijke",SW:"zuidewestelijke",W:"westelijke",NW:"noordwestelijke"},instructions:{Head:["Vertrek in {dir} richting"," de {road} op"],Continue:["Ga in {dir} richting"," de {road} op"],SlightRight:["Volg de weg naar rechts"," de {road} op"],Right:["Ga rechtsaf"," de {road} op"],SharpRight:["Ga scherpe bocht naar rechts"," de {road} op"],TurnAround:["Keer om"],SharpLeft:["Ga scherpe bocht naar links"," de {road} op"],Left:["Ga linksaf"," de {road} op"],SlightLeft:["Volg de weg naar links"," de {road} op"],WaypointReached:["Aangekomen bij tussenpunt"],Roundabout:["Neem de {exitStr} afslag op de rotonde"," de {road} op"],DestinationReached:["Aangekomen op eindpunt"]},formatOrder:function(t){return 1===t||t>=20?t+"ste":t+"de"},ui:{startPlaceholder:"Vertrekpunt",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Bestemming"}},fr:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ouest",W:"ouest",NW:"nord-ouest"},instructions:{Head:["Tout droit au {dir}"," sur {road}"],Continue:["Continuer au {dir}"," sur {road}"],SlightRight:["Légèrement à droite"," sur {road}"],Right:["A droite"," sur {road}"],SharpRight:["Complètement à droite"," sur {road}"],TurnAround:["Faire demi-tour"],SharpLeft:["Complètement à gauche"," sur {road}"],Left:["A gauche"," sur {road}"],SlightLeft:["Légèrement à gauche"," sur {road}"],WaypointReached:["Point d'étape atteint"],Roundabout:["Au rond-point, prenez la {exitStr} sortie"," sur {road}"],DestinationReached:["Destination atteinte"]},formatOrder:function(t){return t+"º"},ui:{startPlaceholder:"Départ",viaPlaceholder:"Intermédiaire {viaNumber}",endPlaceholder:"Arrivée"}},it:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ovest",W:"ovest",NW:"nord-ovest"},instructions:{Head:["Dritto verso {dir}"," su {road}"],Continue:["Continuare verso {dir}"," su {road}"],SlightRight:["Mantenere la destra"," su {road}"],Right:["A destra"," su {road}"],SharpRight:["Strettamente a destra"," su {road}"],TurnAround:["Fare inversione di marcia"],SharpLeft:["Strettamente a sinistra"," su {road}"],Left:["A sinistra"," sur {road}"],SlightLeft:["Mantenere la sinistra"," su {road}"],WaypointReached:["Punto di passaggio raggiunto"],Roundabout:["Alla rotonda, prendere la {exitStr} uscita"],DestinationReached:["Destinazione raggiunta"]},formatOrder:function(t){return t+"º"},ui:{startPlaceholder:"Partenza",viaPlaceholder:"Intermedia {viaNumber}",endPlaceholder:"Destinazione"}},pt:{directions:{N:"norte",NE:"nordeste",E:"leste",SE:"sudeste",S:"sul",SW:"sudoeste",W:"oeste",NW:"noroeste"},instructions:{Head:["Siga {dir}"," na {road}"],Continue:["Continue {dir}"," na {road}"],SlightRight:["Curva ligeira a direita"," na {road}"],Right:["Curva a direita"," na {road}"],SharpRight:["Curva fechada a direita"," na {road}"],TurnAround:["Retorne"],SharpLeft:["Curva fechada a esquerda"," na {road}"],Left:["Curva a esquerda"," na {road}"],SlightLeft:["Curva ligueira a esquerda"," na {road}"],WaypointReached:["Ponto de interesse atingido"],Roundabout:["Pegue a {exitStr} saída na rotatória"," na {road}"],DestinationReached:["Destino atingido"]},formatOrder:function(t){return t+"º"},ui:{startPlaceholder:"Origem",viaPlaceholder:"Intermédio {viaNumber}",endPlaceholder:"Destino"}},sk:{directions:{N:"sever",NE:"serverovýchod",E:"východ",SE:"juhovýchod",S:"juh",SW:"juhozápad",W:"západ",NW:"serverozápad"},instructions:{Head:["Mierte na {dir}"," na {road}"],Continue:["Pokračujte na {dir}"," na {road}"],SlightRight:["Mierne doprava"," na {road}"],Right:["Doprava"," na {road}"],SharpRight:["Prudko doprava"," na {road}"],TurnAround:["Otočte sa"],SharpLeft:["Prudko doľava"," na {road}"],Left:["Doľava"," na {road}"],SlightLeft:["Mierne doľava"," na {road}"],WaypointReached:["Ste v prejazdovom bode."],Roundabout:["Odbočte na {exitStr} výjazde"," na {road}"],DestinationReached:["Prišli ste do cieľa."]},formatOrder:function(t){var e=t%10-1,n=[".",".","."];return n[e]?t+n[e]:t+"."},ui:{startPlaceholder:"Začiatok",viaPlaceholder:"Cez {viaNumber}",endPlaceholder:"Koniec"}},el:{directions:{N:"βόρεια",NE:"βορειοανατολικά",E:"ανατολικά",SE:"νοτιοανατολικά",S:"νότια",SW:"νοτιοδυτικά",W:"δυτικά",NW:"βορειοδυτικά"},instructions:{Head:["Κατευθυνθείτε {dir}"," στην {road}"],Continue:["Συνεχίστε {dir}"," στην {road}"],SlightRight:["Ελαφρώς δεξιά"," στην {road}"],Right:["Δεξιά"," στην {road}"],SharpRight:["Απότομη δεξιά στροφή"," στην {road}"],TurnAround:["Κάντε αναστροφή"],SharpLeft:["Απότομη αριστερή στροφή"," στην {road}"],Left:["Αριστερά"," στην {road}"],SlightLeft:["Ελαφρώς αριστερά"," στην {road}"],WaypointReached:["Φτάσατε στο σημείο αναφοράς"],Roundabout:["Ακολουθήστε την {exitStr} έξοδο στο κυκλικό κόμβο"," στην {road}"],DestinationReached:["Φτάσατε στον προορισμό σας"]},formatOrder:function(t){return t+"º"},ui:{startPlaceholder:"Αφετηρία",viaPlaceholder:"μέσω {viaNumber}",endPlaceholder:"Προορισμός"}}},e.exports=L.Routing}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.Localization.js","/node_modules/leaflet-routing-machine/src")},{_process:53,buffer:17}],44:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){!function(){"use strict";var n=t("leaflet"),i=t("corslite"),o=t("polyline");n.Routing=n.Routing||{},n.extend(n.Routing,t("./L.Routing.Waypoint")),n.Routing.OSRMv1=n.Class.extend({options:{serviceUrl:"http://router.project-osrm.org/route/v1",profile:"driving",timeout:3e4,routingOptions:{alternatives:!0,steps:!0},polylinePrecision:5},initialize:function(t){n.Util.setOptions(this,t),this._hints={locations:{}}},route:function(t,e,o,r){var s,a,u,l,c=!1,h=[];for(s=this.buildRouteUrl(t,n.extend({},this.options.routingOptions,r)),a=setTimeout(function(){c=!0,e.call(o||e,{status:-1,message:"OSRM request timed out."})},this.options.timeout),l=0;l<t.length;l++)u=t[l],h.push(new n.Routing.Waypoint(u.latLng,u.name,u.options));return i(s,n.bind(function(t,n){var i,s,u;if(clearTimeout(a),!c){if(s="HTTP request failed: "+t,u=-1,!t)try{i=JSON.parse(n.responseText);try{return this._routeDone(i,h,r,e,o)}catch(l){u=-3,s=l.toString()}}catch(l){u=-2,s="Error parsing OSRM response: "+l.toString()}e.call(o||e,{status:u,message:s})}},this)),this},_routeDone:function(t,e,n,i,o){var r,s,a,u=[];if(o=o||i,"Ok"!==t.code)return void i.call(o,{status:t.code});for(r=this._toWaypoints(e,t.waypoints),s=0;s<t.routes.length;s++)a=this._convertRoute(t.routes[s],n.geometryOnly),a.inputWaypoints=e,a.waypoints=r,u.push(a);this._saveHintData(t.waypoints,e),i.call(o,null,u)},_convertRoute:function(t,e){var n,i,o,r,s,a,u={name:"",summary:{totalDistance:t.distance,totalTime:t.duration}},l=[],c=[],h=0,d=t.legs.length;if(e)return u.coordinates=this._decodePolyline(t.geometry),u;for(n=0;d>n;n++)for(o=t.legs[n],i=0;i<o.steps.length;i++)r=o.steps[i],s=this._decodePolyline(r.geometry),l.push(s),a=this._maneuverToInstructionType(r.maneuver,n===d-1),a&&c.push({type:a,distance:r.distance,time:r.duration,road:r.name,direction:this._bearingToDirection(r.maneuver.bearing_after),exit:r.maneuver.exit,index:h}),h+=s.length;return u.coordinates=Array.prototype.concat.apply([],l),u.instructions=c,u},_bearingToDirection:function(t){var e=Math.round(t/45)%8;return["N","NE","E","SE","S","SW","W","NW"][e]},_maneuverToInstructionType:function(t,e){switch(t.type){case"turn":case"end of road":switch(t.modifier){case"straight":return"Straight";case"slight right":return"SlightRight";case"right":return"Right";case"sharp right":return"SharpRight";case"sharp left":return"SharpLeft";case"left":return"Left";case"slight left":return"SlightLeft";case"uturn":return"TurnAround";default:return null}break;case"new name":case"merge":case"ramp":case"fork":return"Continue";case"arrive":return e?"DestinationReached":"WaypointReached";case"roundabout":case"rotary":return"Roundabout";default:return null}},_decodePolyline:function(t){var e,i=o.decode(t,this.options.polylinePrecision),r=new Array(i.length);for(e=i.length-1;e>=0;e--)r[e]=n.latLng(i[e]);return r},_toWaypoints:function(t,e){var i,o=[];for(i=0;i<e.length;i++)o.push(n.Routing.waypoint(n.latLng(e[i]),t[i].name,t[i].options));return o},_createName:function(t){var e,n="";for(e=0;e<t.length;e++)t[e]&&(n&&(n+=", "),n+=t[e].charAt(0).toUpperCase()+t[e].slice(1));return n},buildRouteUrl:function(t,e){for(var n,i,o,r,s=[],a=[],u=0;u<t.length;u++)n=t[u],i=n.latLng,s.push(i.lng+","+i.lat),a.push(this._hints[this._locationKey(i)]||"");return r=o=!(e&&e.geometryOnly),this.options.serviceUrl+"/"+this.options.profile+"/"+s.join(";")+"?"+(e.z?"z="+e.z+"&":e.geometryOnly?"overview=full&":"")+"alternatives="+r.toString()+"&steps="+o.toString()+(e.allowUTurns?"&continue_straight="+!e.allowUTurns:"");
},_locationKey:function(t){return t.lat+","+t.lng},_saveHintData:function(t,e){var n;this._hints={locations:{}};for(var i=t.length-1;i>=0;i--)n=e[i].latLng,this._hints.locations[this._locationKey(n)]=t[i].hint},_convertSummary:function(t){return{totalDistance:t.total_distance,totalTime:t.total_time}},_convertInstructions:function(t){var e,n,i,o,r=[];for(e=0;e<t.length;e++)n=t[e],i=this._drivingDirectionType(n[0]),o=n[0].split("-"),i&&r.push({type:i,distance:n[2],time:n[4],road:n[1],direction:n[6],exit:o.length>1?o[1]:void 0,index:n[3]});return r}}),n.Routing.osrmv1=function(t){return new n.Routing.OSRM(t)},e.exports=n.Routing}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.OSRMv1.js","/node_modules/leaflet-routing-machine/src")},{"./L.Routing.Waypoint":46,_process:53,buffer:17,corslite:18,leaflet:48,polyline:52}],45:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){!function(){"use strict";var n=t("leaflet");n.Routing=n.Routing||{},n.extend(n.Routing,t("./L.Routing.GeocoderElement")),n.extend(n.Routing,t("./L.Routing.Waypoint")),n.Routing.Plan=n.Class.extend({includes:n.Mixin.Events,options:{dragStyles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2,dashArray:"7,12"}],draggableWaypoints:!0,routeWhileDragging:!1,addWaypoints:!0,reverseWaypoints:!1,addButtonClassName:"",language:"en",createGeocoderElement:n.Routing.geocoderElement,createMarker:function(t,e){var i={draggable:this.draggableWaypoints},o=n.marker(e.latLng,i);return o},geocodersClassName:""},initialize:function(t,e){n.Util.setOptions(this,e),this._waypoints=[],this.setWaypoints(t)},isReady:function(){var t;for(t=0;t<this._waypoints.length;t++)if(!this._waypoints[t].latLng)return!1;return!0},getWaypoints:function(){var t,e=[];for(t=0;t<this._waypoints.length;t++)e.push(this._waypoints[t]);return e},setWaypoints:function(t){var e=[0,this._waypoints.length].concat(t);return this.spliceWaypoints.apply(this,e),this},spliceWaypoints:function(){var t,e=[arguments[0],arguments[1]];for(t=2;t<arguments.length;t++)e.push(arguments[t]&&arguments[t].hasOwnProperty("latLng")?arguments[t]:n.Routing.waypoint(arguments[t]));for([].splice.apply(this._waypoints,e);this._waypoints.length<2;)this.spliceWaypoints(this._waypoints.length,0,null);this._updateMarkers(),this._fireChanged.apply(this,e)},onAdd:function(t){this._map=t,this._updateMarkers()},onRemove:function(){var t;if(this._removeMarkers(),this._newWp)for(t=0;t<this._newWp.lines.length;t++)this._map.removeLayer(this._newWp.lines[t]);delete this._map},createGeocoders:function(){var t,e,i=n.DomUtil.create("div","leaflet-routing-geocoders "+this.options.geocodersClassName),o=this._waypoints;return this._geocoderContainer=i,this._geocoderElems=[],this.options.addWaypoints&&(t=n.DomUtil.create("button","leaflet-routing-add-waypoint "+this.options.addButtonClassName,i),t.setAttribute("type","button"),n.DomEvent.addListener(t,"click",function(){this.spliceWaypoints(o.length,0,null)},this)),this.options.reverseWaypoints&&(e=n.DomUtil.create("button","leaflet-routing-reverse-waypoints",i),e.setAttribute("type","button"),n.DomEvent.addListener(e,"click",function(){this._waypoints.reverse(),this.setWaypoints(this._waypoints)},this)),this._updateGeocoders(),this.on("waypointsspliced",this._updateGeocoders),i},_createGeocoder:function(t){var e=this.options.createGeocoderElement(this._waypoints[t],t,this._waypoints.length,this.options);return e.on("delete",function(){t>0||this._waypoints.length>2?this.spliceWaypoints(t,1):this.spliceWaypoints(t,1,new n.Routing.Waypoint)},this).on("geocoded",function(e){this._updateMarkers(),this._fireChanged(),this._focusGeocoder(t+1),this.fire("waypointgeocoded",{waypointIndex:t,waypoint:e.waypoint})},this).on("reversegeocoded",function(e){this.fire("waypointgeocoded",{waypointIndex:t,waypoint:e.waypoint})},this),e},_updateGeocoders:function(){var t,e,n=[];for(t=0;t<this._geocoderElems.length;t++)this._geocoderContainer.removeChild(this._geocoderElems[t].getContainer());for(t=this._waypoints.length-1;t>=0;t--)e=this._createGeocoder(t),this._geocoderContainer.insertBefore(e.getContainer(),this._geocoderContainer.firstChild),n.push(e);this._geocoderElems=n.reverse()},_removeMarkers:function(){var t;if(this._markers)for(t=0;t<this._markers.length;t++)this._markers[t]&&this._map.removeLayer(this._markers[t]);this._markers=[]},_updateMarkers:function(){var t,e;if(this._map)for(this._removeMarkers(),t=0;t<this._waypoints.length;t++)this._waypoints[t].latLng?(e=this.options.createMarker(t,this._waypoints[t],this._waypoints.length),e&&(e.addTo(this._map),this.options.draggableWaypoints&&this._hookWaypointEvents(e,t))):e=null,this._markers.push(e)},_fireChanged:function(){this.fire("waypointschanged",{waypoints:this.getWaypoints()}),arguments.length>=2&&this.fire("waypointsspliced",{index:Array.prototype.shift.call(arguments),nRemoved:Array.prototype.shift.call(arguments),added:arguments})},_hookWaypointEvents:function(t,e,i){var o,r,s=function(t){return i?t.latlng:t.target.getLatLng()},a=n.bind(function(t){this.fire("waypointdragstart",{index:e,latlng:s(t)})},this),u=n.bind(function(t){this._waypoints[e].latLng=s(t),this.fire("waypointdrag",{index:e,latlng:s(t)})},this),l=n.bind(function(t){this._waypoints[e].latLng=s(t),this._waypoints[e].name="",this._geocoderElems&&this._geocoderElems[e].update(!0),this.fire("waypointdragend",{index:e,latlng:s(t)}),this._fireChanged()},this);i?(o=n.bind(function(t){this._markers[e].setLatLng(t.latlng),u(t)},this),r=n.bind(function(t){this._map.dragging.enable(),this._map.off("mouseup",r),this._map.off("mousemove",o),l(t)},this),this._map.dragging.disable(),this._map.on("mousemove",o),this._map.on("mouseup",r),a({latlng:this._waypoints[e].latLng})):(t.on("dragstart",a),t.on("drag",u),t.on("dragend",l))},dragNewWaypoint:function(t){var e=t.afterIndex+1;this.options.routeWhileDragging?(this.spliceWaypoints(e,0,t.latlng),this._hookWaypointEvents(this._markers[e],e,!0)):this._dragNewWaypoint(e,t.latlng)},_dragNewWaypoint:function(t,e){var i,o=new n.Routing.Waypoint(e),r=this._waypoints[t-1],s=this._waypoints[t],a=this.options.createMarker(t,o,this._waypoints.length+1),u=[],l=n.bind(function(t){var e;for(a&&a.setLatLng(t.latlng),e=0;e<u.length;e++)u[e].spliceLatLngs(1,1,t.latlng)},this),c=n.bind(function(e){var n;for(a&&this._map.removeLayer(a),n=0;n<u.length;n++)this._map.removeLayer(u[n]);this._map.off("mousemove",l),this._map.off("mouseup",c),this.spliceWaypoints(t,0,e.latlng)},this);for(a&&a.addTo(this._map),i=0;i<this.options.dragStyles.length;i++)u.push(n.polyline([r.latLng,e,s.latLng],this.options.dragStyles[i]).addTo(this._map));this._map.on("mousemove",l),this._map.on("mouseup",c)},_focusGeocoder:function(t){this._geocoderElems[t]?this._geocoderElems[t].focus():document.activeElement.blur()}}),n.Routing.plan=function(t,e){return new n.Routing.Plan(t,e)},e.exports=n.Routing}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.Plan.js","/node_modules/leaflet-routing-machine/src")},{"./L.Routing.GeocoderElement":39,"./L.Routing.Waypoint":46,_process:53,buffer:17,leaflet:48}],46:[function(t,e,n){(function(n,i,o,r,s,a,u,l,c){!function(){"use strict";var n=t("leaflet");n.Routing=n.Routing||{},n.Routing.Waypoint=n.Class.extend({options:{allowUTurn:!1},initialize:function(t,e,i){n.Util.setOptions(this,i),this.latLng=n.latLng(t),this.name=e}}),n.Routing.waypoint=function(t,e,i){return new n.Routing.Waypoint(t,e,i)},e.exports=n.Routing}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet-routing-machine/src/L.Routing.Waypoint.js","/node_modules/leaflet-routing-machine/src")},{_process:53,buffer:17,leaflet:48}],47:[function(t,e,n){(function(t,e,n,i,o,r,s,a,u){!function(t,e,n){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[];var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup){var e=[];for(var n in t._layers)e.push(t._layers[n]);return this.addLayers(e)}if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this;if(!this._map)return this._needsClustering.push(t),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this._topClusterLevel._recalculateBounds();var i=t,o=this._map.getZoom();if(t.__parent)for(;i.__parent._zoom>=o;)i=i.__parent;return this._currentShownBounds.contains(i.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,i):this._animationAddLayerNonAnimated(t,i)),this},removeLayer:function(t){if(t instanceof L.LayerGroup){var e=[];for(var n in t._layers)e.push(t._layers[n]);return this.removeLayers(e)}return t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this._topClusterLevel._recalculateBounds(),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push(t),this):(this._nonPointGroup.removeLayer(t),this)},addLayers:function(t){var e,n,i,o,r=this._featureGroup,s=this._nonPointGroup,a=this.options.chunkedLoading,u=this.options.chunkInterval,l=this.options.chunkProgress;if(this._map){var c=0,h=(new Date).getTime(),d=L.bind(function(){for(var e=(new Date).getTime();c<t.length;c++){if(a&&0===c%200){var n=(new Date).getTime()-e;if(n>u)break}if(o=t[c],o.getLatLng){if(!this.hasLayer(o)&&(this._addLayer(o,this._maxZoom),o.__parent&&2===o.__parent.getChildCount())){var i=o.__parent.getAllChildMarkers(),f=i[0]===o?i[1]:i[0];r.removeLayer(f)}}else s.addLayer(o)}l&&l(c,t.length,(new Date).getTime()-h),c===t.length?(this._topClusterLevel._recalculateBounds(),this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(d,this.options.chunkDelay)},this);d()}else{for(e=[],n=0,i=t.length;i>n;n++)o=t[n],o.getLatLng?this.hasLayer(o)||e.push(o):s.addLayer(o);this._needsClustering=this._needsClustering.concat(e)}return this},removeLayers:function(t){var e,n,i,o=this._featureGroup,r=this._nonPointGroup;if(!this._map){for(e=0,n=t.length;n>e;e++)i=t[e],this._arraySplice(this._needsClustering,i),r.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push(i);return this}if(this._unspiderfy)for(this._unspiderfy(),e=0,n=t.length;n>e;e++)i=t[e],this._unspiderfyLayer(i);for(e=0,n=t.length;n>e;e++)i=t[e],i.__parent?(this._removeLayer(i,!0,!0),o.hasLayer(i)&&(o.removeLayer(i),i.clusterShow&&i.clusterShow())):r.removeLayer(i);return this._topClusterLevel._recalculateBounds(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),o.eachLayer(function(t){t instanceof L.MarkerCluster&&t._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){delete t.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var n,i=this._needsClustering.slice();for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(i),n=i.length-1;n>=0;n--)t.call(e,i[n]);this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer(function(n){L.stamp(n)===t&&(e=n)}),e},hasLayer:function(t){if(!t)return!1;var e,n=this._needsClustering;for(e=n.length-1;e>=0;e--)if(n[e]===t)return!0;for(n=this._needsRemoving,e=n.length-1;e>=0;e--)if(n[e]===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){"function"!=typeof e&&(e=function(){});var n=function(){!t._icon&&!t.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),t._icon?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};if(t._icon&&this._map.getBounds().contains(t.getLatLng()))e();else if(t.__parent._zoom<this._map.getZoom())this._map.on("moveend",n,this),this._map.panTo(t.getLatLng());else{var i=function(){this._map.off("movestart",i,this),i=null};this._map.on("movestart",i,this),this._map.on("moveend",n,this),this.on("animationend",n,this),t.__parent.zoomToBounds(),i&&n.call(this)}},onAdd:function(t){this._map=t;var e,n,i;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.onAdd(t),this._nonPointGroup.onAdd(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,n=this._needsRemoving.length;n>e;e++)i=this._needsRemoving[e],this._removeLayer(i,!0);this._needsRemoving=[],this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.onRemove(t),this._nonPointGroup.onRemove(t),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return t.splice(n,1),!0},_removeFromGridUnclustered:function(t,e){for(var n=this._map,i=this._gridUnclustered;e>=0&&i[e].removeObject(t,n.project(t.getLatLng(),e));e--);},_removeLayer:function(t,e,n){var i=this._gridClusters,o=this._gridUnclustered,r=this._featureGroup,s=this._map;e&&this._removeFromGridUnclustered(t,this._maxZoom);var a,u=t.__parent,l=u._markers;for(this._arraySplice(l,t);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<0));)e&&u._childCount<=1?(a=u._markers[0]===t?u._markers[1]:u._markers[0],i[u._zoom].removeObject(u,s.project(u._cLatLng,u._zoom)),o[u._zoom].addObject(a,s.project(a.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(a),a.__parent=u.__parent,u._icon&&(r.removeLayer(u),n||r.addLayer(a))):n&&u._icon||u._updateIcon(),u=u.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},_propagateEvent:function(t){if(t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;t.type="cluster"+t.type}this.fire(t.type,t)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),n=" marker-cluster-";return n+=10>e?"small":100>e?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick;(e||i)&&this.on("clusterclick",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){for(var e=t.layer,n=e;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===e._childCount?this.options.spiderfyOnMaxZoom&&e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this._map;(t||n)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),i.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._map._zoom,t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=this._map.getMaxZoom(),e=this.options.maxClusterRadius,n=e;"function"!=typeof e&&(n=function(){return e}),this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var i=t;i>=0;i--)this._gridClusters[i]=new L.DistanceGrid(n(i)),this._gridUnclustered[i]=new L.DistanceGrid(n(i));this._topClusterLevel=new this._markerCluster(this,-1)},_addLayer:function(t,e){var n,i,o=this._gridClusters,r=this._gridUnclustered;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t);e>=0;e--){n=this._map.project(t.getLatLng(),e);var s=o[e].getNearObject(n);if(s)return s._addChild(t),void(t.__parent=s);if(s=r[e].getNearObject(n)){var a=s.__parent;a&&this._removeLayer(s,!1);var u=new this._markerCluster(this,e,s,t);o[e].addObject(u,this._map.project(u._cLatLng,e)),s.__parent=u,t.__parent=u;var l=u;for(i=e-1;i>a._zoom;i--)l=new this._markerCluster(this,i,l),o[i].addObject(l,this._map.project(s.getLatLng(),i));return a._addChild(l),void this._removeFromGridUnclustered(s,e)}r[e].addObject(t,n)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){this._processQueue(),this._zoom<this._map._zoom&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return e!==n&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var n=e.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else e._updateIcon()},_overrideMarkerIcon:function(t){var e=t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}});return e}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var n,i=this._getExpandedVisibleBounds(),o=this._featureGroup;this._topClusterLevel._recursively(i,t,0,function(r){var s,a=r._latlng,u=r._markers;for(i.contains(a)||(a=null),r._isSingleParent()&&t+1===e?(o.removeLayer(r),r._recursivelyAddChildrenToMap(null,e,i)):(r.clusterHide(),r._recursivelyAddChildrenToMap(a,e,i)),n=u.length-1;n>=0;n--)s=u[n],i.contains(s._latlng)||o.removeLayer(s)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,e),o.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()}),this._topClusterLevel._recursively(i,t,e,function(t){t._recursivelyRestoreChildPositions(e)}),this._enqueue(function(){this._topClusterLevel._recursively(i,t,0,function(t){o.removeLayer(t),t.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var n=this,i=this._featureGroup;i.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){i.removeLayer(t),t.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(e,this._map.getMaxZoom(),this._map.getZoom())))}},_animationZoomOutSingle:function(t,e,n){var i=this._getExpandedVisibleBounds();t._recursivelyAnimateChildrenInAndAddSelfToMap(i,e+1,n);var o=this;this._forceLayout(),t._recursivelyBecomeVisible(i,n),this._enqueue(function(){if(1===t._childCount){var r=t._markers[0];r.setLatLng(r.getLatLng()),r.clusterShow&&r.clusterShow()}else t._recursively(i,n,0,function(t){t._recursivelyRemoveChildrenFromMap(i,e+1)});o._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(e.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)},L.MarkerCluster=L.Marker.extend({initialize:function(t,e,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(t){t=t||[];for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e].getAllChildMarkers(t);for(var n=this._markers.length-1;n>=0;n--)t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var t,e=this._childClusters.slice(),n=this._group._map,i=n.getBoundsZoom(this._bounds),o=this._zoom+1,r=n.getZoom();e.length>0&&i>o;){o++;var s=[];for(t=0;t<e.length;t++)s=s.concat(e[t]._childClusters);e=s}i>o?this._group._map.setView(this._latlng,o):r>=i?this._group._map.setView(this._latlng,r+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,n,i,o=this._markers,r=this._childClusters,s=0,a=0,u=this._childCount;if(0!==u){for(this._resetBounds(),t=0;t<o.length;t++)n=o[t]._latlng,this._bounds.extend(n),s+=n.lat,a+=n.lng;for(t=0;t<r.length;t++)e=r[t],e._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),n=e._wLatLng,i=e._childCount,s+=n.lat*i,a+=n.lng*i;this._latlng=this._wLatLng=new L.LatLng(s/u,a/u),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,n){this._recursively(t,0,n-1,function(t){var n,i,o=t._markers;for(n=o.length-1;n>=0;n--)i=o[n],i._icon&&(i._setPos(e),i.clusterHide())},function(t){var n,i,o=t._childClusters;for(n=o.length-1;n>=0;n--)i=o[n],i._icon&&(i._setPos(e),i.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,n){this._recursively(t,n,0,function(i){i._recursivelyAnimateChildrenIn(t,i._group._map.latLngToLayerPoint(i.getLatLng()).round(),e),i._isSingleParent()&&e-1===n?(i.clusterShow(),i._recursivelyRemoveChildrenFromMap(t,e)):i.clusterHide(),i._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,0,e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(t,e,n){this._recursively(n,-1,e,function(i){if(e!==i._zoom)for(var o=i._markers.length-1;o>=0;o--){var r=i._markers[o];n.contains(r._latlng)&&(t&&(r._backupLatlng=r.getLatLng(),r.setLatLng(t),r.clusterHide&&r.clusterHide()),i._group._featureGroup.addLayer(r))}},function(e){e._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var n=this._markers[e];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(t-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,n){var i,o;this._recursively(t,-1,e-1,function(t){for(o=t._markers.length-1;o>=0;o--)i=t._markers[o],n&&n.contains(i._latlng)||(t._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())},function(t){for(o=t._childClusters.length-1;o>=0;o--)i=t._childClusters[o],n&&n.contains(i._latlng)||(t._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())})},_recursively:function(t,e,n,i,o){var r,s,a=this._childClusters,u=this._zoom;if(e>u)for(r=a.length-1;r>=0;r--)s=a[r],t.intersects(s._bounds)&&s._recursively(t,e,n,i,o);else if(i&&i(this),o&&this._zoom===n&&o(this),n>u)for(r=a.length-1;r>=0;r--)s=a[r],t.intersects(s._bounds)&&s._recursively(t,e,n,i,o)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var t=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,t}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var n=this._getCoord(e.x),i=this._getCoord(e.y),o=this._grid,r=o[i]=o[i]||{},s=r[n]=r[n]||[],a=L.Util.stamp(t);this._objectPoint[a]=e,s.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var n,i,o=this._getCoord(e.x),r=this._getCoord(e.y),s=this._grid,a=s[r]=s[r]||{},u=a[o]=a[o]||[];for(delete this._objectPoint[L.Util.stamp(t)],n=0,i=u.length;i>n;n++)if(u[n]===t)return u.splice(n,1),1===i&&delete a[o],!0},eachObject:function(t,e){var n,i,o,r,s,a,u,l=this._grid;for(n in l){s=l[n];for(i in s)for(a=s[i],o=0,r=a.length;r>o;o++)u=t.call(e,a[o]),u&&(o--,r--)}},getNearObject:function(t){var e,n,i,o,r,s,a,u,l=this._getCoord(t.x),c=this._getCoord(t.y),h=this._objectPoint,d=this._sqCellSize,f=null;for(e=c-1;c+1>=e;e++)if(o=this._grid[e])for(n=l-1;l+1>=n;n++)if(r=o[n])for(i=0,s=r.length;s>i;i++)a=r[i],u=this._sqDist(h[L.Util.stamp(a)],t),d>u&&(d=u,f=a);return f},_getCoord:function(t){return Math.floor(t/this._cellSize)},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}},function(){L.QuickHull={getDistant:function(t,e){var n=e[1].lat-e[0].lat,i=e[0].lng-e[1].lng;return i*(t.lat-e[0].lat)+n*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var n,i,o,r=0,s=null,a=[];for(n=e.length-1;n>=0;n--)i=e[n],o=this.getDistant(i,t),o>0&&(a.push(i),o>r&&(r=o,s=i));return{maxPoint:s,newPoints:a}},buildConvexHull:function(t,e){var n=[],i=this.findMostDistantPointFromBaseLine(t,e);return i.maxPoint?(n=n.concat(this.buildConvexHull([t[0],i.maxPoint],i.newPoints)),n=n.concat(this.buildConvexHull([i.maxPoint,t[1]],i.newPoints))):[t[0]]},getConvexHull:function(t){var e,n=!1,i=!1,o=!1,r=!1,s=null,a=null,u=null,l=null,c=null,h=null;for(e=t.length-1;e>=0;e--){var d=t[e];(n===!1||d.lat>n)&&(s=d,n=d.lat),(i===!1||d.lat<i)&&(a=d,i=d.lat),(o===!1||d.lng>o)&&(u=d,o=d.lng),(r===!1||d.lng<r)&&(l=d,r=d.lng)}i!==n?(h=a,c=s):(h=l,c=u);var f=[].concat(this.buildConvexHull([h,c],t),this.buildConvexHull([c,h],t));
return f}}}(),L.MarkerCluster.include({getConvexHull:function(){var t,e,n=this.getAllChildMarkers(),i=[];for(e=n.length-1;e>=0;e--)t=n[e].getLatLng(),i.push(t);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(),n=this._group,i=n._map,o=i.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,o):(o.y+=10,t=this._generatePointsCircle(e.length,o)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var n,i,o=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),r=o/this._2PI,s=this._2PI/t,a=[];for(a.length=t,n=t-1;n>=0;n--)i=this._circleStartAngle+n*s,a[n]=new L.Point(e.x+r*Math.cos(i),e.y+r*Math.sin(i))._round();return a},_generatePointsSpiral:function(t,e){var n,i=this._group.options.spiderfyDistanceMultiplier,o=i*this._spiralLengthStart,r=i*this._spiralFootSeparation,s=i*this._spiralLengthFactor*this._2PI,a=0,u=[];for(u.length=t,n=t-1;n>=0;n--)a+=r/o+5e-4*n,u[n]=new L.Point(e.x+o*Math.cos(a),e.y+o*Math.sin(a))._round(),o+=s/a;return u},_noanimationUnspiderfy:function(){var t,e,n=this._group,i=n._map,o=n._featureGroup,r=this.getAllChildMarkers();for(this.setOpacity(1),e=r.length-1;e>=0;e--)t=r[e],o.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(i.removeLayer(t._spiderLeg),delete t._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:r}),n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var n,i,o,r,s=this._group,a=s._map,u=s._featureGroup,l=this._group.options.spiderLegPolylineOptions;for(n=0;n<t.length;n++)r=a.layerPointToLatLng(e[n]),i=t[n],o=new L.Polyline([this._latlng,r],l),a.addLayer(o),i._spiderLeg=o,i._preSpiderfyLatlng=i._latlng,i.setLatLng(r),i.setZIndexOffset&&i.setZIndexOffset(1e6),u.addLayer(i);this.setOpacity(.3),s.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i,o,r,s,a,u,l=this,c=this._group,h=c._map,d=c._featureGroup,f=this._latlng,p=h.latLngToLayerPoint(f),m=L.Path.SVG,g=L.extend({},this._group.options.spiderLegPolylineOptions),_=g.opacity;for(_===n&&(_=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),m?(g.opacity=0,g.className=(g.className||"")+" leaflet-cluster-spider-leg"):g.opacity=_,i=0;i<t.length;i++)o=t[i],u=h.layerPointToLatLng(e[i]),r=new L.Polyline([f,u],g),h.addLayer(r),o._spiderLeg=r,m&&(s=r._path,a=s.getTotalLength()+.1,s.style.strokeDasharray=a,s.style.strokeDashoffset=a),o.setZIndexOffset&&o.setZIndexOffset(1e6),o.clusterHide&&o.clusterHide(),d.addLayer(o),o._setPos&&o._setPos(p);for(c._forceLayout(),c._animationStart(),i=t.length-1;i>=0;i--)u=h.layerPointToLatLng(e[i]),o=t[i],o._preSpiderfyLatlng=o._latlng,o.setLatLng(u),o.clusterShow&&o.clusterShow(),m&&(r=o._spiderLeg,s=r._path,s.style.strokeDashoffset=0,r.setStyle({opacity:_}));this.setOpacity(.3),setTimeout(function(){c._animationEnd(),c.fire("spiderfied",{cluster:l,markers:t})},200)},_animationUnspiderfy:function(t){var e,n,i,o,r,s,a=this,u=this._group,l=u._map,c=u._featureGroup,h=t?l._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):l.latLngToLayerPoint(this._latlng),d=this.getAllChildMarkers(),f=L.Path.SVG;for(u._animationStart(),this.setOpacity(1),n=d.length-1;n>=0;n--)e=d[n],e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,s=!0,e._setPos&&(e._setPos(h),s=!1),e.clusterHide&&(e.clusterHide(),s=!1),s&&c.removeLayer(e),f&&(i=e._spiderLeg,o=i._path,r=o.getTotalLength()+.1,o.style.strokeDashoffset=r,i.setStyle({opacity:0})));setTimeout(function(){var t=0;for(n=d.length-1;n>=0;n--)e=d[n],e._spiderLeg&&t++;for(n=d.length-1;n>=0;n--)e=d[n],e._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),t>1&&c.removeLayer(e),l.removeLayer(e._spiderLeg),delete e._spiderLeg);u._animationEnd(),u.fire("unspiderfied",{cluster:a,markers:d})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,n;for(e in t)for(n=t[e].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_refreshSingleMarkerModeMarkers:function(t){var e,n;for(e in t)n=t[e],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(t,e){var n=this.options.icon;return L.setOptions(n,t),this.setIcon(n),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}})}(window,document)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet.markercluster/dist/leaflet.markercluster.js","/node_modules/leaflet.markercluster/dist")},{_process:53,buffer:17}],48:[function(t,e,n){(function(t,n,i,o,r,s,a,u,l){!function(t,n,i){var o=t.L,r={};r.version="0.7.7","object"==typeof e&&"object"==typeof e.exports?e.exports=r:"function"==typeof define&&define.amd&&define(r),r.noConflict=function(){return t.L=o,this},t.L=r,r.Util={extend:function(t){var e,n,i,o,r=Array.prototype.slice.call(arguments,1);for(n=0,i=r.length;i>n;n++){o=r[n]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(n){return n[e]=n[e]||++t,n[e]}}(),invokeEach:function(t,e,n){var i,o;if("object"==typeof t){o=Array.prototype.slice.call(arguments,3);for(i in t)e.apply(n,[i,t[i]].concat(o));return!0}return!1},limitExecByInterval:function(t,e,n){var i,o;return function r(){var s=arguments;return i?void(o=!0):(i=!0,setTimeout(function(){i=!1,o&&(r.apply(n,s),o=!1)},e),void t.apply(n,s))}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return r.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=r.extend({},t.options,e),t.options},getParamString:function(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var o=e[n];if(o===i)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var n,i,o=["webkit","moz","o","ms"];for(n=0;n<o.length&&!i;n++)i=t[o[n]+e];return i}function n(e){var n=+new Date,o=Math.max(0,16-(n-i));return i=n+o,t.setTimeout(e,o)}var i=0,o=t.requestAnimationFrame||e("RequestAnimationFrame")||n,s=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};r.Util.requestAnimFrame=function(e,i,s,a){return e=r.bind(e,i),s&&o===n?void e():o.call(t,e,a)},r.Util.cancelAnimFrame=function(e){e&&s.call(t,e)}}(),r.extend=r.Util.extend,r.bind=r.Util.bind,r.stamp=r.Util.stamp,r.setOptions=r.Util.setOptions,r.Class=function(){},r.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;i.constructor=e,e.prototype=i;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);t.statics&&(r.extend(e,t.statics),delete t.statics),t.includes&&(r.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=r.extend({},i.options,t.options)),r.extend(i,t),i._initHooks=[];var s=this;return e.__super__=s.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){s.prototype.callInitHooks&&s.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;e>t;t++)i._initHooks[t].call(this)}},e},r.Class.include=function(t){r.extend(this.prototype,t)},r.Class.mergeOptions=function(t){r.extend(this.prototype.options,t)},r.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var s="_leaflet_events";r.Mixin={},r.Mixin.Events={addEventListener:function(t,e,n){if(r.Util.invokeEach(t,this.addEventListener,this,e,n))return this;var i,o,a,u,l,c,h,d=this[s]=this[s]||{},f=n&&n!==this&&r.stamp(n);for(t=r.Util.splitWords(t),i=0,o=t.length;o>i;i++)a={action:e,context:n||this},u=t[i],f?(l=u+"_idx",c=l+"_len",h=d[l]=d[l]||{},h[f]||(h[f]=[],d[c]=(d[c]||0)+1),h[f].push(a)):(d[u]=d[u]||[],d[u].push(a));return this},hasEventListeners:function(t){var e=this[s];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,n){if(!this[s])return this;if(!t)return this.clearAllEventListeners();if(r.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var i,o,a,u,l,c,h,d,f,p=this[s],m=n&&n!==this&&r.stamp(n);for(t=r.Util.splitWords(t),i=0,o=t.length;o>i;i++)if(a=t[i],c=a+"_idx",h=c+"_len",d=p[c],e){if(u=m&&d?d[m]:p[a]){for(l=u.length-1;l>=0;l--)u[l].action!==e||n&&u[l].context!==n||(f=u.splice(l,1),f[0].action=r.Util.falseFn);n&&d&&0===u.length&&(delete d[m],p[h]--)}}else delete p[a],delete p[c],delete p[h];return this},clearAllEventListeners:function(){return delete this[s],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var n,i,o,a,u,l=r.Util.extend({},e,{type:t,target:this}),c=this[s];if(c[t])for(n=c[t].slice(),i=0,o=n.length;o>i;i++)n[i].action.call(n[i].context,l);a=c[t+"_idx"];for(u in a)if(n=a[u].slice())for(i=0,o=n.length;o>i;i++)n[i].action.call(n[i].context,l);return this},addOneTimeEventListener:function(t,e,n){if(r.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var i=r.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,i,n)},this);return this.addEventListener(t,e,n).addEventListener(t,i,n)}},r.Mixin.Events.on=r.Mixin.Events.addEventListener,r.Mixin.Events.off=r.Mixin.Events.removeEventListener,r.Mixin.Events.once=r.Mixin.Events.addOneTimeEventListener,r.Mixin.Events.fire=r.Mixin.Events.fireEvent,function(){var e="ActiveXObject"in t,o=e&&!n.addEventListener,s=navigator.userAgent.toLowerCase(),a=-1!==s.indexOf("webkit"),u=-1!==s.indexOf("chrome"),l=-1!==s.indexOf("phantom"),c=-1!==s.indexOf("android"),h=-1!==s.search("android [23]"),d=-1!==s.indexOf("gecko"),f=typeof orientation!=i+"",p=!t.PointerEvent&&t.MSPointerEvent,m=t.PointerEvent&&t.navigator.pointerEnabled||p,g="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,_=n.documentElement,y=e&&"transition"in _.style,v="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!h,b="MozPerspective"in _.style,w="OTransition"in _.style,L=!t.L_DISABLE_3D&&(y||v||b||w)&&!l,x=!t.L_NO_TOUCH&&!l&&(m||"ontouchstart"in t||t.DocumentTouch&&n instanceof t.DocumentTouch);r.Browser={ie:e,ielt9:o,webkit:a,gecko:d&&!a&&!t.opera&&!e,android:c,android23:h,chrome:u,ie3d:y,webkit3d:v,gecko3d:b,opera3d:w,any3d:L,mobile:f,mobileWebkit:f&&a,mobileWebkit3d:f&&v,mobileOpera:f&&t.opera,touch:x,msPointer:p,pointer:m,retina:g}}(),r.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},r.Point.prototype={clone:function(){return new r.Point(this.x,this.y)},add:function(t){return this.clone()._add(r.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(r.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=r.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=r.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=r.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+r.Util.formatNum(this.x)+", "+r.Util.formatNum(this.y)+")"}},r.point=function(t,e,n){return t instanceof r.Point?t:r.Util.isArray(t)?new r.Point(t[0],t[1]):t===i||null===t?t:new r.Point(t,e,n)},r.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;o>i;i++)this.extend(n[i])},r.Bounds.prototype={extend:function(t){return t=r.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new r.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new r.Point(this.min.x,this.max.y)},getTopRight:function(){return new r.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof r.Point?r.point(t):r.bounds(t),t instanceof r.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=r.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,s=o.x>=e.x&&i.x<=n.x,a=o.y>=e.y&&i.y<=n.y;return s&&a},isValid:function(){return!(!this.min||!this.max)}},r.bounds=function(t,e){return!t||t instanceof r.Bounds?t:new r.Bounds(t,e)},r.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},r.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new r.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},r.DomUtil={get:function(t){return"string"==typeof t?n.getElementById(t):t},getStyle:function(t,e){var i=t.style[e];if(!i&&t.currentStyle&&(i=t.currentStyle[e]),(!i||"auto"===i)&&n.defaultView){var o=n.defaultView.getComputedStyle(t,null);i=o?o[e]:null}return"auto"===i?null:i},getViewportOffset:function(t){var e,i=0,o=0,s=t,a=n.body,u=n.documentElement;do{if(i+=s.offsetTop||0,o+=s.offsetLeft||0,i+=parseInt(r.DomUtil.getStyle(s,"borderTopWidth"),10)||0,o+=parseInt(r.DomUtil.getStyle(s,"borderLeftWidth"),10)||0,e=r.DomUtil.getStyle(s,"position"),s.offsetParent===a&&"absolute"===e)break;if("fixed"===e){i+=a.scrollTop||u.scrollTop||0,o+=a.scrollLeft||u.scrollLeft||0;break}if("relative"===e&&!s.offsetLeft){var l=r.DomUtil.getStyle(s,"width"),c=r.DomUtil.getStyle(s,"max-width"),h=s.getBoundingClientRect();"none"===l&&"none"===c||(o+=h.left+s.clientLeft),i+=h.top+(a.scrollTop||u.scrollTop||0);break}s=s.offsetParent}while(s);s=t;do{if(s===a)break;i-=s.scrollTop||0,o-=s.scrollLeft||0,s=s.parentNode}while(s);return new r.Point(o,i)},documentIsLtr:function(){return r.DomUtil._docIsLtrCached||(r.DomUtil._docIsLtrCached=!0,r.DomUtil._docIsLtr="ltr"===r.DomUtil.getStyle(n.body,"direction")),r.DomUtil._docIsLtr},create:function(t,e,i){var o=n.createElement(t);return o.className=e,i&&i.appendChild(o),o},hasClass:function(t,e){if(t.classList!==i)return t.classList.contains(e);var n=r.DomUtil._getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==i)for(var n=r.Util.splitWords(e),o=0,s=n.length;s>o;o++)t.classList.add(n[o]);else if(!r.DomUtil.hasClass(t,e)){var a=r.DomUtil._getClass(t);r.DomUtil._setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==i?t.classList.remove(e):r.DomUtil._setClass(t,r.Util.trim((" "+r.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===i?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===i?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(o){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}},testProp:function(t){for(var e=n.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},getTranslateString:function(t){var e=r.Browser.webkit3d,n="translate"+(e?"3d":"")+"(",i=(e?",0":"")+")";return n+t.x+"px,"+t.y+"px"+i},getScaleString:function(t,e){var n=r.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),i=" scale("+t+") ";return n+i},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&r.Browser.any3d?t.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},r.DomUtil.TRANSFORM=r.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),r.DomUtil.TRANSITION=r.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),r.DomUtil.TRANSITION_END="webkitTransition"===r.DomUtil.TRANSITION||"OTransition"===r.DomUtil.TRANSITION?r.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in n)r.extend(r.DomUtil,{disableTextSelection:function(){r.DomEvent.on(t,"selectstart",r.DomEvent.preventDefault)},enableTextSelection:function(){r.DomEvent.off(t,"selectstart",r.DomEvent.preventDefault)}});else{var e=r.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);r.extend(r.DomUtil,{disableTextSelection:function(){if(e){var t=n.documentElement.style;this._userSelect=t[e],t[e]="none"}},enableTextSelection:function(){e&&(n.documentElement.style[e]=this._userSelect,delete this._userSelect)}})}r.extend(r.DomUtil,{disableImageDrag:function(){r.DomEvent.on(t,"dragstart",r.DomEvent.preventDefault)},enableImageDrag:function(){r.DomEvent.off(t,"dragstart",r.DomEvent.preventDefault)}})}(),r.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==i&&(this.alt=parseFloat(n))},r.extend(r.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),r.LatLng.prototype={equals:function(t){if(!t)return!1;t=r.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=r.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+r.Util.formatNum(this.lat,t)+", "+r.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=r.latLng(t);var e=6378137,n=r.LatLng.DEG_TO_RAD,i=(t.lat-this.lat)*n,o=(t.lng-this.lng)*n,s=this.lat*n,a=t.lat*n,u=Math.sin(i/2),l=Math.sin(o/2),c=u*u+l*l*Math.cos(s)*Math.cos(a);return 2*e*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(t,e){var n=this.lng;return t=t||-180,e=e||180,n=(n+e)%(e-t)+(t>n||n===e?e:t),new r.LatLng(this.lat,n)}},r.latLng=function(t,e){return t instanceof r.LatLng?t:r.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new r.LatLng(t[0],t[1],t[2]):null:t===i||null===t?t:"object"==typeof t&&"lat"in t?new r.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===i?null:new r.LatLng(t,e)},r.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;o>i;i++)this.extend(n[i])},r.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=r.latLng(t);return t=null!==e?e:r.latLngBounds(t),t instanceof r.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new r.LatLng(t.lat,t.lng),this._northEast=new r.LatLng(t.lat,t.lng)):t instanceof r.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new r.LatLngBounds(new r.LatLng(e.lat-i,e.lng-o),new r.LatLng(n.lat+i,n.lng+o))},getCenter:function(){return new r.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new r.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new r.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof r.LatLng?r.latLng(t):r.latLngBounds(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof r.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=r.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=e.lat&&i.lat<=n.lat,a=o.lng>=e.lng&&i.lng<=n.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=r.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},r.latLngBounds=function(t,e){return!t||t instanceof r.LatLngBounds?t:new r.LatLngBounds(t,e)},r.Projection={},r.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=r.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=t.lng*e,s=i*e;return s=Math.log(Math.tan(Math.PI/4+s/2)),new r.Point(o,s)},unproject:function(t){var e=r.LatLng.RAD_TO_DEG,n=t.x*e,i=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new r.LatLng(i,n)}},r.Projection.LonLat={project:function(t){return new r.Point(t.lng,t.lat)},unproject:function(t){return new r.LatLng(t.y,t.x)}},r.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return r.point(e,e)}},r.CRS.Simple=r.extend({},r.CRS,{projection:r.Projection.LonLat,transformation:new r.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),r.CRS.EPSG3857=r.extend({},r.CRS,{code:"EPSG:3857",projection:r.Projection.SphericalMercator,transformation:new r.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),n=6378137;return e.multiplyBy(n)}}),r.CRS.EPSG900913=r.extend({},r.CRS.EPSG3857,{code:"EPSG:900913"}),r.CRS.EPSG4326=r.extend({},r.CRS,{code:"EPSG:4326",projection:r.Projection.LonLat,transformation:new r.Transformation(1/360,.5,-1/360,.5)}),r.Map=r.Class.extend({includes:r.Mixin.Events,options:{crs:r.CRS.EPSG3857,fadeAnimation:r.DomUtil.TRANSITION&&!r.Browser.android23,trackResize:!0,markerZoomAnimation:r.DomUtil.TRANSITION&&r.Browser.any3d},initialize:function(t,e){e=r.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=r.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(r.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===i?this.getZoom():e,this._resetView(r.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),s=t instanceof r.Point?t:this.latLngToContainerPoint(t),a=s.subtract(o).multiplyBy(1-1/i),u=this.containerPointToLatLng(o.add(a));return this.setView(u,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():r.latLngBounds(t);var n=r.point(e.paddingTopLeft||e.padding||[0,0]),i=r.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));o=e.maxZoom?Math.min(e.maxZoom,o):o;var s=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),o),u=this.project(t.getNorthEast(),o),l=this.unproject(a.add(u).divideBy(2).add(s),o);return this.setView(l,o,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(r.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=r.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var n=this.getCenter(),i=this._limitCenter(n,this._zoom,t);return n.equals(i)?this:this.panTo(i,e)},addLayer:function(t){var e=r.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&r.TileLayer&&t instanceof r.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=r.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&r.TileLayer&&t instanceof r.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return t?r.stamp(t)in this._layers:!1},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=r.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),o=n.divideBy(2).round(),s=i.subtract(o);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=i}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new r.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom===i?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=r.latLngBounds(t);var i,o=this.getMinZoom()-(e?1:0),s=this.getMaxZoom(),a=this.getSize(),u=t.getNorthWest(),l=t.getSouthEast(),c=!0;n=r.point(n||[0,0]);do o++,i=this.project(l,o).subtract(this.project(u,o)).add(n),c=e?i.x<a.x||i.y<a.y:a.contains(i);while(c&&s>=o);return c&&e?null:e?o:o-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new r.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new r.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(r.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(r.point(t),e)},layerPointToLatLng:function(t){var e=r.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(r.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return r.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return r.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){
var e=this.containerPointToLayerPoint(r.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(r.latLng(t)))},mouseEventToContainerPoint:function(t){return r.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=r.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;r.DomUtil.addClass(t,"leaflet-container"+(r.Browser.touch?" leaflet-touch":"")+(r.Browser.retina?" leaflet-retina":"")+(r.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=r.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(r.DomUtil.addClass(t.markerPane,e),r.DomUtil.addClass(t.shadowPane,e),r.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return r.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?r.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;n>e;e++)this.addLayer(t[e])},_resetView:function(t,e,n,i){var o=this._zoom!==e;i||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):r.DomUtil.setPosition(this._mapPane,new r.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),s&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(o||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){r.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-(1/0),o=this._getZoomSpan();for(t in this._zoomBoundLayers){var r=this._zoomBoundLayers[t];isNaN(r.options.minZoom)||(e=Math.min(e,r.options.minZoom)),isNaN(r.options.maxZoom)||(n=Math.max(n,r.options.maxZoom))}t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=e),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(r.DomEvent){e=e||"on",r.DomEvent[e](this._container,"click",this._onMouseClick,this);var n,i,o=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,i=o.length;i>n;n++)r.DomEvent[e](this._container,o[n],this._fireMouseEvent,this);this.options.trackResize&&r.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){r.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=r.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||r.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!r.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&r.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),i=this.containerPointToLayerPoint(n),o=this.layerPointToLatLng(i);this.fire(e,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return r.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),s=new r.Bounds(i.subtract(o),i.add(o)),a=this._getBoundsOffset(s,n,e);return this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new r.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=this.project(e.getNorthWest(),n).subtract(t.min),o=this.project(e.getSouthEast(),n).subtract(t.max),s=this._rebound(i.x,-o.x),a=this._rebound(i.y,-o.y);return new r.Point(s,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),r.map=function(t,e){return new r.Map(t,e)},r.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=r.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=this.R_MAJOR,s=this.R_MINOR,a=t.lng*e*o,u=i*e,l=s/o,c=Math.sqrt(1-l*l),h=c*Math.sin(u);h=Math.pow((1-h)/(1+h),.5*c);var d=Math.tan(.5*(.5*Math.PI-u))/h;return u=-o*Math.log(d),new r.Point(a,u)},unproject:function(t){for(var e,n=r.LatLng.RAD_TO_DEG,i=this.R_MAJOR,o=this.R_MINOR,s=t.x*n/i,a=o/i,u=Math.sqrt(1-a*a),l=Math.exp(-t.y/i),c=Math.PI/2-2*Math.atan(l),h=15,d=1e-7,f=h,p=.1;Math.abs(p)>d&&--f>0;)e=u*Math.sin(c),p=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*u))-c,c+=p;return new r.LatLng(c*n,s)}},r.CRS.EPSG3395=r.extend({},r.CRS,{code:"EPSG:3395",projection:r.Projection.Mercator,transformation:function(){var t=r.Projection.Mercator,e=t.R_MAJOR,n=.5/(Math.PI*e);return new r.Transformation(n,.5,-n,.5)}()}),r.TileLayer=r.Class.extend({includes:r.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:r.Browser.mobile,updateWhenIdle:r.Browser.mobile},initialize:function(t,e){e=r.setOptions(this,e),e.detectRetina&&r.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=r.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=r.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var n,i,o,r=t.children,s=-e(1/0,-(1/0));for(i=0,o=r.length;o>i;i++)r[i]!==this._container&&(n=parseInt(r[i].style.zIndex,10),isNaN(n)||(s=e(s,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(r.Browser.ielt9)for(t in e)r.DomUtil.setOpacity(e[t],this.options.opacity);else r.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=r.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=r.DomUtil.create("div",e,this._container),this._tileContainer=r.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,i=this.options.tileSize;return n&&e>n&&(i=Math.round(t.getZoomScale(e)/t.getZoomScale(n)*i)),i},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),n=t.getZoom(),i=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var o=r.bounds(e.min.divideBy(i)._floor(),e.max.divideBy(i)._floor());this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}},_addTilesFromCenterOut:function(t){var e,i,o,s=[],a=t.getCenter();for(e=t.min.y;e<=t.max.y;e++)for(i=t.min.x;i<=t.max.x;i++)o=new r.Point(i,e),this._tileShouldBeLoaded(o)&&s.push(o);var u=s.length;if(0!==u){s.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)});var l=n.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=u,i=0;u>i;i++)this._addTile(s[i],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n.x)||t.y<0||t.y>=n.y)return!1}if(e.bounds){var i=this._getTileSize(),o=t.multiplyBy(i),r=o.add([i,i]),s=this._map.unproject(o),a=this._map.unproject(r);if(e.continuousWorld||e.noWrap||(s=s.wrap(),a=a.wrap()),!e.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(t){var e,n,i,o;for(o in this._tiles)e=o.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10),(n<t.min.x||n>t.max.x||i<t.min.y||i>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(r.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),r.Browser.android||(e.onload=null,e.src=r.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),i=this._getTile();r.DomUtil.setPosition(i,n,r.Browser.chrome),this._tiles[t.x+":"+t.y]=i,this._loadTile(i,t),i.parentNode!==this._tileContainer&&e.appendChild(i)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this._getTileSize();return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return r.Util.template(this._url,r.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,e=t.getSize(this._map.getZoom());return e.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=r.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=r.Util.falseFn,r.Browser.ielt9&&this.options.opacity!==i&&r.DomUtil.setOpacity(t,this.options.opacity),r.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&r.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(r.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==r.Util.emptyImageUrl&&(r.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),r.tileLayer=function(t,e){return new r.TileLayer(t,e)},r.TileLayer.WMS=r.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=r.extend({},this.defaultWmsParams),i=e.tileSize||this.options.tileSize;e.detectRetina&&r.Browser.retina?n.width=n.height=2*i:n.width=n.height=i;for(var o in e)this.options.hasOwnProperty(o)||"crs"===o||(n[o]=e[o]);this.wmsParams=n,r.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,r.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,n=this.options.tileSize,i=t.multiplyBy(n),o=i.add([n,n]),s=this._crs.project(e.unproject(i,t.z)),a=this._crs.project(e.unproject(o,t.z)),u=this._wmsVersion>=1.3&&this._crs===r.CRS.EPSG4326?[a.y,s.x,s.y,a.x].join(","):[s.x,a.y,a.x,s.y].join(","),l=r.Util.template(this._url,{s:this._getSubdomain(t)});return l+r.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+u},setParams:function(t,e){return r.extend(this.wmsParams,t),e||this.redraw(),this}}),r.tileLayer.wms=function(t,e){return new r.TileLayer.WMS(t,e)},r.TileLayer.Canvas=r.TileLayer.extend({options:{async:!1},initialize:function(t){r.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=r.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=r.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),r.tileLayer.canvas=function(t){return new r.TileLayer.Canvas(t)},r.ImageOverlay=r.Class.extend({includes:r.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=r.latLngBounds(e),r.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&r.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=r.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&r.Browser.any3d?r.DomUtil.addClass(this._image,"leaflet-zoom-animated"):r.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),r.extend(this._image,{galleryimg:"no",onselectstart:r.Util.falseFn,onmousemove:r.Util.falseFn,onload:r.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,i=e.getZoomScale(t.zoom),o=this._bounds.getNorthWest(),s=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(o,t.zoom,t.center),u=e._latLngToNewLayerPoint(s,t.zoom,t.center)._subtract(a),l=a._add(u._multiplyBy(.5*(1-1/i)));n.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(l)+" scale("+i+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);r.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){r.DomUtil.setOpacity(this._image,this.options.opacity)}}),r.imageOverlay=function(t,e,n){return new r.ImageOverlay(t,e,n)},r.Icon=r.Class.extend({options:{className:""},initialize:function(t){r.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i;return i=e&&"IMG"===e.tagName?this._createImg(n,e):this._createImg(n),this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n,i=this.options,o=r.point(i[e+"Size"]);n="shadow"===e?r.point(i.shadowAnchor||i.iconAnchor):r.point(i.iconAnchor),!n&&o&&(n=o.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+i.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||n.createElement("img"),e.src=t,e},_getIconUrl:function(t){return r.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),r.icon=function(t){return new r.Icon(t)},r.Icon.Default=r.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];r.Browser.retina&&"icon"===t&&(t+="-2x");var n=r.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),r.Icon.Default.imagePath=function(){var t,e,i,o,r,s=n.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=s.length;e>t;t++)if(i=s[t].src,o=i.match(a))return r=i.split(a)[0],(r?r+"/":"")+"images"}(),r.Marker=r.Class.extend({includes:r.Mixin.Events,options:{icon:new r.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){r.setOptions(this,e),this._latlng=r.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=r.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var t=this.options,e=this._map,n=e.options.zoomAnimation&&e.options.markerZoomAnimation,i=n?"leaflet-zoom-animated":"leaflet-zoom-hide",o=t.icon.createIcon(this._icon),s=!1;o!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(o.title=t.title),t.alt&&(o.alt=t.alt)),r.DomUtil.addClass(o,i),t.keyboard&&(o.tabIndex="0"),this._icon=o,this._initInteraction(),t.riseOnHover&&r.DomEvent.on(o,"mouseover",this._bringToFront,this).on(o,"mouseout",this._resetZIndex,this);var a=t.icon.createShadow(this._shadow),u=!1;a!==this._shadow&&(this._removeShadow(),u=!0),a&&r.DomUtil.addClass(a,i),this._shadow=a,t.opacity<1&&this._updateOpacity();var l=this._map._panes;s&&l.markerPane.appendChild(this._icon),a&&u&&l.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&r.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){r.DomUtil.setPosition(this._icon,t),this._shadow&&r.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];r.DomUtil.addClass(t,"leaflet-clickable"),r.DomEvent.on(t,"click",this._onMouseClick,this),r.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)r.DomEvent.on(t,e[n],this._fireMouseEvent,this);r.Handler.MarkerDrag&&(this.dragging=new r.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&r.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&r.DomEvent.preventDefault(t),"mousedown"!==t.type?r.DomEvent.stopPropagation(t):r.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){r.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&r.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),r.marker=function(t,e){return new r.Marker(t,e)},r.DivIcon=r.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:n.createElement("div"),i=this.options;return i.html!==!1?e.innerHTML=i.html:e.innerHTML="",i.bgPos&&(e.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),r.divIcon=function(t){return new r.DivIcon(t)},r.Map.mergeOptions({closePopupOnClick:!0}),r.Popup=r.Class.extend({includes:r.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){r.setOptions(this,t),this._source=e,this._animated=r.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&r.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&r.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),r.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&r.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=r.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=r.DomUtil.create("div",n);this.options.closeButton&&(t=this._closeButton=r.DomUtil.create("a",e+"-close-button",i),t.href="#close",t.innerHTML="&#215;",r.DomEvent.disableClickPropagation(t),r.DomEvent.on(t,"click",this._onCloseButtonClick,this));var o=this._wrapper=r.DomUtil.create("div",e+"-content-wrapper",i);r.DomEvent.disableClickPropagation(o),this._contentNode=r.DomUtil.create("div",e+"-content",o),r.DomEvent.disableScrollPropagation(this._contentNode),r.DomEvent.on(o,"contextmenu",r.DomEvent.stopPropagation),this._tipContainer=r.DomUtil.create("div",e+"-tip-container",i),this._tip=r.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,s="leaflet-popup-scrolled";o&&i>o?(e.height=o+"px",r.DomUtil.addClass(t,s)):r.DomUtil.removeClass(t,s),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=r.point(this.options.offset);e&&r.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);r.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,i=new r.Point(this._containerLeft,-e-this._containerBottom);this._animated&&i._add(r.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(i),s=r.point(this.options.autoPanPadding),a=r.point(this.options.autoPanPaddingTopLeft||s),u=r.point(this.options.autoPanPaddingBottomRight||s),l=t.getSize(),c=0,h=0;o.x+n+u.x>l.x&&(c=o.x+n-l.x+u.x),o.x-c-a.x<0&&(c=o.x-a.x),o.y+e+u.y>l.y&&(h=o.y+e-l.y+u.y),o.y-h-a.y<0&&(h=o.y-a.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),r.DomEvent.stop(t)}}),r.popup=function(t,e){return new r.Popup(t,e)},r.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof r.Popup)){var i=t;t=new r.Popup(n).setLatLng(e).setContent(i)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),r.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=r.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(r.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=r.extend({offset:n},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof r.Popup?(r.setOptions(t,e),this._popup=t,t._source=this):this._popup=new r.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),r.LayerGroup=r.Class.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;n>e;e++)this.addLayer(t[e]);
},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return t?t in this._layers||this.getLayerId(t)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,i);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return r.stamp(t)}}),r.layerGroup=function(t){return new r.LayerGroup(t)},r.FeatureGroup=r.LayerGroup.extend({includes:r.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(r.FeatureGroup.EVENTS,this._propagateEvent,this),r.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),"off"in t&&t.off(r.FeatureGroup.EVENTS,this._propagateEvent,this),r.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new r.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof r.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=r.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),r.featureGroup=function(t){return new r.FeatureGroup(t)},r.Path=r.Class.extend({includes:[r.Mixin.Events],statics:{CLIP_PADDING:function(){var e=r.Browser.mobile?1280:2e3,n=(e/Math.max(t.outerWidth,t.outerHeight)-1)/2;return Math.max(0,Math.min(.5,n))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){r.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,r.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return r.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),r.Map.include({_updatePathViewport:function(){var t=r.Path.CLIP_PADDING,e=this.getSize(),n=r.DomUtil.getPosition(this._mapPane),i=n.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),o=i.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new r.Bounds(i,o)}}),r.Path.SVG_NS="http://www.w3.org/2000/svg",r.Browser.svg=!(!n.createElementNS||!n.createElementNS(r.Path.SVG_NS,"svg").createSVGRect),r.Path=r.Path.extend({statics:{SVG:r.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return n.createElementNS(r.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&r.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){!r.Browser.svg&&r.Browser.vml||r.DomUtil.addClass(this._path,"leaflet-clickable"),r.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)r.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this._map&&this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),i=e.containerPointToLayerPoint(n),o=e.layerPointToLatLng(i);this.fire(t.type,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&r.DomEvent.preventDefault(t),"mousemove"!==t.type&&r.DomEvent.stopPropagation(t)}}}),r.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=r.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&r.Browser.any3d?(r.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):r.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,i=n.x-e.x,o=n.y-e.y,s=this._pathRoot,a=this._panes.overlayPane;r.Browser.mobileWebkit&&a.removeChild(s),r.DomUtil.setPosition(s,e),s.setAttribute("width",i),s.setAttribute("height",o),s.setAttribute("viewBox",[e.x,e.y,i,o].join(" ")),r.Browser.mobileWebkit&&a.appendChild(s)}}}),r.Path.include({bindPopup:function(t,e){return t instanceof r.Popup?this._popup=t:(this._popup&&!e||(this._popup=new r.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),r.Browser.vml=!r.Browser.svg&&function(){try{var t=n.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(i){return!1}}(),r.Path=r.Browser.svg||!r.Browser.vml?r.Path:r.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return n.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return n.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return n.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");r.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&r.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",i.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=r.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(i.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),i.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(i.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),r.Map.include(r.Browser.svg||!r.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=n.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),r.Browser.canvas=function(){return!!n.createElement("canvas").getContext}(),r.Path=r.Path.SVG&&!t.L_PREFER_CANVAS||!r.Browser.canvas?r.Path:r.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return r.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!r.Path._updateRequest&&(r.Path._updateRequest=r.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){r.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color),t.lineCap&&(this._ctx.lineCap=t.lineCap),t.lineJoin&&(this._ctx.lineJoin=t.lineJoin)},_drawPath:function(){var t,e,n,i,o,s;for(this._ctx.beginPath(),t=0,n=this._parts.length;n>t;t++){for(e=0,i=this._parts[t].length;i>e;e++)o=this._parts[t][e],s=(0===e?"move":"line")+"To",this._ctx[s](o.x,o.y);this instanceof r.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill(e.fillRule||"evenodd")),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(t){this._containsPoint(t.layerPoint)&&this.fire(t.type,t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),r.Map.include(r.Path.SVG&&!t.L_PREFER_CANVAS||!r.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||(e=this._pathRoot=n.createElement("canvas"),e.style.position="absolute",t=this._canvasCtx=e.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),i=this._pathRoot;r.DomUtil.setPosition(i,e),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-e.x,-e.y)}}}),r.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,r=new o(n);r[0]=r[n-1]=1,this._simplifyDPStep(t,r,e,0,n-1);var s,a=[];for(s=0;n>s;s++)r[s]&&a.push(t[s]);return a},_simplifyDPStep:function(t,e,n,i,o){var r,s,a,u=0;for(s=i+1;o-1>=s;s++)a=this._sqClosestPointOnSegment(t[s],t[i],t[o],!0),a>u&&(r=s,u=a);u>n&&(e[r]=1,this._simplifyDPStep(t,e,n,i,r),this._simplifyDPStep(t,e,n,r,o))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;r>i;i++)this._sqDist(t[i],t[o])>e&&(n.push(t[i]),o=i);return r-1>o&&n.push(t[r-1]),n},clipSegment:function(t,e,n,i){var o,r,s,a=i?this._lastCode:this._getBitCode(t,n),u=this._getBitCode(e,n);for(this._lastCode=u;;){if(!(a|u))return[t,e];if(a&u)return!1;o=a||u,r=this._getEdgeIntersection(t,e,o,n),s=this._getBitCode(r,n),o===a?(t=r,a=s):(e=r,u=s)}},_getEdgeIntersection:function(t,e,n,i){var o=e.x-t.x,s=e.y-t.y,a=i.min,u=i.max;return 8&n?new r.Point(t.x+o*(u.y-t.y)/s,u.y):4&n?new r.Point(t.x+o*(a.y-t.y)/s,a.y):2&n?new r.Point(u.x,t.y+s*(u.x-t.x)/o):1&n?new r.Point(a.x,t.y+s*(a.x-t.x)/o):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var o,s=e.x,a=e.y,u=n.x-s,l=n.y-a,c=u*u+l*l;return c>0&&(o=((t.x-s)*u+(t.y-a)*l)/c,o>1?(s=n.x,a=n.y):o>0&&(s+=u*o,a+=l*o)),u=t.x-s,l=t.y-a,i?u*u+l*l:new r.Point(s,a)}},r.Polyline=r.Path.extend({initialize:function(t,e){r.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";e>t;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(r.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,n,i=1/0,o=this._parts,s=null,a=0,u=o.length;u>a;a++)for(var l=o[a],c=1,h=l.length;h>c;c++){e=l[c-1],n=l[c];var d=r.LineUtil._sqClosestPointOnSegment(t,e,n,!0);i>d&&(i=d,s=r.LineUtil._sqClosestPointOnSegment(t,e,n))}return s&&(s.distance=Math.sqrt(i)),s},getBounds:function(){return new r.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,i,o=e?t:[];for(n=0,i=t.length;i>n;n++){if(r.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;o[n]=r.latLng(t[n])}return o},_initEvents:function(){r.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,n=r.Path.VML,i=0,o=t.length,s="";o>i;i++)e=t[i],n&&e._round(),s+=(i?"L":"M")+e.x+" "+e.y;return s},_clipPoints:function(){var t,e,n,i=this._originalPoints,o=i.length;if(this.options.noClip)return void(this._parts=[i]);this._parts=[];var s=this._parts,a=this._map._pathViewport,u=r.LineUtil;for(t=0,e=0;o-1>t;t++)n=u.clipSegment(i[t],i[t+1],a,t),n&&(s[e]=s[e]||[],s[e].push(n[0]),n[1]===i[t+1]&&t!==o-2||(s[e].push(n[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=r.LineUtil,n=0,i=t.length;i>n;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),r.Path.prototype._updatePath.call(this))}}),r.polyline=function(t,e){return new r.Polyline(t,e)},r.PolyUtil={},r.PolyUtil.clipPolygon=function(t,e){var n,i,o,s,a,u,l,c,h,d=[1,4,2,8],f=r.LineUtil;for(i=0,l=t.length;l>i;i++)t[i]._code=f._getBitCode(t[i],e);for(s=0;4>s;s++){for(c=d[s],n=[],i=0,l=t.length,o=l-1;l>i;o=i++)a=t[i],u=t[o],a._code&c?u._code&c||(h=f._getEdgeIntersection(u,a,c,e),h._code=f._getBitCode(h,e),n.push(h)):(u._code&c&&(h=f._getEdgeIntersection(u,a,c,e),h._code=f._getBitCode(h,e),n.push(h)),n.push(a));t=n}return t},r.Polygon=r.Polyline.extend({options:{fill:!0},initialize:function(t,e){r.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,n,i;if(t&&r.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,n=this._holes.length;n>e;e++)i=this._holes[e]=this._convertLatLngs(this._holes[e]),i[0].equals(i[i.length-1])&&i.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(r.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,n,i;for(t=0,n=this._holes.length;n>t;t++)for(this._holePoints[t]=[],e=0,i=this._holes[t].length;i>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},setLatLngs:function(t){return t&&r.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):r.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;i>n;n++){var o=r.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);o.length&&e.push(o)}this._parts=e}},_getPathPartStr:function(t){var e=r.Polyline.prototype._getPathPartStr.call(this,t);return e+(r.Browser.svg?"z":"x")}}),r.polygon=function(t,e){return new r.Polygon(t,e)},function(){function t(t){return r.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var n=0,i=e.length;for(this.eachLayer(function(t){i>n?t.setLatLngs(e[n++]):this.removeLayer(t)},this);i>n;)this.addLayer(new t(e[n++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}r.MultiPolyline=t(r.Polyline),r.MultiPolygon=t(r.Polygon),r.multiPolyline=function(t,e){return new r.MultiPolyline(t,e)},r.multiPolygon=function(t,e){return new r.MultiPolygon(t,e)}}(),r.Rectangle=r.Polygon.extend({initialize:function(t,e){r.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=r.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),r.rectangle=function(t,e){return new r.Rectangle(t,e)},r.Circle=r.Path.extend({initialize:function(t,e,n){r.Path.prototype.initialize.call(this,n),this._latlng=r.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=r.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,n=this._latlng;return new r.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":r.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(r.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),r.circle=function(t,e,n){return new r.Circle(t,e,n)},r.CircleMarker=r.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){r.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){r.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return r.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),r.circleMarker=function(t,e){return new r.CircleMarker(t,e)},r.Polyline.include(r.Path.CANVAS?{_containsPoint:function(t,e){var n,i,o,s,a,u,l,c=this.options.weight/2;for(r.Browser.touch&&(c+=10),n=0,s=this._parts.length;s>n;n++)for(l=this._parts[n],i=0,a=l.length,o=a-1;a>i;o=i++)if((e||0!==i)&&(u=r.LineUtil.pointToSegmentDistance(t,l[o],l[i]),c>=u))return!0;return!1}}:{}),r.Polygon.include(r.Path.CANVAS?{_containsPoint:function(t){var e,n,i,o,s,a,u,l,c=!1;if(r.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(o=0,u=this._parts.length;u>o;o++)for(e=this._parts[o],s=0,l=e.length,a=l-1;l>s;a=s++)n=e[s],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c}}:{}),r.Circle.include(r.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+n}}:{}),r.CircleMarker.include(r.Path.CANVAS?{_updateStyle:function(){r.Path.prototype._updateStyle.call(this)}}:{}),r.GeoJSON=r.FeatureGroup.extend({initialize:function(t,e){r.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=r.Util.isArray(t)?t:t.features;if(o){for(e=0,n=o.length;n>e;e++)i=o[e],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(o[e]);return this}var s=this.options;if(!s.filter||s.filter(t)){var a=r.GeoJSON.geometryToLayer(t,s.pointToLayer,s.coordsToLatLng,s);return a.feature=r.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(r.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),r.extend(r.GeoJSON,{geometryToLayer:function(t,e,n,i){var o,s,a,u,l="Feature"===t.type?t.geometry:t,c=l.coordinates,h=[];switch(n=n||this.coordsToLatLng,l.type){case"Point":return o=n(c),e?e(t,o):new r.Marker(o);case"MultiPoint":for(a=0,u=c.length;u>a;a++)o=n(c[a]),h.push(e?e(t,o):new r.Marker(o));return new r.FeatureGroup(h);case"LineString":return s=this.coordsToLatLngs(c,0,n),new r.Polyline(s,i);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return s=this.coordsToLatLngs(c,1,n),new r.Polygon(s,i);case"MultiLineString":return s=this.coordsToLatLngs(c,1,n),new r.MultiPolyline(s,i);case"MultiPolygon":return s=this.coordsToLatLngs(c,2,n),new r.MultiPolygon(s,i);case"GeometryCollection":for(a=0,u=l.geometries.length;u>a;a++)h.push(this.geometryToLayer({geometry:l.geometries[a],type:"Feature",properties:t.properties},e,n,i));return new r.FeatureGroup(h);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new r.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){var i,o,r,s=[];for(o=0,r=t.length;r>o;o++)i=e?this.coordsToLatLngs(t[o],e-1,n):(n||this.coordsToLatLng)(t[o]),s.push(i);return s},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==i&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push(r.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?r.extend({},t.feature,{geometry:e}):r.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var a={toGeoJSON:function(){return r.GeoJSON.getFeature(this,{type:"Point",coordinates:r.GeoJSON.latLngToCoords(this.getLatLng())})}};r.Marker.include(a),r.Circle.include(a),r.CircleMarker.include(a),r.Polyline.include({toGeoJSON:function(){return r.GeoJSON.getFeature(this,{type:"LineString",coordinates:r.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),r.Polygon.include({toGeoJSON:function(){var t,e,n,i=[r.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(t=0,e=this._holes.length;e>t;t++)n=r.GeoJSON.latLngsToCoords(this._holes[t]),n.push(n[0]),i.push(n);return r.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),r.GeoJSON.getFeature(this,{type:t,coordinates:e})}}r.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),r.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),r.LayerGroup.include({toGeoJSON:function(){var e,n=this.feature&&this.feature.geometry,i=[];if(n&&"MultiPoint"===n.type)return t("MultiPoint").call(this);var o=n&&"GeometryCollection"===n.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),i.push(o?e.geometry:r.GeoJSON.asFeature(e)))}),o?r.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}})}(),r.geoJson=function(t,e){return new r.GeoJSON(t,e)},r.DomEvent={addListener:function(t,e,n,i){var o,s,a,u=r.stamp(n),l="_leaflet_"+e+u;return t[l]?this:(o=function(e){return n.call(i||t,e||r.DomEvent._getEvent())},r.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,o,u):(r.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,o,u),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1)):"mouseenter"===e||"mouseleave"===e?(s=o,a="mouseenter"===e?"mouseover":"mouseout",o=function(e){return r.DomEvent._checkMouse(t,e)?s(e):void 0},t.addEventListener(a,o,!1)):"click"===e&&r.Browser.android?(s=o,o=function(t){return r.DomEvent._filterClick(t,s)},t.addEventListener(e,o,!1)):t.addEventListener(e,o,!1):"attachEvent"in t&&t.attachEvent("on"+e,o),t[l]=o,this))},removeListener:function(t,e,n){var i=r.stamp(n),o="_leaflet_"+e+i,s=t[o];return s?(r.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):r.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",s,!1),t.removeEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1):t.removeEventListener(e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[o]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,r.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=r.DomEvent.stopPropagation;return r.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=r.DomEvent.stopPropagation,n=r.Draggable.START.length-1;n>=0;n--)r.DomEvent.on(t,r.Draggable.START[n],e);return r.DomEvent.on(t,"click",r.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return r.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new r.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new r.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){r.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t},_getEvent:function(){var e=t.event;if(!e)for(var n=arguments.callee.caller;n&&(e=n.arguments[0],!e||t.Event!==e.constructor);)n=n.caller;return e},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,i=r.DomEvent._lastClick&&n-r.DomEvent._lastClick;return i&&i>100&&500>i||t.target._simulatedClick&&!t._simulated?void r.DomEvent.stop(t):(r.DomEvent._lastClick=n,e(t))}},r.DomEvent.on=r.DomEvent.addListener,r.DomEvent.off=r.DomEvent.removeListener,r.Draggable=r.Class.extend({includes:r.Mixin.Events,statics:{START:r.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=r.Draggable.START.length-1;t>=0;t--)r.DomEvent.on(this._dragStartTarget,r.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=r.Draggable.START.length-1;t>=0;t--)r.DomEvent.off(this._dragStartTarget,r.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(r.DomEvent.stopPropagation(t),!r.Draggable._disabled&&(r.DomUtil.disableImageDrag(),r.DomUtil.disableTextSelection(),!this._moving))){var e=t.touches?t.touches[0]:t;this._startPoint=new r.Point(e.clientX,e.clientY),this._startPos=this._newPos=r.DomUtil.getPosition(this._element),r.DomEvent.on(n,r.Draggable.MOVE[t.type],this._onMove,this).on(n,r.Draggable.END[t.type],this._onUp,this);
}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new r.Point(e.clientX,e.clientY),o=i.subtract(this._startPoint);(o.x||o.y)&&(r.Browser.touch&&Math.abs(o.x)+Math.abs(o.y)<3||(r.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=r.DomUtil.getPosition(this._element).subtract(o),r.DomUtil.addClass(n.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,r.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),r.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){r.DomUtil.removeClass(n.body,"leaflet-dragging"),this._lastTarget&&(r.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in r.Draggable.MOVE)r.DomEvent.off(n,r.Draggable.MOVE[t],this._onMove).off(n,r.Draggable.END[t],this._onUp);r.DomUtil.enableImageDrag(),r.DomUtil.enableTextSelection(),this._moved&&this._moving&&(r.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),r.Handler=r.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),r.Map.mergeOptions({dragging:!0,inertia:!r.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:r.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),r.Map.Drag=r.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new r.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,s=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=+new Date-this._lastTime,o=!n.inertia||i>n.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),o)e.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])/1e3,u=n.easeLinearity,l=s.multiplyBy(u/a),c=l.distanceTo([0,0]),h=Math.min(n.inertiaMaxSpeed,c),d=l.multiplyBy(h/c),f=h/(n.inertiaDeceleration*u),p=d.multiplyBy(-f/2).round();p.x&&p.y?(p=e._limitOffset(p,e.options.maxBounds),r.Util.requestAnimFrame(function(){e.panBy(p,{duration:f,easeLinearity:u,noMoveStart:!0})})):e.fire("moveend")}}}),r.Map.addInitHook("addHandler","dragging",r.Map.Drag),r.Map.mergeOptions({doubleClickZoom:!0}),r.Map.DoubleClickZoom=r.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),r.Map.addInitHook("addHandler","doubleClickZoom",r.Map.DoubleClickZoom),r.Map.mergeOptions({scrollWheelZoom:!0}),r.Map.ScrollWheelZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),r.DomEvent.on(this._map._container,"MozMousePixelScroll",r.DomEvent.preventDefault),this._delta=0},removeHooks:function(){r.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),r.DomEvent.off(this._map._container,"MozMousePixelScroll",r.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=r.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r.bind(this._performZoom,this),n),r.DomEvent.preventDefault(t),r.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(n+e):t.setZoomAround(this._lastMousePos,n+e))}}),r.Map.addInitHook("addHandler","scrollWheelZoom",r.Map.ScrollWheelZoom),r.extend(r.DomEvent,{_touchstart:r.Browser.msPointer?"MSPointerDown":r.Browser.pointer?"pointerdown":"touchstart",_touchend:r.Browser.msPointer?"MSPointerUp":r.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,i){function o(t){var e;if(r.Browser.pointer?(p.push(t.pointerId),e=p.length):e=t.touches.length,!(e>1)){var n=Date.now(),i=n-(a||n);u=t.touches?t.touches[0]:t,l=i>0&&c>=i,a=n}}function s(t){if(r.Browser.pointer){var n=p.indexOf(t.pointerId);if(-1===n)return;p.splice(n,1)}if(l){if(r.Browser.pointer){var i,o={};for(var s in u)i=u[s],"function"==typeof i?o[s]=i.bind(u):o[s]=i;u=o}u.type="dblclick",e(u),a=null}}var a,u,l=!1,c=250,h="_leaflet_",d=this._touchstart,f=this._touchend,p=[];t[h+d+i]=o,t[h+f+i]=s;var m=r.Browser.pointer?n.documentElement:t;return t.addEventListener(d,o,!1),m.addEventListener(f,s,!1),r.Browser.pointer&&m.addEventListener(r.DomEvent.POINTER_CANCEL,s,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_";return t.removeEventListener(this._touchstart,t[i+this._touchstart+e],!1),(r.Browser.pointer?n.documentElement:t).removeEventListener(this._touchend,t[i+this._touchend+e],!1),r.Browser.pointer&&n.documentElement.removeEventListener(r.DomEvent.POINTER_CANCEL,t[i+this._touchend+e],!1),this}}),r.extend(r.DomEvent,{POINTER_DOWN:r.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:r.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:r.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:r.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,n,i){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,n,i);case"touchend":return this.addPointerListenerEnd(t,e,n,i);case"touchmove":return this.addPointerListenerMove(t,e,n,i);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,e,i,o){var s="_leaflet_",a=this._pointers,u=function(t){"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&r.DomEvent.preventDefault(t);for(var e=!1,n=0;n<a.length;n++)if(a[n].pointerId===t.pointerId){e=!0;break}e||a.push(t),t.touches=a.slice(),t.changedTouches=[t],i(t)};if(t[s+"touchstart"+o]=u,t.addEventListener(this.POINTER_DOWN,u,!1),!this._pointerDocumentListener){var l=function(t){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}};n.documentElement.addEventListener(this.POINTER_UP,l,!1),n.documentElement.addEventListener(this.POINTER_CANCEL,l,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,n,i){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s[e]=t;break}t.touches=s.slice(),t.changedTouches=[t],n(t)}}var r="_leaflet_",s=this._pointers;return t[r+"touchmove"+i]=o,t.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(t,e,n,i){var o="_leaflet_",r=this._pointers,s=function(t){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r.splice(e,1);break}t.touches=r.slice(),t.changedTouches=[t],n(t)};return t[o+"touchend"+i]=s,t.addEventListener(this.POINTER_UP,s,!1),t.addEventListener(this.POINTER_CANCEL,s,!1),this},removePointerListener:function(t,e,n){var i="_leaflet_",o=t[i+e+n];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,o,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,o,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,o,!1),t.removeEventListener(this.POINTER_CANCEL,o,!1)}return this}}),r.Map.mergeOptions({touchZoom:r.Browser.touch&&!r.Browser.android23,bounceAtZoomLimits:!0}),r.Map.TouchZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){r.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),o=e.mouseEventToLayerPoint(t.touches[1]),s=e._getCenterLayerPoint();this._startCenter=i.add(o)._divideBy(2),this._startDist=i.distanceTo(o),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),e._panAnim&&e._panAnim.stop(),r.DomEvent.on(n,"touchmove",this._onTouchMove,this).on(n,"touchend",this._onTouchEnd,this),r.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!e.options.bounceAtZoomLimits&&(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1)||(this._moved||(r.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),r.DomEvent.preventDefault(t)))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getScaleZoom(this._scale);t._animateZoom(n,i,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,r.DomUtil.removeClass(t._mapPane,"leaflet-touching"),r.Util.cancelAnimFrame(this._animRequest),r.DomEvent.off(n,"touchmove",this._onTouchMove).off(n,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),o=t.getZoom(),s=t.getScaleZoom(this._scale)-o,a=s>0?Math.ceil(s):Math.floor(s),u=t._limitZoom(o+a),l=t.getZoomScale(u)/this._scale;t._animateZoom(i,u,e,l)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),r.Map.addInitHook("addHandler","touchZoom",r.Map.TouchZoom),r.Map.mergeOptions({tap:!0,tapTolerance:15}),r.Map.Tap=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){r.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(r.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new r.Point(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&r.DomUtil.addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(r.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),r.DomEvent.on(n,"touchmove",this._onMove,this).on(n,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),r.DomEvent.off(n,"touchmove",this._onMove,this).off(n,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&r.DomUtil.removeClass(i,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new r.Point(e.clientX,e.clientY)},_simulateEvent:function(e,i){var o=n.createEvent("MouseEvents");o._simulated=!0,i.target._simulatedClick=!0,o.initMouseEvent(e,!0,!0,t,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(o)}}),r.Browser.touch&&!r.Browser.pointer&&r.Map.addInitHook("addHandler","tap",r.Map.Tap),r.Map.mergeOptions({boxZoom:!0}),r.Map.BoxZoom=r.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){r.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){r.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button?!1:(r.DomUtil.disableTextSelection(),r.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void r.DomEvent.on(n,"mousemove",this._onMouseMove,this).on(n,"mouseup",this._onMouseUp,this).on(n,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=r.DomUtil.create("div","leaflet-zoom-box",this._pane),r.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(t),o=i.subtract(e),s=new r.Point(Math.min(i.x,e.x),Math.min(i.y,e.y));r.DomUtil.setPosition(n,s),this._moved=!0,n.style.width=Math.max(0,Math.abs(o.x)-4)+"px",n.style.height=Math.max(0,Math.abs(o.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),r.DomUtil.enableTextSelection(),r.DomUtil.enableImageDrag(),r.DomEvent.off(n,"mousemove",this._onMouseMove).off(n,"mouseup",this._onMouseUp).off(n,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var i=new r.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(i),e.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),r.Map.addInitHook("addHandler","boxZoom",r.Map.BoxZoom),r.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),r.Map.Keyboard=r.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),r.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;r.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var e=n.body,i=n.documentElement,o=e.scrollTop||i.scrollTop,r=e.scrollLeft||i.scrollLeft;this._map._container.focus(),t.scrollTo(r,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;n>e;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;n>e;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;n>e;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;n>e;e++)i[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;n>e;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;n>e;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){r.DomEvent.on(n,"keydown",this._onKeyDown,this)},_removeHooks:function(){r.DomEvent.off(n,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}r.DomEvent.stop(t)}}),r.Map.addInitHook("addHandler","keyboard",r.Map.Keyboard),r.Handler.MarkerDrag=r.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new r.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),r.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),r.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=r.DomUtil.getPosition(t._icon),i=t._map.layerPointToLatLng(n);e&&r.DomUtil.setPosition(e,n),t._latlng=i,t.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),r.Control=r.Class.extend({options:{position:"topright"},initialize:function(t){r.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return r.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),n=t._controlCorners[e];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),r.control=function(t){return new r.Control(t)},r.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,o){var s=n+t+" "+n+o;e[t+o]=r.DomUtil.create("div",s,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=r.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),r.Control.Zoom=r.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=r.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,i,o,s){var a=r.DomUtil.create("a",n,i);a.innerHTML=t,a.href="#",a.title=e;var u=r.DomEvent.stopPropagation;return r.DomEvent.on(a,"click",u).on(a,"mousedown",u).on(a,"dblclick",u).on(a,"click",r.DomEvent.preventDefault).on(a,"click",o,s).on(a,"click",this._refocusOnMap,s),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";r.DomUtil.removeClass(this._zoomInButton,e),r.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&r.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&r.DomUtil.addClass(this._zoomInButton,e)}}),r.Map.mergeOptions({zoomControl:!0}),r.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new r.Control.Zoom,this.addControl(this.zoomControl))}),r.control.zoom=function(t){return new r.Control.Zoom(t)},r.Control.Attribution=r.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){r.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=r.DomUtil.create("div","leaflet-control-attribution"),r.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),r.Map.mergeOptions({attributionControl:!0}),r.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new r.Control.Attribution).addTo(this))}),r.control.attribution=function(t){return new r.Control.Attribution(t)},r.Control.Scale=r.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=r.DomUtil.create("div",e),i=this.options;return this._addScales(i,e,n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=r.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=r.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180),i=n*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),r=this.options,s=0;o.x>0&&(s=i*(r.maxWidth/o.x)),this._updateScales(r,s)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,n,i,o=3.2808399*t,r=this._iScale;o>5280?(e=o/5280,n=this._getRoundNum(e),r.style.width=this._getScaleWidth(n/e)+"px",r.innerHTML=n+" mi"):(i=this._getRoundNum(o),r.style.width=this._getScaleWidth(i/o)+"px",r.innerHTML=i+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),r.control.scale=function(t){return new r.Control.Scale(t)},r.Control.Layers=r.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){r.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=r.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=r.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),r.Browser.touch?r.DomEvent.on(e,"click",r.DomEvent.stopPropagation):r.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var n=this._form=r.DomUtil.create("form",t+"-list");if(this.options.collapsed){r.Browser.android||r.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var i=this._layersLink=r.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",r.Browser.touch?r.DomEvent.on(i,"click",r.DomEvent.stop).on(i,"click",this._expand,this):r.DomEvent.on(i,"focus",this._expand,this),r.DomEvent.on(n,"click",function(){setTimeout(r.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=r.DomUtil.create("div",t+"-base",n),this._separator=r.DomUtil.create("div",t+"-separator",n),this._overlaysList=r.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var i=r.stamp(t);this._layers[i]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,n=!1,i=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),i=i||e.overlay,n=n||!e.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(t){var e=this._layers[r.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';e&&(i+=' checked="checked"'),i+="/>";var o=n.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(t){var e,i=n.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?(e=n.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers",o),e.layerId=r.stamp(t.layer),r.DomEvent.on(e,"click",this._onInputClick,this);var s=n.createElement("span");s.innerHTML=" "+t.name,i.appendChild(e),i.appendChild(s);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(i),i},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),o=i.length;for(this._handlingClick=!0,t=0;o>t;t++)e=i[t],n=this._layers[e.layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){r.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),r.control.layers=function(t,e,n){return new r.Control.Layers(t,e,n)},r.PosAnimation=r.Class.extend({includes:r.Mixin.Events,run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[r.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",r.DomEvent.on(t,r.DomUtil.TRANSITION_END,this._onTransitionEnd,this),r.DomUtil.setPosition(t,e),r.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(r.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(r.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),r.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,n,i,o=this._el,s=t.getComputedStyle(o);if(r.Browser.any3d){if(i=s[r.DomUtil.TRANSFORM].match(this._transformRe),!i)return;e=parseFloat(i[1]),n=parseFloat(i[2])}else e=parseFloat(s.left),n=parseFloat(s.top);return new r.Point(e,n,!0)},_onTransitionEnd:function(){r.DomEvent.off(this._el,r.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[r.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),r.Map.include({setView:function(t,e,n){if(e=e===i?this._zoom:this._limitZoom(e),t=this._limitCenter(r.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=r.extend({animate:n.animate},n.zoom),n.pan=r.extend({animate:n.animate},n.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=r.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new r.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){r.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){r.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(n)?(this.panBy(n,e),!0):!1}}),r.PosAnimation=r.DomUtil.TRANSITION?r.PosAnimation:r.PosAnimation.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=r.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=r.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));r.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){r.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),r.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4
}),r.DomUtil.TRANSITION&&r.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&r.DomUtil.TRANSITION&&r.Browser.any3d&&!r.Browser.android23&&!r.Browser.mobileOpera,this._zoomAnimated&&r.DomEvent.on(this._mapPane,r.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),r.Map.include(r.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i),r=this._getCenterLayerPoint()._add(o);return n.animate===!0||this.getSize().contains(o)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,r,i,null,!0),!0):!1},_animateZoom:function(t,e,n,i,o,s,a){a||(this._animatingZoom=!0),r.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,r.Draggable&&(r.Draggable._disabled=!0),r.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:i,delta:o,backwards:s}),setTimeout(r.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,r.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),r.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),r.Draggable&&(r.Draggable._disabled=!1)},this))}}:{}),r.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=r.DomUtil.TRANSFORM,i=t.delta?r.DomUtil.getTranslateString(t.delta):e.style[n],o=r.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?o+" "+i:i+" "+o},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),r.Util.falseFn(e.offsetWidth);var n=this._map.getZoom();(n>this.options.maxZoom||n<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[r.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),i=this._getLoadedTilesPercentage(t);return e&&n>.5&&.5>i?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[r.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(t){var e,n,i=t.getElementsByTagName("img"),o=0;for(e=0,n=i.length;n>e;e++)i[e].complete&&o++;return o/n},_stopLoadingImages:function(t){var e,n,i,o=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,n=o.length;n>e;e++)i=o[e],i.complete||(i.onload=r.Util.falseFn,i.onerror=r.Util.falseFn,i.src=r.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),r.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=r.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=r.bind(this._handleGeolocationResponse,this),n=r.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new r.LatLng(e,n),o=180*t.coords.accuracy/40075017,s=o/Math.cos(r.LatLng.DEG_TO_RAD*e),a=r.latLngBounds([e-o,n-s],[e+o,n+s]),u=this._locateOptions;if(u.setView){var l=Math.min(this.getBoundsZoom(a),u.maxZoom);this.setView(i,l)}var c={latlng:i,bounds:a,timestamp:t.timestamp};for(var h in t.coords)"number"==typeof t.coords[h]&&(c[h]=t.coords[h]);this.fire("locationfound",c)}})}(window,document)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/leaflet/dist/leaflet-src.js","/node_modules/leaflet/dist")},{_process:53,buffer:17}],49:[function(t,e,n){(function(e,n,i,o,r,s,a,u,l){!function c(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof t&&t;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return o(n?n:t)},h,h.exports,c,e,n,i)}return n[s].exports}for(var r="function"==typeof t&&t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){function i(t,e,n){function i(t){return t>=200&&300>t||304===t}function o(){void 0===a.status||i(a.status)?e.call(a,null,a):e.call(a,a,null)}var r=!1;if("undefined"==typeof window.XMLHttpRequest)return e(Error("Browser not supported"));if("undefined"==typeof n){var s=t.match(/^\s*https?:\/\/[^\/]*/);n=s&&s[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var a=new window.XMLHttpRequest;if(n&&!("withCredentials"in a)){a=new window.XDomainRequest;var u=e;e=function(){if(r)u.apply(this,arguments);else{var t=this,e=arguments;setTimeout(function(){u.apply(t,e)},0)}}}return"onload"in a?a.onload=o:a.onreadystatechange=function(){4===a.readyState&&o()},a.onerror=function(t){e.call(this,t||!0,null),e=function(){}},a.onprogress=function(){},a.ontimeout=function(t){e.call(this,t,null),e=function(){}},a.onabort=function(t){e.call(this,t,null),e=function(){}},a.open("GET",t,!0),a.send(null),r=!0,a}"undefined"!=typeof e&&(e.exports=i)},{}],2:[function(t,e,n){function i(t,e){t=Math.round(t*e),t<<=1,0>t&&(t=~t);for(var n="";t>=32;)n+=String.fromCharCode((32|31&t)+63),t>>=5;return n+=String.fromCharCode(t+63)}var o={};o.decode=function(t,e){for(var n,i,o=0,r=0,s=0,a=[],u=0,l=0,c=null,h=Math.pow(10,e||5);o<t.length;){c=null,u=0,l=0;do c=t.charCodeAt(o++)-63,l|=(31&c)<<u,u+=5;while(c>=32);n=1&l?~(l>>1):l>>1,u=l=0;do c=t.charCodeAt(o++)-63,l|=(31&c)<<u,u+=5;while(c>=32);i=1&l?~(l>>1):l>>1,r+=n,s+=i,a.push([r/h,s/h])}return a},o.encode=function(t,e){if(!t.length)return"";for(var n=Math.pow(10,e||5),o=i(t[0][0],n)+i(t[0][1],n),r=1;r<t.length;r++){var s=t[r],a=t[r-1];o+=i(s[0]-a[0],n),o+=i(s[1]-a[1],n)}return o},void 0!==typeof e&&(e.exports=o)},{}],3:[function(t,e,i){(function(n){!function(){"use strict";var i="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,o=t("corslite"),r=t("polyline");i.Routing=i.Routing||{},i.Routing.Mapzen=i.Class.extend({options:{timeout:3e4},initialize:function(t,e){i.Util.setOptions(this,e),this._accessToken=t,this._hints={locations:{}}},route:function(t,e,n,r){var s,a,u,l,c=!1,h=[],d={};for(d=this.options||{},s=this.buildRouteUrl(t,d),a=setTimeout(function(){c=!0,e.call(n||e,{status:-1,message:"Time out."})},this.options.timeout),l=0;l<t.length;l++)u=t[l],h.push({latLng:u.latLng,name:u.name||"",options:u.options||{}});return o(s,i.bind(function(t,i){var o;clearTimeout(a),c||(t?e.call(n||e,{status:t.status,message:t.response}):(o=JSON.parse(i.responseText),this._routeDone(o,h,d,e,n)))},this),!0),this},_routeDone:function(t,e,n,i,o){var s,a,u,l;if(o=o||i,0!==t.trip.status)return void i.call(o,{status:t.status,message:t.status_message});for(var c=[],s=[],h=0,l=0;l<t.trip.legs.length;l++){for(var d=r.decode(t.trip.legs[l].shape,6),f=0;f<d.length;f++)s.push(d[f]);for(var p=0;p<t.trip.legs[l].maneuvers.length;p++){var m=t.trip.legs[l].maneuvers[p];m.distance=t.trip.legs[l].maneuvers[p].length,m.index=h+t.trip.legs[l].maneuvers[p].begin_shape_index,c.push(m)}"multimodal"===n.costing&&(c=this._unifyTransitManeuver(c)),h+=t.trip.legs[l].maneuvers[t.trip.legs[l].maneuvers.length-1].begin_shape_index}u=this._toWaypoints(e,t.trip.locations);var g;"multimodal"==n.costing&&(g=this._getSubRoutes(t.trip.legs)),a=[{name:this._trimLocationKey(e[0].latLng)+" , "+this._trimLocationKey(e[1].latLng),unit:t.trip.units,costing:n.costing,coordinates:s,subRoutes:g,instructions:c,summary:t.trip.summary?this._convertSummary(t.trip.summary):[],inputWaypoints:e,waypoints:u,waypointIndices:this._clampIndices([0,t.trip.legs[0].maneuvers.length],s)}],t.hint_data&&this._saveHintData(t.hint_data,e),i.call(o,null,a)},_unifyTransitManeuver:function(t){for(var e,n=t,i=0;i<n.length;i++)if(30==n[i].type){e=n[i].travel_type;break}for(var o=0;o<n.length;o++)n[o].type>29&&(n[o].edited_travel_type=e);return n},_getSubRoutes:function(t){for(var e=[],n=0;n<t.length;n++){for(var i,o=r.decode(t[n].shape,6),s=[],a=0;a<t[n].maneuvers.length;a++){var u=t[n].maneuvers[a],l=u.travel_type;l===i&&31!==u.type||(u.begin_shape_index>0&&s.push(u.begin_shape_index),u.transit_info?e.push({travel_type:l,styles:this._getPolylineColor(u.transit_info.color)}):e.push({travel_type:l})),i=l}s.push(o.length);for(var c=0,h=0;h<s.length;h++){var d=[],f=0;h!==s.length-1&&(f=1);for(var p=c;p<s[h]+f;p++)d.push(o[p]);var m=d;c=s[h],e[h].coordinates=m}}return e},_getPolylineColor:function(t){var e=t>>16&255,n=t>>8&255,i=t>>0&255,o=.299*e+.587*n+.114*i,r=o>187,s=16777216|16777215&t,a=s.toString(16).substring(1,7),u=[r?{color:"#000",opacity:.4,weight:10}:{color:"#fff",opacity:.8,weight:10},{color:"#"+a.toUpperCase(),opacity:1,weight:6}];return u},_saveHintData:function(t,e){var n;this._hints={checksum:t.checksum,locations:{}};for(var i=t.locations.length-1;i>=0;i--)n=e[i].latLng,this._hints.locations[this._locationKey(n)]=t.locations[i]},_toWaypoints:function(t,e){var n,o=[];for(n=0;n<e.length;n++)o.push(i.Routing.waypoint(i.latLng([e[n].lat,e[n].lon]),"name",{}));return o},buildRouteUrl:function(t,e){for(var n,i="https://valhalla.mapzen.com",o=[],r=e.costing,s=e.costing_options,a=e.directions_options,u=e.date_time,l=0;l<t.length;l++){var c;n=this._locationKey(t[l].latLng).split(","),c=0===l||l===t.length-1?{lat:parseFloat(n[0]),lon:parseFloat(n[1]),type:"break"}:{lat:parseFloat(n[0]),lon:parseFloat(n[1]),type:"through"},o.push(c)}var h=JSON.stringify({locations:o,costing:r,costing_options:s,directions_options:a,date_time:u});return i+"/route?json="+h+"&api_key="+this._accessToken},_locationKey:function(t){return t.lat+","+t.lng},_trimLocationKey:function(t){var e=(t.lat,t.lng,Math.floor(1e3*t.lat)/1e3),n=Math.floor(1e3*t.lng)/1e3;return e+" , "+n},_convertSummary:function(t){return{totalDistance:t.length,totalTime:t.time}},_convertInstructions:function(t){var e,n,i,o,r=[];for(e=0;e<t.length;e++)n=t[e],i=this._drivingDirectionType(n[0]),o=n[0].split("-"),i&&r.push({type:i,distance:n[2],time:n[4],road:n[1],direction:n[6],exit:o.length>1?o[1]:void 0,index:n[3]});return r},_clampIndices:function(t,e){var n,i=e.length-1;for(n=0;n<t.length;n++)t[n]=Math.min(i,Math.max(t[n],0))}}),i.Routing.mapzen=function(t,e){return new i.Routing.Mapzen(t,e)},e.exports=i.Routing.Mapzen}()}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{corslite:1,polyline:2}],4:[function(t,e,i){(function(t){!function(){"use strict";var n="undefined"!=typeof window?window.L:"undefined"!=typeof t?t.L:null;n.Routing=n.Routing||{},n.Routing.MapzenFormatter=n.Class.extend({options:{units:"metric",unitNames:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"mín",seconds:"s"},language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(t){n.setOptions(this,t)},formatDistance:function(t){var e,i,o=this.options.unitNames;return"imperial"===this.options.units?(t=1e3*t,t/=1.609344,i=t>=1e3?{value:this._round(t)/1e3,unit:o.miles}:{value:this._round(t/1.76),unit:o.yards}):(e=t,i={value:e>=1?e:1e3*e,unit:e>=1?o.kilometers:o.meters}),n.Util.template(this.options.distanceTemplate,i)},_round:function(t){var e=Math.pow(10,(Math.floor(t/this.options.roundingSensitivity)+"").length-1),n=Math.floor(t/e),i=n>5?e:e/2;return Math.round(t/i)*i},formatTime:function(t){return t>86400?Math.round(t/3600)+" h":t>3600?Math.floor(t/3600)+" h "+Math.round(t%3600/60)+" min":t>300?Math.round(t/60)+" min":t>60?Math.floor(t/60)+" min"+(t%60!==0?" "+t%60+" s":""):t+" s"},formatInstruction:function(t,e){return t.instruction},getIconName:function(t,e){switch(t.type){case 0:return"kNone";case 1:return"kStart";case 2:return"kStartRight";case 3:return"kStartLeft";case 4:return"kDestination";case 5:return"kDestinationRight";case 6:return"kDestinationLeft";case 7:return"kBecomes";case 8:return"kContinue";case 9:return"kSlightRight";case 10:return"kRight";case 11:return"kSharpRight";case 12:return"kUturnRight";case 13:return"kUturnLeft";case 14:return"kSharpLeft";case 15:return"kLeft";case 16:return"kSlightLeft";case 17:return"kRampStraight";case 18:return"kRampRight";case 19:return"kRampLeft";case 20:return"kExitRight";case 21:return"kExitLeft";case 22:return"kStayStraight";case 23:return"kStayRight";case 24:return"kStayLeft";case 25:return"kMerge";case 26:return"kRoundaboutEnter";case 27:return"kRoundaboutExit";case 28:return"kFerryEnter";case 29:return"kFerryExit";case 30:case 31:case 32:case 33:case 34:case 35:case 36:return t.edited_travel_type?"kTransit"+this._getCapitalizedName(t.edited_travel_type):"kTransit"}},_getInstructionTemplate:function(t,e){return t.instruction+" "+t.length},_getCapitalizedName:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}),n.Routing.mapzenFormatter=function(){return new n.Routing.MapzenFormatter},e.exports=n.Routing}()}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,i){(function(t){!function(){"use strict";var n="undefined"!=typeof window?window.L:"undefined"!=typeof t?t.L:null;n.Routing=n.Routing||{},n.Routing.MapzenLine=n.LayerGroup.extend({includes:n.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(t,e){if(n.setOptions(this,e),n.LayerGroup.prototype.initialize.call(this,e),this._route=t,this.options.extendToWaypoints&&this._extendToWaypoints(),t.subRoutes)for(var i=0;i<t.subRoutes.length;i++)t.subRoutes[i].styles||(t.subRoutes[i].styles=this.options.styles),this._addSegment(t.subRoutes[i].coordinates,t.subRoutes[i].styles,this.options.addWaypoints);else this._addSegment(t.coordinates,this.options.styles,this.options.addWaypoints)},addTo:function(t){return t.addLayer(this),this},getBounds:function(){return n.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var t,e=this._route.inputWaypoints,n=[];for(t=0;t<e.length;t++)n.push(this._findClosestRoutePoint(e[t].latLng));return n},_findClosestRoutePoint:function(t){var e,n,i,o=Number.MAX_VALUE;for(n=this._route.coordinates.length-1;n>=0;n--)i=t.distanceTo(this._route.coordinates[n]),o>i&&(e=n,o=i);return e},_extendToWaypoints:function(){var t,e,i,o=this._route.inputWaypoints,r=this._getWaypointIndices();for(t=0;t<o.length;t++)e=o[t].latLng,i=n.latLng(this._route.coordinates[r[t]]),e.distanceTo(i)>this.options.missingRouteTolerance&&this._addSegment([e,i],this.options.missingRouteStyles)},_addSegment:function(t,e,i){var o,r;for(o=0;o<e.length;o++)r=n.polyline(t,e[o]),this.addLayer(r),i&&r.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(t){for(var e=this._getWaypointIndices(),n=e.length-1;n>=0&&e[n]>t;)n--;return n},_onLineTouched:function(t){var e=this._findNearestWpBefore(this._findClosestRoutePoint(t.latlng));this.fire("linetouched",{afterIndex:e,latlng:t.latlng})},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}}),n.Routing.mapzenLine=function(t,e){return new n.Routing.MapzenLine(t,e)},e.exports=n.Routing}()}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[3,4,5])}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/lrm-mapzen/dist/lrm-mapzen.min.js","/node_modules/lrm-mapzen/dist")},{_process:53,buffer:17,corslite:18,polyline:52}],50:[function(t,e,n){(function(t,n,i,o,r,s,a,u,l){e.exports=function(t){var e={},n=[];t=t||this,t.on=function(t,n,i){(e[t]=e[t]||[]).push([n,i])},t.off=function(t,i){t||(e={});for(var o=e[t]||n,r=o.length=i?o.length:0;r--;)i==o[r][0]&&o.splice(r,1)},t.emit=function(t){for(var i,o=e[t]||n,r=o.length>0?o.slice(0,o.length):o,s=0;i=r[s++];)i[0].apply(i[1],n.slice.call(arguments,1))}}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/minivents/dist/minivents.commonjs.min.js","/node_modules/minivents/dist")},{_process:53,buffer:17}],51:[function(require,module,exports){(function(process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(t,e){var n,i,o,r;for("undefined"==typeof e&&(e=15),o=.5,n=new Date;;){for(o*=2,r=o;r>3;r-=4)t(),t(),t(),t();for(;r>0;)t(),r--;if(i=new Date,i-n>e)break}for(r=o;r>3;r-=4)t(),t(),t(),t();for(;r>0;)t(),r--;return i=new Date,1e3*(3*o-1)/(i-n)},numeric._myIndexOf=function(t){var e,n=this.length;for(e=0;n>e;++e)if(this[e]===t)return e;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(t){function e(t){if(0===t)return"0";if(isNaN(t))return"NaN";if(0>t)return"-"+e(-t);if(isFinite(t)){var n=Math.floor(Math.log(t)/Math.log(10)),i=t/Math.pow(10,n),o=i.toPrecision(numeric.precision);return 10===parseFloat(o)&&(n++,i=1,o=i.toPrecision(numeric.precision)),parseFloat(o).toString()+"e"+n.toString()}return"Infinity"}function n(t){var o;if("undefined"==typeof t)return i.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof t)return i.push('"'+t+'"'),!1;if("boolean"==typeof t)return i.push(t.toString()),!1;if("number"==typeof t){var r=e(t),s=t.toPrecision(numeric.precision),a=parseFloat(t.toString()).toString(),u=[r,s,a,parseFloat(s).toString(),parseFloat(a).toString()];for(o=1;o<u.length;o++)u[o].length<r.length&&(r=u[o]);return i.push(Array(numeric.precision+8-r.length).join(" ")+r),!1}if(null===t)return i.push("null"),!1;if("function"==typeof t){i.push(t.toString());var l=!1;for(o in t)t.hasOwnProperty(o)&&(l?i.push(",\n"):i.push("\n{"),l=!0,i.push(o),i.push(": \n"),n(t[o]));return l&&i.push("}\n"),!0}if(t instanceof Array){if(t.length>numeric.largeArray)return i.push("...Large Array..."),!0;var l=!1;for(i.push("["),o=0;o<t.length;o++)o>0&&(i.push(","),l&&i.push("\n ")),l=n(t[o]);return i.push("]"),!0}i.push("{");var l=!1;for(o in t)t.hasOwnProperty(o)&&(l&&i.push(",\n"),l=!0,i.push(o),i.push(": \n"),n(t[o]));return i.push("}"),!0}var i=[];return n(t),i.join("")},numeric.parseDate=function(t){function e(t){if("string"==typeof t)return Date.parse(t.replace(/-/g,"/"));if(!(t instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,i=[];for(n=0;n<t.length;n++)i[n]=e(t[n]);return i}return e(t)},numeric.parseFloat=function(t){function e(t){if("string"==typeof t)return parseFloat(t);if(!(t instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,i=[];for(n=0;n<t.length;n++)i[n]=e(t[n]);return i}return e(t)},numeric.parseCSV=function(t){var e,n,i=t.split("\n"),o=[],r=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,a=function(t){return t.substr(0,t.length-1)},u=0;for(n=0;n<i.length;n++){var l,c=(i[n]+",").match(r);if(c.length>0){for(o[u]=[],e=0;e<c.length;e++)l=a(c[e]),s.test(l)?o[u][e]=parseFloat(l):o[u][e]=l;u++}}return o},numeric.toCSV=function(t){var e,n,i,o,r,s,a=numeric.dim(t);for(i=a[0],o=a[1],s=[],e=0;i>e;e++){for(r=[],n=0;i>n;n++)r[n]=t[e][n].toString();s[e]=r.join(", ")}return s.join("\n")+"\n"},numeric.getURL=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),e},numeric.imageURL=function(t){function e(t){var e,n,i,o,r,s,a,u,l=t.length,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="";for(e=0;l>e;e+=3)n=t[e],i=t[e+1],o=t[e+2],r=n>>2,s=((3&n)<<4)+(i>>4),a=((15&i)<<2)+(o>>6),u=63&o,e+1>=l?a=u=64:e+2>=l&&(u=64),h+=c.charAt(r)+c.charAt(s)+c.charAt(a)+c.charAt(u);return h}function n(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=t.length);var i,o=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],r=-1,s=0;t.length;for(i=e;n>i;i++)s=255&(r^t[i]),r=r>>>8^o[s];return-1^r}var i,o,r,s,a,u,l,c,h,d,f=t[0].length,p=t[0][0].length,m=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,p>>24&255,p>>16&255,p>>8&255,255&p,f>>24&255,f>>16&255,f>>8&255,255&f,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(d=n(m,12,29),m[29]=d>>24&255,m[30]=d>>16&255,m[31]=d>>8&255,m[32]=255&d,i=1,o=0,l=0;f>l;l++){for(f-1>l?m.push(0):m.push(1),a=3*p+1+(0===l)&255,u=3*p+1+(0===l)>>8&255,m.push(a),m.push(u),m.push(255&~a),m.push(255&~u),0===l&&m.push(0),c=0;p>c;c++)for(r=0;3>r;r++)a=t[r][l][c],a=a>255?255:0>a?0:Math.round(a),i=(i+a)%65521,o=(o+i)%65521,m.push(a);m.push(0)}return h=(o<<16)+i,m.push(h>>24&255),m.push(h>>16&255),m.push(h>>8&255),m.push(255&h),s=m.length-41,m[33]=s>>24&255,m[34]=s>>16&255,m[35]=s>>8&255,m[36]=255&s,d=n(m,37),m.push(d>>24&255),m.push(d>>16&255),m.push(d>>8&255),m.push(255&d),m.push(0),m.push(0),m.push(0),m.push(0),m.push(73),m.push(69),m.push(78),m.push(68),m.push(174),m.push(66),m.push(96),m.push(130),"data:image/png;base64,"+e(m)},numeric._dim=function(t){for(var e=[];"object"==typeof t;)e.push(t.length),t=t[0];return e},numeric.dim=function(t){var e,n;return"object"==typeof t?(e=t[0],"object"==typeof e?(n=e[0],"object"==typeof n?numeric._dim(t):[t.length,e.length]):[t.length]):[]},numeric.mapreduce=function(t,e){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+e+';\nif(typeof x === "number") { var xi = x; '+t+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+t+";\n    xi = x[i-1];\n    "+t+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+t+"\n}\nreturn accum;")},numeric.mapreduce2=function(t,e){return Function("x","var n = x.length;\nvar i,xi;\n"+e+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+t+";\n}\nreturn accum;")},numeric.same=function t(e,n){var i,o;if(!(e instanceof Array&&n instanceof Array))return!1;if(o=e.length,o!==n.length)return!1;for(i=0;o>i;i++)if(e[i]!==n[i]){if("object"!=typeof e[i])return!1;if(!t(e[i],n[i]))return!1}return!0},numeric.rep=function(t,e,n){"undefined"==typeof n&&(n=0);var i,o=t[n],r=Array(o);if(n===t.length-1){for(i=o-2;i>=0;i-=2)r[i+1]=e,r[i]=e;return-1===i&&(r[0]=e),r}for(i=o-1;i>=0;i--)r[i]=numeric.rep(t,e,n+1);return r},numeric.dotMMsmall=function(t,e){var n,i,o,r,s,a,u,l,c,h,d;for(r=t.length,s=e.length,a=e[0].length,u=Array(r),n=r-1;n>=0;n--){for(l=Array(a),c=t[n],o=a-1;o>=0;o--){for(h=c[s-1]*e[s-1][o],i=s-2;i>=1;i-=2)d=i-1,h+=c[i]*e[i][o]+c[d]*e[d][o];0===i&&(h+=c[0]*e[0][o]),l[o]=h}u[n]=l}return u},numeric._getCol=function(t,e,n){var i,o=t.length;for(i=o-1;i>0;--i)n[i]=t[i][e],--i,n[i]=t[i][e];0===i&&(n[0]=t[0][e])},numeric.dotMMbig=function(t,e){var n,i,o,r,s=numeric._getCol,a=e.length,u=Array(a),l=t.length,c=e[0].length,h=new Array(l),d=numeric.dotVV;for(--a,--l,i=l;-1!==i;--i)h[i]=Array(c);for(--c,i=c;-1!==i;--i)for(s(e,i,u),o=l;-1!==o;--o)r=0,n=t[o],h[o][i]=d(n,u);return h},numeric.dotMV=function(t,e){var n,i=t.length,o=(e.length,Array(i)),r=numeric.dotVV;for(n=i-1;n>=0;n--)o[n]=r(t[n],e);return o},numeric.dotVM=function(t,e){var n,i,o,r,s,a,u;for(o=t.length,r=e[0].length,s=Array(r),i=r-1;i>=0;i--){for(a=t[o-1]*e[o-1][i],n=o-2;n>=1;n-=2)u=n-1,a+=t[n]*e[n][i]+t[u]*e[u][i];0===n&&(a+=t[0]*e[0][i]),s[i]=a}return s},numeric.dotVV=function(t,e){var n,i,o=t.length,r=t[o-1]*e[o-1];for(n=o-2;n>=1;n-=2)i=n-1,r+=t[n]*e[n]+t[i]*e[i];return 0===n&&(r+=t[0]*e[0]),r},numeric.dot=function(t,e){var n=numeric.dim;switch(1e3*n(t).length+n(e).length){case 2002:return e.length<10?numeric.dotMMsmall(t,e):numeric.dotMMbig(t,e);case 2001:return numeric.dotMV(t,e);case 1002:return numeric.dotVM(t,e);case 1001:return numeric.dotVV(t,e);case 1e3:return numeric.mulVS(t,e);case 1:return numeric.mulSV(t,e);case 0:return t*e;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(t){var e,n,i,o,r=t.length,s=Array(r);for(e=r-1;e>=0;e--){for(o=Array(r),n=e+2,i=r-1;i>=n;i-=2)o[i]=0,o[i-1]=0;for(i>e&&(o[i]=0),o[e]=t[e],i=e-1;i>=1;i-=2)o[i]=0,o[i-1]=0;0===i&&(o[0]=0),s[e]=o}return s},numeric.getDiag=function(t){var e,n=Math.min(t.length,t[0].length),i=Array(n);for(e=n-1;e>=1;--e)i[e]=t[e][e],--e,i[e]=t[e][e];return 0===e&&(i[0]=t[0][0]),i},numeric.identity=function(t){return numeric.diag(numeric.rep([t],1))},numeric.pointwise=function(t,e,n){"undefined"==typeof n&&(n="");var i,o,r=[],s=/\[i\]$/,a="",u=!1;for(i=0;i<t.length;i++)s.test(t[i])?(o=t[i].substring(0,t[i].length-3),a=o):o=t[i],"ret"===o&&(u=!0),r.push(o);return r[t.length]="_s",r[t.length+1]="_k",r[t.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+a+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(u?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+t.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+e+"\n}\nreturn ret;",Function.apply(null,r)},numeric.pointwise2=function(t,e,n){"undefined"==typeof n&&(n="");var i,o,r=[],s=/\[i\]$/,a="",u=!1;for(i=0;i<t.length;i++)s.test(t[i])?(o=t[i].substring(0,t[i].length-3),a=o):o=t[i],"ret"===o&&(u=!0),r.push(o);return r[t.length]="var _n = "+a+".length;\nvar i"+(u?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+e+"\n}\nreturn ret;",Function.apply(null,r)},numeric._biforeach=function e(t,n,i,o,r){if(o===i.length-1)return void r(t,n);var s,a=i[o];for(s=a-1;s>=0;s--)e("object"==typeof t?t[s]:t,"object"==typeof n?n[s]:n,i,o+1,r)},numeric._biforeach2=function n(t,e,i,o,r){if(o===i.length-1)return r(t,e);var s,a=i[o],u=Array(a);for(s=a-1;s>=0;--s)u[s]=n("object"==typeof t?t[s]:t,"object"==typeof e?e[s]:e,i,o+1,r);return u},numeric._foreach=function i(t,e,n,o){if(n===e.length-1)return void o(t);var r,s=e[n];for(r=s-1;r>=0;r--)i(t[r],e,n+1,o)},numeric._foreach2=function o(t,e,n,i){if(n===e.length-1)return i(t);var r,s=e[n],a=Array(s);for(r=s-1;r>=0;r--)a[r]=o(t[r],e,n+1,i);return a},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var t,e;for(t=0;t<numeric.mathfuns2.length;++t)e=numeric.mathfuns2[t],numeric.ops2[e]=e;for(t in numeric.ops2)if(numeric.ops2.hasOwnProperty(t)){e=numeric.ops2[t];var n,i,o="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,t)?(o="var "+e+" = Math."+e+";\n",n=function(t,n,i){return t+" = "+e+"("+n+","+i+")";
},i=function(t,n){return t+" = "+e+"("+t+","+n+")"}):(n=function(t,n,i){return t+" = "+n+" "+e+" "+i},i=numeric.opseq.hasOwnProperty(t+"eq")?function(t,n){return t+" "+e+"= "+n}:function(t,n){return t+" = "+t+" "+e+" "+n}),numeric[t+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),o),numeric[t+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),o),numeric[t+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),o),numeric[t]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+t+"VV, VS = numeric."+t+"VS, SV = numeric."+t+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+i("x","y")+"\n}\nreturn x;\n"),numeric[e]=numeric[t],numeric[t+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],i("ret[i]","x[i]"),o),numeric[t+"eqS"]=numeric.pointwise2(["ret[i]","x"],i("ret[i]","x"),o),numeric[t+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+t+"eqV, S = numeric."+t+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(t=0;t<numeric.mathfuns2.length;++t)e=numeric.mathfuns2[t],delete numeric.ops2[e];for(t=0;t<numeric.mathfuns.length;++t)e=numeric.mathfuns[t],numeric.ops1[e]=e;for(t in numeric.ops1)numeric.ops1.hasOwnProperty(t)&&(o="",e=numeric.ops1[t],-1!==numeric.myIndexOf.call(numeric.mathfuns,t)&&Math.hasOwnProperty(e)&&(o="var "+e+" = Math."+e+";\n"),numeric[t+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+e+"(ret[i]);",o),numeric[t+"eq"]=Function("x",'if(typeof x !== "object") return '+e+"x\nvar i;\nvar V = numeric."+t+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[t+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+e+"(x[i]);",o),numeric[t]=Function("x",'if(typeof x !== "object") return '+e+"(x)\nvar i;\nvar V = numeric."+t+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(t=0;t<numeric.mathfuns.length;++t)e=numeric.mathfuns[t],delete numeric.ops1[e];for(t in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(t)&&(e=numeric.mapreducers[t],numeric[t+"V"]=numeric.mapreduce2(e[0],e[1]),numeric[t]=Function("x","s","k",e[1]+'if(typeof x !== "object") {    xi = x;\n'+e[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+t+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+e[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(t,e){return"object"==typeof t?"object"==typeof e?numeric.truncVV(t,e):numeric.truncVS(t,e):"object"==typeof e?numeric.truncSV(t,e):Math.round(t/e)*e},numeric.inv=function(t){var e,n,i,o,r,s,a,t,u=numeric.dim(t),l=Math.abs,c=u[0],h=u[1],d=numeric.clone(t),f=numeric.identity(c);for(s=0;h>s;++s){var p=-1,m=-1;for(r=s;r!==c;++r)a=l(d[r][s]),a>m&&(p=r,m=a);for(n=d[p],d[p]=d[s],d[s]=n,o=f[p],f[p]=f[s],f[s]=o,t=n[s],a=s;a!==h;++a)n[a]/=t;for(a=h-1;-1!==a;--a)o[a]/=t;for(r=c-1;-1!==r;--r)if(r!==s){for(e=d[r],i=f[r],t=e[s],a=s+1;a!==h;++a)e[a]-=n[a]*t;for(a=h-1;a>0;--a)i[a]-=o[a]*t,--a,i[a]-=o[a]*t;0===a&&(i[0]-=o[0]*t)}}return f},numeric.det=function(t){var e=numeric.dim(t);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: det() only works on square matrices");var n,i,o,r,s,a,u,l,c=e[0],h=1,d=numeric.clone(t);for(i=0;c-1>i;i++){for(o=i,n=i+1;c>n;n++)Math.abs(d[n][i])>Math.abs(d[o][i])&&(o=n);for(o!==i&&(u=d[o],d[o]=d[i],d[i]=u,h*=-1),r=d[i],n=i+1;c>n;n++){for(s=d[n],a=s[i]/r[i],o=i+1;c-1>o;o+=2)l=o+1,s[o]-=r[o]*a,s[l]-=r[l]*a;o!==c&&(s[o]-=r[o]*a)}if(0===r[i])return 0;h*=r[i]}return h*d[i][i]},numeric.transpose=function(t){var e,n,i,o,r,s=t.length,a=t[0].length,u=Array(a);for(n=0;a>n;n++)u[n]=Array(s);for(e=s-1;e>=1;e-=2){for(o=t[e],i=t[e-1],n=a-1;n>=1;--n)r=u[n],r[e]=o[n],r[e-1]=i[n],--n,r=u[n],r[e]=o[n],r[e-1]=i[n];0===n&&(r=u[0],r[e]=o[0],r[e-1]=i[0])}if(0===e){for(i=t[0],n=a-1;n>=1;--n)u[n][0]=i[n],--n,u[n][0]=i[n];0===n&&(u[0][0]=i[0])}return u},numeric.negtranspose=function(t){var e,n,i,o,r,s=t.length,a=t[0].length,u=Array(a);for(n=0;a>n;n++)u[n]=Array(s);for(e=s-1;e>=1;e-=2){for(o=t[e],i=t[e-1],n=a-1;n>=1;--n)r=u[n],r[e]=-o[n],r[e-1]=-i[n],--n,r=u[n],r[e]=-o[n],r[e-1]=-i[n];0===n&&(r=u[0],r[e]=-o[0],r[e-1]=-i[0])}if(0===e){for(i=t[0],n=a-1;n>=1;--n)u[n][0]=-i[n],--n,u[n][0]=-i[n];0===n&&(u[0][0]=-i[0])}return u},numeric._random=function r(t,e){var n,i,o=t[e],s=Array(o);if(e===t.length-1){for(i=Math.random,n=o-1;n>=1;n-=2)s[n]=i(),s[n-1]=i();return 0===n&&(s[0]=i()),s}for(n=o-1;n>=0;n--)s[n]=r(t,e+1);return s},numeric.random=function(t){return numeric._random(t,0)},numeric.norm2=function(t){return Math.sqrt(numeric.norm2Squared(t))},numeric.linspace=function(t,e,n){if("undefined"==typeof n&&(n=Math.max(Math.round(e-t)+1,1)),2>n)return 1===n?[t]:[];var i,o=Array(n);for(n--,i=n;i>=0;i--)o[i]=(i*e+(n-i)*t)/n;return o},numeric.getBlock=function(t,e,n){function i(t,r){var s,a=e[r],u=n[r]-a,l=Array(u);if(r===o.length-1){for(s=u;s>=0;s--)l[s]=t[s+a];return l}for(s=u;s>=0;s--)l[s]=i(t[s+a],r+1);return l}var o=numeric.dim(t);return i(t,0)},numeric.setBlock=function(t,e,n,i){function o(t,i,s){var a,u=e[s],l=n[s]-u;if(s===r.length-1)for(a=l;a>=0;a--)t[a+u]=i[a];for(a=l;a>=0;a--)o(t[a+u],i[a],s+1)}var r=numeric.dim(t);return o(t,i,0),t},numeric.getRange=function(t,e,n){var i,o,r,s,a=e.length,u=n.length,l=Array(a);for(i=a-1;-1!==i;--i)for(l[i]=Array(u),r=l[i],s=t[e[i]],o=u-1;-1!==o;--o)r[o]=s[n[o]];return l},numeric.blockMatrix=function(t){var e=numeric.dim(t);if(e.length<4)return numeric.blockMatrix([t]);var n,i,o,r,s,a=e[0],u=e[1];for(n=0,i=0,o=0;a>o;++o)n+=t[o][0].length;for(r=0;u>r;++r)i+=t[0][r][0].length;var l=Array(n);for(o=0;n>o;++o)l[o]=Array(i);var c,h,d,f,p,m=0;for(o=0;a>o;++o){for(c=i,r=u-1;-1!==r;--r)for(s=t[o][r],c-=s[0].length,d=s.length-1;-1!==d;--d)for(p=s[d],h=l[m+d],f=p.length-1;-1!==f;--f)h[c+f]=p[f];m+=t[o][0].length}return l},numeric.tensor=function(t,e){if("number"==typeof t||"number"==typeof e)return numeric.mul(t,e);var n=numeric.dim(t),i=numeric.dim(e);if(1!==n.length||1!==i.length)throw new Error("numeric: tensor product is only defined for vectors");var o,r,s,a,u=n[0],l=i[0],c=Array(u);for(r=u-1;r>=0;r--){for(o=Array(l),a=t[r],s=l-1;s>=3;--s)o[s]=a*e[s],--s,o[s]=a*e[s],--s,o[s]=a*e[s],--s,o[s]=a*e[s];for(;s>=0;)o[s]=a*e[s],--s;c[r]=o}return c},numeric.T=function(t,e){this.x=t,this.y=e},numeric.t=function(t,e){return new numeric.T(t,e)},numeric.Tbinop=function(t,e,n,i,o){numeric.indexOf;if("string"!=typeof o){var r;o="";for(r in numeric)numeric.hasOwnProperty(r)&&(t.indexOf(r)>=0||e.indexOf(r)>=0||n.indexOf(r)>=0||i.indexOf(r)>=0)&&r.length>1&&(o+="var "+r+" = numeric."+r+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+o+"\nif(x.y) {  if(y.y) {    return new numeric.T("+i+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+e+");\n}\nreturn new numeric.T("+t+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var t=numeric.mul,e=numeric.div;if(this.y){var n=numeric.add(t(this.x,this.x),t(this.y,this.y));return new numeric.T(e(this.x,n),e(numeric.neg(this.y),n))}return new T(e(1,this.x))},numeric.T.prototype.div=function s(t){if(t instanceof numeric.T||(t=new numeric.T(t)),t.y)return this.mul(t.reciprocal());var s=numeric.div;return this.y?new numeric.T(s(this.x,t.x),s(this.y,t.x)):new numeric.T(s(this.x,t.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var t=numeric.transpose,e=this.x,n=this.y;return n?new numeric.T(t(e),t(n)):new numeric.T(t(e))},numeric.T.prototype.transjugate=function(){var t=numeric.transpose,e=this.x,n=this.y;return n?new numeric.T(t(e),numeric.negtranspose(n)):new numeric.T(t(e))},numeric.Tunop=function(t,e,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+e+";\n}\n"+t+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var t=this;if("undefined"==typeof t.y)return new numeric.T(numeric.inv(t.x));var e,n,i,o,r,s,a,u,l,c,h,e,n,i,d,f,p,m,g,_,y,v=t.x.length,b=numeric.identity(v),w=numeric.rep([v,v],0),L=numeric.clone(t.x),x=numeric.clone(t.y);for(e=0;v>e;e++){for(p=L[e][e],m=x[e][e],d=p*p+m*m,i=e,n=e+1;v>n;n++)p=L[n][e],m=x[n][e],f=p*p+m*m,f>d&&(i=n,d=f);for(i!==e&&(y=L[e],L[e]=L[i],L[i]=y,y=x[e],x[e]=x[i],x[i]=y,y=b[e],b[e]=b[i],b[i]=y,y=w[e],w[e]=w[i],w[i]=y),o=L[e],r=x[e],u=b[e],l=w[e],p=o[e],m=r[e],n=e+1;v>n;n++)g=o[n],_=r[n],o[n]=(g*p+_*m)/d,r[n]=(_*p-g*m)/d;for(n=0;v>n;n++)g=u[n],_=l[n],u[n]=(g*p+_*m)/d,l[n]=(_*p-g*m)/d;for(n=e+1;v>n;n++){for(s=L[n],a=x[n],c=b[n],h=w[n],p=s[e],m=a[e],i=e+1;v>i;i++)g=o[i],_=r[i],s[i]-=g*p-_*m,a[i]-=_*p+g*m;for(i=0;v>i;i++)g=u[i],_=l[i],c[i]-=g*p-_*m,h[i]-=_*p+g*m}}for(e=v-1;e>0;e--)for(u=b[e],l=w[e],n=e-1;n>=0;n--)for(c=b[n],h=w[n],p=L[n][e],m=x[n][e],i=v-1;i>=0;i--)g=u[i],_=l[i],c[i]-=p*g-m*_,h[i]-=p*_+m*g;return new numeric.T(b,w)},numeric.T.prototype.get=function(t){var e,n=this.x,i=this.y,o=0,r=t.length;if(i){for(;r>o;)e=t[o],n=n[e],i=i[e],o++;return new numeric.T(n,i)}for(;r>o;)e=t[o],n=n[e],o++;return new numeric.T(n)},numeric.T.prototype.set=function(t,e){var n,i=this.x,o=this.y,r=0,s=t.length,a=e.x,u=e.y;if(0===s)return u?this.y=u:o&&(this.y=void 0),this.x=i,this;if(u){for(o||(o=numeric.rep(numeric.dim(i),0),this.y=o);s-1>r;)n=t[r],i=i[n],o=o[n],r++;return n=t[r],i[n]=a,o[n]=u,this}if(o){for(;s-1>r;)n=t[r],i=i[n],o=o[n],r++;return n=t[r],i[n]=a,a instanceof Array?o[n]=numeric.rep(numeric.dim(a),0):o[n]=0,this}for(;s-1>r;)n=t[r],i=i[n],r++;return n=t[r],i[n]=a,this},numeric.T.prototype.getRows=function(t,e){var n,i,o=e-t+1,r=Array(o),s=this.x,a=this.y;for(n=t;e>=n;n++)r[n-t]=s[n];if(a){for(i=Array(o),n=t;e>=n;n++)i[n-t]=a[n];return new numeric.T(r,i)}return new numeric.T(r)},numeric.T.prototype.setRows=function(t,e,n){var i,o=this.x,r=this.y,s=n.x,a=n.y;for(i=t;e>=i;i++)o[i]=s[i-t];if(a)for(r||(r=numeric.rep(numeric.dim(o),0),this.y=r),i=t;e>=i;i++)r[i]=a[i-t];else if(r)for(i=t;e>=i;i++)r[i]=numeric.rep([s[i-t].length],0);return this},numeric.T.prototype.getRow=function(t){var e=this.x,n=this.y;return n?new numeric.T(e[t],n[t]):new numeric.T(e[t])},numeric.T.prototype.setRow=function(t,e){var n=this.x,i=this.y,o=e.x,r=e.y;return n[t]=o,r?(i||(i=numeric.rep(numeric.dim(n),0),this.y=i),i[t]=r):i&&(i=numeric.rep([o.length],0)),this},numeric.T.prototype.getBlock=function(t,e){var n=this.x,i=this.y,o=numeric.getBlock;return i?new numeric.T(o(n,t,e),o(i,t,e)):new numeric.T(o(n,t,e))},numeric.T.prototype.setBlock=function(t,e,n){n instanceof numeric.T||(n=new numeric.T(n));var i=this.x,o=this.y,r=numeric.setBlock,s=n.x,a=n.y;return a?(o||(this.y=numeric.rep(numeric.dim(this),0),o=this.y),r(i,t,e,s),r(o,t,e,a),this):(r(i,t,e,s),void(o&&r(o,t,e,numeric.rep(numeric.dim(s),0))))},numeric.T.rep=function(t,e){var n=numeric.T;e instanceof n||(e=new n(e));var i=e.x,o=e.y,r=numeric.rep;return o?new n(r(t,i),r(t,o)):new n(r(t,i))},numeric.T.diag=function a(t){t instanceof numeric.T||(t=new numeric.T(t));var e=t.x,n=t.y,a=numeric.diag;return n?new numeric.T(a(e),a(n)):new numeric.T(a(e))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(t){return new numeric.T(numeric.identity(t))},numeric.T.prototype.getDiag=function(){var t=numeric,e=this.x,n=this.y;return n?new t.T(t.getDiag(e),t.getDiag(n)):new t.T(t.getDiag(e))},numeric.house=function(t){var e=numeric.clone(t),n=t[0]>=0?1:-1,i=n*numeric.norm2(t);e[0]+=i;var o=numeric.norm2(e);if(0===o)throw new Error("eig: internal error");return numeric.div(e,o)},numeric.toUpperHessenberg=function(t){var e=numeric.dim(t);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,i,o,r,s,a,u,l,c,h,d=e[0],f=numeric.clone(t),p=numeric.identity(d);for(i=0;d-2>i;i++){for(r=Array(d-i-1),n=i+1;d>n;n++)r[n-i-1]=f[n][i];if(numeric.norm2(r)>0){for(s=numeric.house(r),a=numeric.getBlock(f,[i+1,i],[d-1,d-1]),u=numeric.tensor(s,numeric.dot(s,a)),n=i+1;d>n;n++)for(l=f[n],c=u[n-i-1],o=i;d>o;o++)l[o]-=2*c[o-i];for(a=numeric.getBlock(f,[0,i+1],[d-1,d-1]),u=numeric.tensor(numeric.dot(a,s),s),n=0;d>n;n++)for(l=f[n],c=u[n],o=i+1;d>o;o++)l[o]-=2*c[o-i-1];for(a=Array(d-i-1),n=i+1;d>n;n++)a[n-i-1]=p[n];for(u=numeric.tensor(s,numeric.dot(s,a)),n=i+1;d>n;n++)for(h=p[n],c=u[n-i-1],o=0;d>o;o++)h[o]-=2*c[o]}}return{H:f,Q:p}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(t,e){"undefined"==typeof e&&(e=1e4),t=numeric.clone(t);var n,i,o,r,s,a,u,l,c,h,d,f,p,m,g,_,y,v,b=(numeric.clone(t),numeric.dim(t)),w=b[0],L=numeric.identity(w);if(3>w)return{Q:L,B:[[0,w-1]]};var x=numeric.epsilon;for(v=0;e>v;v++){for(_=0;w-1>_;_++)if(Math.abs(t[_+1][_])<x*(Math.abs(t[_][_])+Math.abs(t[_+1][_+1]))){var P=numeric.QRFrancis(numeric.getBlock(t,[0,0],[_,_]),e),k=numeric.QRFrancis(numeric.getBlock(t,[_+1,_+1],[w-1,w-1]),e);for(f=Array(_+1),g=0;_>=g;g++)f[g]=L[g];for(p=numeric.dot(P.Q,f),g=0;_>=g;g++)L[g]=p[g];for(f=Array(w-_-1),g=_+1;w>g;g++)f[g-_-1]=L[g];for(p=numeric.dot(k.Q,f),g=_+1;w>g;g++)L[g]=p[g-_-1];return{Q:L,B:P.B.concat(numeric.add(k.B,_+1))}}if(o=t[w-2][w-2],r=t[w-2][w-1],s=t[w-1][w-2],a=t[w-1][w-1],l=o+a,u=o*a-r*s,c=numeric.getBlock(t,[0,0],[2,2]),l*l>=4*u){var C,M;C=.5*(l+Math.sqrt(l*l-4*u)),M=.5*(l-Math.sqrt(l*l-4*u)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,C+M)),numeric.diag(numeric.rep([3],C*M)))}else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,l)),numeric.diag(numeric.rep([3],u)));for(n=[c[0][0],c[1][0],c[2][0]],i=numeric.house(n),f=[t[0],t[1],t[2]],p=numeric.tensor(i,numeric.dot(i,f)),g=0;3>g;g++)for(d=t[g],m=p[g],y=0;w>y;y++)d[y]-=2*m[y];for(f=numeric.getBlock(t,[0,0],[w-1,2]),p=numeric.tensor(numeric.dot(f,i),i),g=0;w>g;g++)for(d=t[g],m=p[g],y=0;3>y;y++)d[y]-=2*m[y];for(f=[L[0],L[1],L[2]],p=numeric.tensor(i,numeric.dot(i,f)),g=0;3>g;g++)for(h=L[g],m=p[g],y=0;w>y;y++)h[y]-=2*m[y];var T;for(_=0;w-2>_;_++){for(y=_;_+1>=y;y++)if(Math.abs(t[y+1][y])<x*(Math.abs(t[y][y])+Math.abs(t[y+1][y+1]))){var P=numeric.QRFrancis(numeric.getBlock(t,[0,0],[y,y]),e),k=numeric.QRFrancis(numeric.getBlock(t,[y+1,y+1],[w-1,w-1]),e);for(f=Array(y+1),g=0;y>=g;g++)f[g]=L[g];for(p=numeric.dot(P.Q,f),g=0;y>=g;g++)L[g]=p[g];for(f=Array(w-y-1),g=y+1;w>g;g++)f[g-y-1]=L[g];for(p=numeric.dot(k.Q,f),g=y+1;w>g;g++)L[g]=p[g-y-1];return{Q:L,B:P.B.concat(numeric.add(k.B,y+1))}}for(T=Math.min(w-1,_+3),n=Array(T-_),g=_+1;T>=g;g++)n[g-_-1]=t[g][_];for(i=numeric.house(n),f=numeric.getBlock(t,[_+1,_],[T,w-1]),p=numeric.tensor(i,numeric.dot(i,f)),g=_+1;T>=g;g++)for(d=t[g],m=p[g-_-1],y=_;w>y;y++)d[y]-=2*m[y-_];for(f=numeric.getBlock(t,[0,_+1],[w-1,T]),p=numeric.tensor(numeric.dot(f,i),i),g=0;w>g;g++)for(d=t[g],m=p[g],y=_+1;T>=y;y++)d[y]-=2*m[y-_-1];for(f=Array(T-_),g=_+1;T>=g;g++)f[g-_-1]=L[g];for(p=numeric.tensor(i,numeric.dot(i,f)),g=_+1;T>=g;g++)for(h=L[g],m=p[g-_-1],y=0;w>y;y++)h[y]-=2*m[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(t,e){var n,i,o,r,s,a,u,l,c,h,d,f,p,m,g,_,y,v=numeric.toUpperHessenberg(t),b=numeric.QRFrancis(v.H,e),w=numeric.T,L=t.length,x=b.B,P=numeric.dot(b.Q,numeric.dot(v.H,numeric.transpose(b.Q))),k=new w(numeric.dot(b.Q,v.Q)),C=x.length,M=Math.sqrt;for(i=0;C>i;i++)if(n=x[i][0],n===x[i][1]);else{if(r=n+1,s=P[n][n],a=P[n][r],u=P[r][n],l=P[r][r],0===a&&0===u)continue;c=-s-l,h=s*l-a*u,d=c*c-4*h,d>=0?(f=0>c?-.5*(c-M(d)):-.5*(c+M(d)),_=(s-f)*(s-f)+a*a,y=u*u+(l-f)*(l-f),_>y?(_=M(_),m=(s-f)/_,g=a/_):(y=M(y),m=u/y,g=(l-f)/y),o=new w([[g,-m],[m,g]]),k.setRows(n,r,o.dot(k.getRows(n,r)))):(f=-.5*c,p=.5*M(-d),_=(s-f)*(s-f)+a*a,y=u*u+(l-f)*(l-f),_>y?(_=M(_+p*p),m=(s-f)/_,g=a/_,f=0,p/=_):(y=M(y+p*p),m=u/y,g=(l-f)/y,f=p/y,p=0),o=new w([[g,-m],[m,g]],[[f,p],[p,-f]]),k.setRows(n,r,o.dot(k.getRows(n,r))))}var T=k.dot(t).dot(k.transjugate()),L=t.length,S=numeric.T.identity(L);for(r=0;L>r;r++)if(r>0)for(i=r-1;i>=0;i--){var E=T.get([i,i]),D=T.get([r,r]);numeric.neq(E.x,D.x)||numeric.neq(E.y,D.y)?(f=T.getRow(i).getBlock([i],[r-1]),p=S.getRow(r).getBlock([i],[r-1]),S.set([r,i],T.get([i,r]).neg().sub(f.dot(p)).div(E.sub(D)))):S.setRow(r,S.getRow(i))}for(r=0;L>r;r++)f=S.getRow(r),S.setRow(r,f.div(f.norm2()));return S=S.transpose(),S=k.transjugate().dot(S),{lambda:T.getDiag(),E:S}},numeric.ccsSparse=function(t){var e,n,i,o,r=t.length,s=[];for(i=r-1;-1!==i;--i){n=t[i];for(o in n){for(o=parseInt(o);o>=s.length;)s[s.length]=0;0!==n[o]&&s[o]++}}var e=s.length,a=Array(e+1);for(a[0]=0,i=0;e>i;++i)a[i+1]=a[i]+s[i];var u=Array(a[e]),l=Array(a[e]);for(i=r-1;-1!==i;--i){n=t[i];for(o in n)0!==n[o]&&(s[o]--,u[a[o]+s[o]]=i,l[a[o]+s[o]]=n[o])}return[a,u,l]},numeric.ccsFull=function(t){var e,n,i,o,r=t[0],s=t[1],a=t[2],u=numeric.ccsDim(t),l=u[0],c=u[1],h=numeric.rep([l,c],0);for(e=0;c>e;e++)for(i=r[e],o=r[e+1],n=i;o>n;++n)h[s[n]][e]=a[n];return h},numeric.ccsTSolve=function(t,e,n,i,o){function r(t){var e;if(0===n[t]){for(n[t]=1,e=s[t];e<s[t+1];++e)r(a[e]);o[h]=t,++h}}var s=t[0],a=t[1],u=t[2],l=s.length-1,c=Math.max,h=0;"undefined"==typeof i&&(n=numeric.rep([l],0)),"undefined"==typeof i&&(i=numeric.linspace(0,n.length-1)),"undefined"==typeof o&&(o=[]);var d,f,p,m,g,_,y;for(d=i.length-1;-1!==d;--d)r(i[d]);for(o.length=h,d=o.length-1;-1!==d;--d)n[o[d]]=0;for(d=i.length-1;-1!==d;--d)f=i[d],n[f]=e[f];for(d=o.length-1;-1!==d;--d){for(f=o[d],p=s[f],m=c(s[f+1],p),g=p;g!==m;++g)if(a[g]===f){n[f]/=u[g];break}for(y=n[f],g=p;g!==m;++g)_=a[g],_!==f&&(n[_]-=y*u[g])}return n},numeric.ccsDFS=function(t){this.k=Array(t),this.k1=Array(t),this.j=Array(t)},numeric.ccsDFS.prototype.dfs=function(t,e,n,i,o,r){var s,a,u,l=0,c=o.length,h=this.k,d=this.k1,f=this.j;if(0===i[t])for(i[t]=1,f[0]=t,h[0]=a=e[t],d[0]=u=e[t+1];;)if(a>=u){if(o[c]=f[l],0===l)return;++c,--l,a=h[l],u=d[l]}else s=r[n[a]],0===i[s]?(i[s]=1,h[l]=a,++l,f[l]=s,a=e[s],d[l]=u=e[s+1]):++a},numeric.ccsLPSolve=function(t,e,n,i,o,r,s){var a,u,l,c,h,d,f,p,m,g=t[0],_=t[1],y=t[2],v=(g.length-1,e[0]),b=e[1],w=e[2];for(u=v[o],l=v[o+1],i.length=0,a=u;l>a;++a)s.dfs(r[b[a]],g,_,n,i,r);for(a=i.length-1;-1!==a;--a)n[i[a]]=0;for(a=u;a!==l;++a)c=r[b[a]],n[c]=w[a];for(a=i.length-1;-1!==a;--a){for(c=i[a],h=g[c],d=g[c+1],f=h;d>f;++f)if(r[_[f]]===c){n[c]/=y[f];break}for(m=n[c],f=h;d>f;++f)p=r[_[f]],p!==c&&(n[p]-=m*y[f])}return n},numeric.ccsLUP1=function(t,e){var n,i,o,r,s,a,u,l=t[0].length-1,c=[numeric.rep([l+1],0),[],[]],h=[numeric.rep([l+1],0),[],[]],d=c[0],f=c[1],p=c[2],m=h[0],g=h[1],_=h[2],y=numeric.rep([l],0),v=numeric.rep([l],0),b=numeric.ccsLPSolve,w=(Math.max,Math.abs),L=numeric.linspace(0,l-1),x=numeric.linspace(0,l-1),P=new numeric.ccsDFS(l);for("undefined"==typeof e&&(e=1),n=0;l>n;++n){for(b(c,t,y,v,n,x,P),r=-1,s=-1,i=v.length-1;-1!==i;--i)o=v[i],n>=o||(a=w(y[o]),a>r&&(s=o,r=a));for(w(y[n])<e*r&&(i=L[n],r=L[s],L[n]=r,x[r]=n,L[s]=i,x[i]=s,r=y[n],y[n]=y[s],y[s]=r),r=d[n],s=m[n],u=y[n],f[r]=L[n],p[r]=1,++r,i=v.length-1;-1!==i;--i)o=v[i],a=y[o],v[i]=0,y[o]=0,n>=o?(g[s]=o,_[s]=a,++s):(f[r]=L[o],p[r]=a/u,++r);d[n+1]=r,m[n+1]=s}for(i=f.length-1;-1!==i;--i)f[i]=x[f[i]];return{L:c,U:h,P:L,Pinv:x}},numeric.ccsDFS0=function(t){this.k=Array(t),this.k1=Array(t),this.j=Array(t)},numeric.ccsDFS0.prototype.dfs=function(t,e,n,i,o,r,s){var a,u,l,c=0,h=o.length,d=this.k,f=this.k1,p=this.j;if(0===i[t])for(i[t]=1,p[0]=t,d[0]=u=e[r[t]],f[0]=l=e[r[t]+1];;){if(isNaN(u))throw new Error("Ow!");if(u>=l){if(o[h]=r[p[c]],0===c)return;++h,--c,u=d[c],l=f[c]}else a=n[u],0===i[a]?(i[a]=1,d[c]=u,++c,p[c]=a,a=r[a],u=e[a],f[c]=l=e[a+1]):++u}},numeric.ccsLPSolve0=function(t,e,n,i,o,r,s,a){var u,l,c,h,d,f,p,m,g,_=t[0],y=t[1],v=t[2],b=(_.length-1,e[0]),w=e[1],L=e[2];for(l=b[o],c=b[o+1],i.length=0,u=l;c>u;++u)a.dfs(w[u],_,y,n,i,r,s);for(u=i.length-1;-1!==u;--u)h=i[u],n[s[h]]=0;for(u=l;u!==c;++u)h=w[u],n[h]=L[u];for(u=i.length-1;-1!==u;--u){for(h=i[u],m=s[h],d=_[h],f=_[h+1],p=d;f>p;++p)if(y[p]===m){n[m]/=v[p];break}for(g=n[m],p=d;f>p;++p)n[y[p]]-=g*v[p];n[m]=g}},numeric.ccsLUP0=function(t,e){var n,i,o,r,s,a,u,l=t[0].length-1,c=[numeric.rep([l+1],0),[],[]],h=[numeric.rep([l+1],0),[],[]],d=c[0],f=c[1],p=c[2],m=h[0],g=h[1],_=h[2],y=numeric.rep([l],0),v=numeric.rep([l],0),b=numeric.ccsLPSolve0,w=(Math.max,Math.abs),L=numeric.linspace(0,l-1),x=numeric.linspace(0,l-1),P=new numeric.ccsDFS0(l);for("undefined"==typeof e&&(e=1),n=0;l>n;++n){for(b(c,t,y,v,n,x,L,P),r=-1,s=-1,i=v.length-1;-1!==i;--i)o=v[i],n>=o||(a=w(y[L[o]]),a>r&&(s=o,r=a));for(w(y[L[n]])<e*r&&(i=L[n],r=L[s],L[n]=r,x[r]=n,L[s]=i,x[i]=s),r=d[n],s=m[n],u=y[L[n]],f[r]=L[n],p[r]=1,++r,i=v.length-1;-1!==i;--i)o=v[i],a=y[L[o]],v[i]=0,y[L[o]]=0,n>=o?(g[s]=o,_[s]=a,++s):(f[r]=L[o],p[r]=a/u,++r);d[n+1]=r,m[n+1]=s}for(i=f.length-1;-1!==i;--i)f[i]=x[f[i]];return{L:c,U:h,P:L,Pinv:x}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(t){return[numeric.sup(t[1])+1,t[0].length-1]},numeric.ccsGetBlock=function(t,e,n){var i=numeric.ccsDim(t),o=i[0],r=i[1];"undefined"==typeof e?e=numeric.linspace(0,o-1):"number"==typeof e&&(e=[e]),"undefined"==typeof n?n=numeric.linspace(0,r-1):"number"==typeof n&&(n=[n]);var s,a,u,l,c,h=e.length,d=n.length,f=numeric.rep([r],0),p=[],m=[],g=[f,p,m],_=t[0],y=t[1],v=t[2],b=numeric.rep([o],0),w=0,L=numeric.rep([o],0);for(a=0;d>a;++a){l=n[a];var x=_[l],P=_[l+1];for(s=x;P>s;++s)u=y[s],L[u]=1,b[u]=v[s];for(s=0;h>s;++s)c=e[s],L[c]&&(p[w]=s,m[w]=b[e[s]],++w);for(s=x;P>s;++s)u=y[s],L[u]=0;f[a+1]=w}return g},numeric.ccsDot=function(t,e){var n,i,o,r,s,a,u,l,c,h,d,f=t[0],p=t[1],m=t[2],g=e[0],_=e[1],y=e[2],v=numeric.ccsDim(t),b=numeric.ccsDim(e),w=v[0],L=(v[1],b[1]),x=numeric.rep([w],0),P=numeric.rep([w],0),k=Array(w),C=numeric.rep([L],0),M=[],T=[],S=[C,M,T];for(o=0;o!==L;++o){for(r=g[o],s=g[o+1],c=0,i=r;s>i;++i)for(h=_[i],d=y[i],a=f[h],u=f[h+1],n=a;u>n;++n)l=p[n],0===P[l]&&(k[c]=l,P[l]=1,c+=1),x[l]=x[l]+m[n]*d;for(r=C[o],s=r+c,C[o+1]=s,i=c-1;-1!==i;--i)d=r+i,n=k[i],M[d]=n,T[d]=x[n],P[n]=0,x[n]=0;C[o+1]=C[o]+c}return S},numeric.ccsLUPSolve=function(t,e){var n=t.L,i=t.U,o=(t.P,e[0]),r=!1;"object"!=typeof o&&(e=[[0,e.length],numeric.linspace(0,e.length-1),e],o=e[0],r=!0);var s,a,u,l,c,h,d=e[1],f=e[2],p=n[0].length-1,m=o.length-1,g=numeric.rep([p],0),_=Array(p),y=numeric.rep([p],0),v=Array(p),b=numeric.rep([m+1],0),w=[],L=[],x=numeric.ccsTSolve,P=0;for(s=0;m>s;++s){for(c=0,u=o[s],l=o[s+1],a=u;l>a;++a)h=t.Pinv[d[a]],v[c]=h,y[h]=f[a],++c;for(v.length=c,x(n,y,g,v,_),a=v.length-1;-1!==a;--a)y[v[a]]=0;if(x(i,g,y,_,v),r)return y;for(a=_.length-1;-1!==a;--a)g[_[a]]=0;for(a=v.length-1;-1!==a;--a)h=v[a],w[P]=h,L[P]=y[h],y[h]=0,++P;b[s+1]=P}return[b,w,L]},numeric.ccsbinop=function(t,e){return"undefined"==typeof e&&(e=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+e+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+t+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(t){var e,n=t[0],i=t[1],o=t[2],r=numeric.sup(i)+1,s=n.length,a=numeric.rep([r],0),u=Array(s),l=Array(s),c=numeric.rep([r],0);for(e=0;s>e;++e)c[i[e]]++;for(e=0;r>e;++e)a[e+1]=a[e]+c[e];var h,d,f=a.slice(0);for(e=0;s>e;++e)d=i[e],h=f[d],u[h]=n[e],l[h]=o[e],f[d]=f[d]+1;return[a,u,l]},numeric.ccsGather=function(t){var e,n,i,o,r,s=t[0],a=t[1],u=t[2],l=s.length-1,c=a.length,h=Array(c),d=Array(c),f=Array(c);for(r=0,e=0;l>e;++e)for(i=s[e],o=s[e+1],n=i;n!==o;++n)d[r]=e,h[r]=a[n],f[r]=u[n],++r;return[h,d,f]},numeric.sdim=function u(t,e,n){if("undefined"==typeof e&&(e=[]),"object"!=typeof t)return e;"undefined"==typeof n&&(n=0),n in e||(e[n]=0),t.length>e[n]&&(e[n]=t.length);var i;for(i in t)t.hasOwnProperty(i)&&u(t[i],e,n+1);return e},numeric.sclone=function l(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=numeric.sdim(t).length);var i,o=Array(t.length);if(e===n-1){for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);return o}for(i in t)t.hasOwnProperty(i)&&(o[i]=l(t[i],e+1,n));return o},numeric.sdiag=function(t){var e,n,i=t.length,o=Array(i);for(e=i-1;e>=1;e-=2)n=e-1,o[e]=[],o[e][e]=t[e],o[n]=[],o[n][n]=t[n];return 0===e&&(o[0]=[],o[0][0]=t[e]),o},numeric.sidentity=function(t){return numeric.sdiag(numeric.rep([t],1))},numeric.stranspose=function(t){var e,n,i,o=[];t.length;for(e in t)if(t.hasOwnProperty(e)){i=t[e];for(n in i)i.hasOwnProperty(n)&&("object"!=typeof o[n]&&(o[n]=[]),o[n][e]=i[n])}return o},numeric.sLUP=function(t,e){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(t,e){var n,i,o,r,s,a,u,l=t.length,c=(e.length,numeric.stranspose(e)),h=c.length,d=Array(l);for(o=l-1;o>=0;o--){for(u=[],n=t[o],s=h-1;s>=0;s--){a=0,i=c[s];for(r in n)n.hasOwnProperty(r)&&r in i&&(a+=n[r]*i[r]);a&&(u[s]=a)}d[o]=u}return d},numeric.sdotMV=function(t,e){var n,i,o,r,s=t.length,a=Array(s);for(i=s-1;i>=0;i--){n=t[i],r=0;for(o in n)n.hasOwnProperty(o)&&e[o]&&(r+=n[o]*e[o]);r&&(a[i]=r)}return a},numeric.sdotVM=function(t,e){var n,i,o,r,s=[];for(n in t)if(t.hasOwnProperty(n)){o=e[n],r=t[n];for(i in o)o.hasOwnProperty(i)&&(s[i]||(s[i]=0),s[i]+=r*o[i])}return s},numeric.sdotVV=function(t,e){var n,i=0;for(n in t)t[n]&&e[n]&&(i+=t[n]*e[n]);return i},numeric.sdot=function(t,e){var n=numeric.sdim(t).length,i=numeric.sdim(e).length,o=1e3*n+i;switch(o){case 0:return t*e;case 1001:return numeric.sdotVV(t,e);case 2001:return numeric.sdotMV(t,e);case 1002:return numeric.sdotVM(t,e);case 2002:return numeric.sdotMM(t,e);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+i)}},numeric.sscatter=function(t){var e,n,i,o,r=t[0].length,s=t.length,a=[];for(n=r-1;n>=0;--n)if(t[s-1][n]){for(o=a,i=0;s-2>i;i++)e=t[i][n],o[e]||(o[e]=[]),o=o[e];o[t[i][n]]=t[i+1][n]}return a},numeric.sgather=function c(t,e,n){"undefined"==typeof e&&(e=[]),"undefined"==typeof n&&(n=[]);var i,o,r;i=n.length;for(o in t)if(t.hasOwnProperty(o))if(n[i]=parseInt(o),r=t[o],"number"==typeof r){if(r){if(0===e.length)for(o=i+1;o>=0;--o)e[o]=[];for(o=i;o>=0;--o)e[o].push(n[o]);e[i+1].push(r)}}else c(r,e,n);return n.length>i&&n.pop(),e},numeric.cLU=function(t){var e,n,i,o,r,s,a=t[0],u=t[1],l=t[2],c=a.length,h=0;for(e=0;c>e;e++)a[e]>h&&(h=a[e]);h++;var d,f,p,m=Array(h),g=Array(h),_=numeric.rep([h],1/0),y=numeric.rep([h],-(1/0));for(i=0;c>i;i++)e=a[i],n=u[i],n<_[e]&&(_[e]=n),n>y[e]&&(y[e]=n);for(e=0;h-1>e;e++)y[e]>y[e+1]&&(y[e+1]=y[e]);for(e=h-1;e>=1;e--)_[e]<_[e-1]&&(_[e-1]=_[e]);var v=0,b=0;for(e=0;h>e;e++)g[e]=numeric.rep([y[e]-_[e]+1],0),m[e]=numeric.rep([e-_[e]],0),v+=e-_[e]+1,b+=y[e]-e+1;for(i=0;c>i;i++)e=a[i],g[e][u[i]-_[e]]=l[i];for(e=0;h-1>e;e++)for(o=e-_[e],d=g[e],n=e+1;_[n]<=e&&h>n;n++)if(r=e-_[n],s=y[e]-e,f=g[n],p=f[r]/d[o]){for(i=1;s>=i;i++)f[i+r]-=p*d[i+o];m[n][e-_[n]]=p}var c,w,L,d=[],f=[],x=[],P=[],k=[],C=[];for(c=0,w=0,e=0;h>e;e++){for(o=_[e],r=y[e],L=g[e],n=e;r>=n;n++)L[n-o]&&(d[c]=e,f[c]=n,x[c]=L[n-o],c++);for(L=m[e],n=o;e>n;n++)L[n-o]&&(P[w]=e,k[w]=n,C[w]=L[n-o],w++);P[w]=e,k[w]=e,C[w]=1,w++}return{U:[d,f,x],L:[P,k,C]}},numeric.cLUsolve=function(t,e){var n,i,o=t.L,r=t.U,s=numeric.clone(e),a=o[0],u=o[1],l=o[2],c=r[0],h=r[1],d=r[2],f=c.length,p=(a.length,s.length);for(i=0,n=0;p>n;n++){for(;u[i]<n;)s[n]-=l[i]*s[u[i]],i++;i++}for(i=f-1,n=p-1;n>=0;n--){for(;h[i]>n;)s[n]-=d[i]*s[h[i]],i--;s[n]/=d[i],i--}return s},numeric.cgrid=function(t,e){"number"==typeof t&&(t=[t,t]);var n,i,o,r=numeric.rep(t,-1);if("function"!=typeof e)switch(e){case"L":e=function(e,n){return e>=t[0]/2||n<t[1]/2};break;default:e=function(t,e){return!0}}for(o=0,n=1;n<t[0]-1;n++)for(i=1;i<t[1]-1;i++)e(n,i)&&(r[n][i]=o,o++);return r},numeric.cdelsq=function(t){var e,n,i,o,r,s=[[-1,0],[0,-1],[0,1],[1,0]],a=numeric.dim(t),u=a[0],l=a[1],c=[],h=[],d=[];for(e=1;u-1>e;e++)for(n=1;l-1>n;n++)if(!(t[e][n]<0)){for(i=0;4>i;i++)o=e+s[i][0],r=n+s[i][1],t[o][r]<0||(c.push(t[e][n]),h.push(t[o][r]),d.push(-1));c.push(t[e][n]),h.push(t[e][n]),d.push(4)}return[c,h,d]},numeric.cdotMV=function(t,e){var n,i,o,r=t[0],s=t[1],a=t[2],u=r.length;for(o=0,i=0;u>i;i++)r[i]>o&&(o=r[i]);for(o++,n=numeric.rep([o],0),i=0;u>i;i++)n[r[i]]+=a[i]*e[s[i]];return n},numeric.Spline=function(t,e,n,i,o){this.x=t,this.yl=e,this.yr=n,this.kl=i,this.kr=o},numeric.Spline.prototype._at=function(t,e){var t,n,i,o,r=this.x,s=this.yl,a=this.yr,u=this.kl,l=this.kr,c=numeric.add,h=numeric.sub,d=numeric.mul;n=h(d(u[e],r[e+1]-r[e]),h(a[e+1],s[e])),
i=c(d(l[e+1],r[e]-r[e+1]),h(a[e+1],s[e])),o=(t-r[e])/(r[e+1]-r[e]);var f=o*(1-o);return c(c(c(d(1-o,s[e]),d(o,a[e+1])),d(n,f*(1-o))),d(i,f*o))},numeric.Spline.prototype.at=function(t){if("number"==typeof t){var e,n,i,o=this.x,r=o.length,s=Math.floor;for(e=0,n=r-1;n-e>1;)i=s((e+n)/2),o[i]<=t?e=i:n=i;return this._at(t,e)}var a,r=t.length,u=Array(r);for(a=r-1;-1!==a;--a)u[a]=this.at(t[a]);return u},numeric.Spline.prototype.diff=function(){var t,e,n,i=this.x,o=this.yl,r=this.yr,s=this.kl,a=this.kr,u=o.length,l=s,c=a,h=Array(u),d=Array(u),f=numeric.add,p=numeric.mul,m=numeric.div,g=numeric.sub;for(t=u-1;-1!==t;--t)e=i[t+1]-i[t],n=g(r[t+1],o[t]),h[t]=m(f(p(n,6),p(s[t],-4*e),p(a[t+1],-2*e)),e*e),d[t+1]=m(f(p(n,-6),p(s[t],2*e),p(a[t+1],4*e)),e*e);return new numeric.Spline(i,l,c,h,d)},numeric.Spline.prototype.roots=function(){function t(t){return t*t}var e=[],n=this.x,i=this.yl,o=this.yr,r=this.kl,s=this.kr;"number"==typeof i[0]&&(i=[i],o=[o],r=[r],s=[s]);var a,u,l,c,h,d,f,p,m,g,_,y,v,b,w,L,x,P,k,C,M,T,S,E,D=i.length,A=n.length-1,e=Array(D),R=Math.sqrt;for(a=0;a!==D;++a){for(c=i[a],h=o[a],d=r[a],f=s[a],p=[],u=0;u!==A;u++){for(u>0&&h[u]*c[u]<0&&p.push(n[u]),L=n[u+1]-n[u],x=n[u],_=c[u],y=h[u+1],m=d[u]/L,g=f[u+1]/L,w=t(m-g+3*(_-y))+12*g*_,v=g+3*_+2*m-3*y,b=3*(g+m+2*(_-y)),0>=w?(k=v/b,P=k>n[u]&&k<n[u+1]?[n[u],k,n[u+1]]:[n[u],n[u+1]]):(k=(v-R(w))/b,C=(v+R(w))/b,P=[n[u]],k>n[u]&&k<n[u+1]&&P.push(k),C>n[u]&&C<n[u+1]&&P.push(C),P.push(n[u+1])),T=P[0],k=this._at(T,u),l=0;l<P.length-1;l++)if(S=P[l+1],C=this._at(S,u),0!==k)if(0===C||k*C>0)T=S,k=C;else{for(var U=0;;){if(E=(k*S-C*T)/(k-C),T>=E||E>=S)break;if(M=this._at(E,u),M*C>0)S=E,C=M,-1===U&&(k*=.5),U=-1;else{if(!(M*k>0))break;T=E,k=M,1===U&&(C*=.5),U=1}}p.push(E),T=P[l+1],k=this._at(T,u)}else p.push(T),T=S,k=C;0===C&&p.push(S)}e[a]=p}return"number"==typeof this.yl[0]?e[0]:e},numeric.spline=function(t,e,n,i){var o,r=t.length,s=[],a=[],u=[],l=numeric.sub,c=numeric.mul,h=numeric.add;for(o=r-2;o>=0;o--)a[o]=t[o+1]-t[o],u[o]=l(e[o+1],e[o]);"string"!=typeof n&&"string"!=typeof i||(n=i="periodic");var d=[[],[],[]];switch(typeof n){case"undefined":s[0]=c(3/(a[0]*a[0]),u[0]),d[0].push(0,0),d[1].push(0,1),d[2].push(2/a[0],1/a[0]);break;case"string":s[0]=h(c(3/(a[r-2]*a[r-2]),u[r-2]),c(3/(a[0]*a[0]),u[0])),d[0].push(0,0,0),d[1].push(r-2,0,1),d[2].push(1/a[r-2],2/a[r-2]+2/a[0],1/a[0]);break;default:s[0]=n,d[0].push(0),d[1].push(0),d[2].push(1)}for(o=1;r-1>o;o++)s[o]=h(c(3/(a[o-1]*a[o-1]),u[o-1]),c(3/(a[o]*a[o]),u[o])),d[0].push(o,o,o),d[1].push(o-1,o,o+1),d[2].push(1/a[o-1],2/a[o-1]+2/a[o],1/a[o]);switch(typeof i){case"undefined":s[r-1]=c(3/(a[r-2]*a[r-2]),u[r-2]),d[0].push(r-1,r-1),d[1].push(r-2,r-1),d[2].push(1/a[r-2],2/a[r-2]);break;case"string":d[1][d[1].length-1]=0;break;default:s[r-1]=i,d[0].push(r-1),d[1].push(r-1),d[2].push(1)}s="number"!=typeof s[0]?numeric.transpose(s):[s];var f=Array(s.length);if("string"==typeof n)for(o=f.length-1;-1!==o;--o)f[o]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(d)),s[o]),f[o][r-1]=f[o][0];else for(o=f.length-1;-1!==o;--o)f[o]=numeric.cLUsolve(numeric.cLU(d),s[o]);return f="number"==typeof e[0]?f[0]:numeric.transpose(f),new numeric.Spline(t,e,e,f,f)},numeric.fftpow2=function h(t,e){var n=t.length;if(1!==n){var i,o,r=Math.cos,s=Math.sin,a=Array(n/2),u=Array(n/2),l=Array(n/2),c=Array(n/2);for(o=n/2,i=n-1;-1!==i;--i)--o,l[o]=t[i],c[o]=e[i],--i,a[o]=t[i],u[o]=e[i];h(a,u),h(l,c),o=n/2;var d,f,p,m=-6.283185307179586/n;for(i=n-1;-1!==i;--i)--o,-1===o&&(o=n/2-1),d=m*i,f=r(d),p=s(d),t[i]=a[o]+f*l[o]-p*c[o],e[i]=u[o]+f*c[o]+p*l[o]}},numeric._ifftpow2=function d(t,e){var n=t.length;if(1!==n){var i,o,r=Math.cos,s=Math.sin,a=Array(n/2),u=Array(n/2),l=Array(n/2),c=Array(n/2);for(o=n/2,i=n-1;-1!==i;--i)--o,l[o]=t[i],c[o]=e[i],--i,a[o]=t[i],u[o]=e[i];d(a,u),d(l,c),o=n/2;var h,f,p,m=6.283185307179586/n;for(i=n-1;-1!==i;--i)--o,-1===o&&(o=n/2-1),h=m*i,f=r(h),p=s(h),t[i]=a[o]+f*l[o]-p*c[o],e[i]=u[o]+f*c[o]+p*l[o]}},numeric.ifftpow2=function(t,e){numeric._ifftpow2(t,e),numeric.diveq(t,t.length),numeric.diveq(e,e.length)},numeric.convpow2=function(t,e,n,i){numeric.fftpow2(t,e),numeric.fftpow2(n,i);var o,r,s,a,u,l=t.length;for(o=l-1;-1!==o;--o)r=t[o],a=e[o],s=n[o],u=i[o],t[o]=r*s-a*u,e[o]=r*u+a*s;numeric.ifftpow2(t,e)},numeric.T.prototype.fft=function(){var t,e,n=this.x,i=this.y,o=n.length,r=Math.log,s=r(2),a=Math.ceil(r(2*o-1)/s),u=Math.pow(2,a),l=numeric.rep([u],0),c=numeric.rep([u],0),h=Math.cos,d=Math.sin,f=-3.141592653589793/o,p=numeric.rep([u],0),m=numeric.rep([u],0);Math.floor(o/2);for(t=0;o>t;t++)p[t]=n[t];if("undefined"!=typeof i)for(t=0;o>t;t++)m[t]=i[t];for(l[0]=1,t=1;u/2>=t;t++)e=f*t*t,l[t]=h(e),c[t]=d(e),l[u-t]=h(e),c[u-t]=d(e);var g=new numeric.T(p,m),_=new numeric.T(l,c);return g=g.mul(_),numeric.convpow2(g.x,g.y,numeric.clone(_.x),numeric.neg(_.y)),g=g.mul(_),g.x.length=o,g.y.length=o,g},numeric.T.prototype.ifft=function(){var t,e,n=this.x,i=this.y,o=n.length,r=Math.log,s=r(2),a=Math.ceil(r(2*o-1)/s),u=Math.pow(2,a),l=numeric.rep([u],0),c=numeric.rep([u],0),h=Math.cos,d=Math.sin,f=3.141592653589793/o,p=numeric.rep([u],0),m=numeric.rep([u],0);Math.floor(o/2);for(t=0;o>t;t++)p[t]=n[t];if("undefined"!=typeof i)for(t=0;o>t;t++)m[t]=i[t];for(l[0]=1,t=1;u/2>=t;t++)e=f*t*t,l[t]=h(e),c[t]=d(e),l[u-t]=h(e),c[u-t]=d(e);var g=new numeric.T(p,m),_=new numeric.T(l,c);return g=g.mul(_),numeric.convpow2(g.x,g.y,numeric.clone(_.x),numeric.neg(_.y)),g=g.mul(_),g.x.length=o,g.y.length=o,g.div(o)},numeric.gradient=function(t,e){var n=e.length,i=t(e);if(isNaN(i))throw new Error("gradient: f(x) is a NaN!");var o,r,s,a,u,l,c,h,d,f,p=Math.max,m=numeric.clone(e),g=Array(n),p=(numeric.div,numeric.sub,Math.max),_=.001,y=Math.abs,v=Math.min,b=0;for(o=0;n>o;o++)for(var w=p(1e-6*i,1e-8);;){if(++b,b>20)throw new Error("Numerical gradient fails");if(m[o]=e[o]+w,r=t(m),m[o]=e[o]-w,s=t(m),m[o]=e[o],isNaN(r)||isNaN(s))w/=16;else{if(g[o]=(r-s)/(2*w),u=e[o]-w,l=e[o],c=e[o]+w,h=(r-i)/w,d=(i-s)/w,f=p(y(g[o]),y(i),y(r),y(s),y(u),y(l),y(c),1e-8),a=v(p(y(h-g[o]),y(d-g[o]),y(h-d))/f,w/f),!(a>_))break;w/=16}}return g},numeric.uncmin=function(t,e,n,i,o,r,s){var a=numeric.gradient;"undefined"==typeof s&&(s={}),"undefined"==typeof n&&(n=1e-8),"undefined"==typeof i&&(i=function(e){return a(t,e)}),"undefined"==typeof o&&(o=1e3),e=numeric.clone(e);var u,l,c=e.length,h=t(e);if(isNaN(h))throw new Error("uncmin: f(x0) is a NaN!");var d=Math.max,f=numeric.norm2;n=d(n,numeric.epsilon);var p,m,g,_,y,v,b,w,L,x,P=s.Hinv||numeric.identity(c),k=numeric.dot,C=(numeric.inv,numeric.sub),M=numeric.add,T=numeric.tensor,S=numeric.div,E=numeric.mul,D=numeric.all,A=numeric.isFinite,R=numeric.neg,U=0,O="";for(m=i(e);o>U;){if("function"==typeof r&&r(U,e,h,m,P)){O="Callback returned true";break}if(!D(A(m))){O="Gradient has Infinity or NaN";break}if(p=R(k(P,m)),!D(A(p))){O="Search direction has Infinity or NaN";break}if(x=f(p),n>x){O="Newton step smaller than tol";break}for(L=1,l=k(m,p),y=e;o>U&&!(n>L*x)&&(_=E(p,L),y=M(e,_),u=t(y),u-h>=.1*L*l||isNaN(u));)L*=.5,++U;if(n>L*x){O="Line search step size smaller than tol";break}if(U===o){O="maxit reached during line search";break}g=i(y),v=C(g,m),w=k(v,_),b=k(P,v),P=C(M(P,E((w+k(v,b))/(w*w),T(_,_))),S(M(T(b,_),T(_,b)),w)),e=y,h=u,m=g,++U}return{solution:e,f:h,gradient:m,invHessian:P,iterations:U,message:O}},numeric.Dopri=function(t,e,n,i,o,r,s){this.x=t,this.y=e,this.f=n,this.ymid=i,this.iterations=o,this.events=s,this.message=r},numeric.Dopri.prototype._at=function(t,e){function n(t){return t*t}var i,o,r,s,a,u,t,l,c,h,d,f=this,p=f.x,m=f.y,g=f.f,_=f.ymid,y=(p.length,Math.floor,.5),v=numeric.add,b=numeric.mul,w=numeric.sub;return i=p[e],o=p[e+1],s=m[e],a=m[e+1],l=o-i,r=i+y*l,u=_[e],c=w(g[e],b(s,1/(i-r)+2/(i-o))),h=w(g[e+1],b(a,1/(o-r)+2/(o-i))),d=[n(t-o)*(t-r)/n(i-o)/(i-r),n(t-i)*n(t-o)/n(i-r)/n(o-r),n(t-i)*(t-r)/n(o-i)/(o-r),(t-i)*n(t-o)*(t-r)/n(i-o)/(i-r),(t-o)*n(t-i)*(t-r)/n(i-o)/(o-r)],v(v(v(v(b(s,d[0]),b(u,d[1])),b(a,d[2])),b(c,d[3])),b(h,d[4]))},numeric.Dopri.prototype.at=function(t){var e,n,i,o=Math.floor;if("number"!=typeof t){var r=t.length,s=Array(r);for(e=r-1;-1!==e;--e)s[e]=this.at(t[e]);return s}var a=this.x;for(e=0,n=a.length-1;n-e>1;)i=o(.5*(e+n)),a[i]<=t?e=i:n=i;return this._at(t,e)},numeric.dopri=function(t,e,n,i,o,r,s){"undefined"==typeof o&&(o=1e-6),"undefined"==typeof r&&(r=1e3);var a,u,l,c,h,d,f,p,m,g,_,y,v,b=[t],w=[n],L=[i(t,n)],x=[],P=.2,k=[.075,.225],C=[44/45,-56/15,32/9],M=[19372/6561,-25360/2187,64448/6561,-212/729],T=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],S=[35/384,0,500/1113,125/192,-2187/6784,11/84],E=[.10013431883002395,0,.3918321794184259,-0.02982460176594817,.05893268337240795,-0.04497888809104361,.023904308236133973],D=[.2,.3,.8,8/9,1,1],A=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],R=0,U=(e-t)/10,O=0,B=numeric.add,I=numeric.mul,z=(Math.max,Math.min),j=Math.abs,N=numeric.norminf,F=Math.pow,W=numeric.any,Z=numeric.lt,H=numeric.and,G=(numeric.sub,new numeric.Dopri(b,w,L,x,-1,""));for("function"==typeof s&&(_=s(t,n));e>t&&r>O;)if(++O,t+U>e&&(U=e-t),a=i(t+D[0]*U,B(n,I(P*U,L[R]))),u=i(t+D[1]*U,B(B(n,I(k[0]*U,L[R])),I(k[1]*U,a))),l=i(t+D[2]*U,B(B(B(n,I(C[0]*U,L[R])),I(C[1]*U,a)),I(C[2]*U,u))),c=i(t+D[3]*U,B(B(B(B(n,I(M[0]*U,L[R])),I(M[1]*U,a)),I(M[2]*U,u)),I(M[3]*U,l))),h=i(t+D[4]*U,B(B(B(B(B(n,I(T[0]*U,L[R])),I(T[1]*U,a)),I(T[2]*U,u)),I(T[3]*U,l)),I(T[4]*U,c))),m=B(B(B(B(B(n,I(L[R],U*S[0])),I(u,U*S[2])),I(l,U*S[3])),I(c,U*S[4])),I(h,U*S[5])),d=i(t+U,m),f=B(B(B(B(B(I(L[R],U*A[0]),I(u,U*A[2])),I(l,U*A[3])),I(c,U*A[4])),I(h,U*A[5])),I(d,U*A[6])),g="number"==typeof f?j(f):N(f),g>o){if(U=.2*U*F(o/g,.25),t+U===t){G.msg="Step size became too small";break}}else{if(x[R]=B(B(B(B(B(B(n,I(L[R],U*E[0])),I(u,U*E[2])),I(l,U*E[3])),I(c,U*E[4])),I(h,U*E[5])),I(d,U*E[6])),++R,b[R]=t+U,w[R]=m,L[R]=d,"function"==typeof s){var q,V,Q=t,Y=t+.5*U;if(y=s(Y,x[R-1]),v=H(Z(_,0),Z(0,y)),W(v)||(Q=Y,Y=t+U,_=y,y=s(Y,m),v=H(Z(_,0),Z(0,y))),W(v)){for(var J,X,$=0,K=1,tt=1;;){if("number"==typeof _)V=(tt*y*Q-K*_*Y)/(tt*y-K*_);else for(V=Y,p=_.length-1;-1!==p;--p)_[p]<0&&y[p]>0&&(V=z(V,(tt*y[p]*Q-K*_[p]*Y)/(tt*y[p]-K*_[p])));if(Q>=V||V>=Y)break;q=G._at(V,R-1),X=s(V,q),J=H(Z(_,0),Z(0,X)),W(J)?(Y=V,y=X,v=J,tt=1,-1===$?K*=.5:K=1,$=-1):(Q=V,_=X,K=1,1===$?tt*=.5:tt=1,$=1)}return m=G._at(.5*(t+V),R-1),G.f[R]=i(V,q),G.x[R]=V,G.y[R]=q,G.ymid[R-1]=m,G.events=v,G.iterations=O,G}}t+=U,n=m,_=y,U=z(.8*U*F(o/g,.25),4*U)}return G.iterations=O,G},numeric.LU=function(t,e){e=e||!1;var n,i,o,r,s,a,u,l,c,h=Math.abs,d=t.length,f=d-1,p=new Array(d);for(e||(t=numeric.clone(t)),o=0;d>o;++o){for(u=o,a=t[o],c=h(a[o]),i=o+1;d>i;++i)r=h(t[i][o]),r>c&&(c=r,u=i);for(p[o]=u,u!=o&&(t[o]=t[u],t[u]=a,a=t[o]),s=a[o],n=o+1;d>n;++n)t[n][o]/=s;for(n=o+1;d>n;++n){for(l=t[n],i=o+1;f>i;++i)l[i]-=l[o]*a[i],++i,l[i]-=l[o]*a[i];i===f&&(l[i]-=l[o]*a[i])}}return{LU:t,P:p}},numeric.LUsolve=function(t,e){var n,i,o,r,s,a=t.LU,u=a.length,l=numeric.clone(e),c=t.P;for(n=u-1;-1!==n;--n)l[n]=e[n];for(n=0;u>n;++n)for(o=c[n],c[n]!==n&&(s=l[n],l[n]=l[o],l[o]=s),r=a[n],i=0;n>i;++i)l[n]-=l[i]*r[i];for(n=u-1;n>=0;--n){for(r=a[n],i=n+1;u>i;++i)l[n]-=l[i]*r[i];l[n]/=r[n]}return l},numeric.solve=function(t,e,n){return numeric.LUsolve(numeric.LU(t,n),e)},numeric.echelonize=function(t){var e,n,i,o,r,s,a,u,l=numeric.dim(t),c=l[0],h=l[1],d=numeric.identity(c),f=Array(c),p=Math.abs,m=numeric.diveq;for(t=numeric.clone(t),e=0;c>e;++e){for(i=0,r=t[e],s=d[e],n=1;h>n;++n)p(r[i])<p(r[n])&&(i=n);for(f[e]=i,m(s,r[i]),m(r,r[i]),n=0;c>n;++n)if(n!==e){for(a=t[n],u=a[i],o=h-1;-1!==o;--o)a[o]-=r[o]*u;for(a=d[n],o=c-1;-1!==o;--o)a[o]-=s[o]*u}}return{I:d,A:t,P:f}},numeric.__solveLP=function(t,e,n,i,o,r,s){var a,u,l,c,h=numeric.sum,d=(numeric.log,numeric.mul),f=numeric.sub,p=numeric.dot,m=numeric.div,g=numeric.add,_=t.length,y=n.length,v=!1,b=0,w=1,L=(numeric.transpose(e),numeric.svd,numeric.transpose),x=(numeric.leq,Math.sqrt),P=Math.abs,k=(numeric.muleq,numeric.norminf,numeric.any,Math.min),C=numeric.all,M=numeric.gt,T=Array(_),S=Array(y),E=(numeric.rep([y],1),numeric.solve),D=f(n,p(e,r)),A=p(t,t);for(l=b;o>l;++l){var R,U;for(R=y-1;-1!==R;--R)S[R]=m(e[R],D[R]);var O=L(S);for(R=_-1;-1!==R;--R)T[R]=h(O[R]);w=.25*P(A/p(t,T));var B=100*x(A/p(T,T));for((!isFinite(w)||w>B)&&(w=B),c=g(t,d(w,T)),u=p(O,S),R=_-1;-1!==R;--R)u[R][R]+=1;U=E(u,m(c,w),!0);var I=m(D,p(e,U)),z=1;for(R=y-1;-1!==R;--R)I[R]<0&&(z=k(z,-.999*I[R]));if(a=f(r,d(U,z)),D=f(n,p(e,a)),!C(M(D,0)))return{solution:r,message:"",iterations:l};if(r=a,i>w)return{solution:a,message:"",iterations:l};if(s){var j=p(t,c),N=p(e,c);for(v=!0,R=y-1;-1!==R;--R)if(j*N[R]<0){v=!1;break}}else v=!(r[_-1]>=0);if(v)return{solution:a,message:"Unbounded",iterations:l}}return{solution:r,message:"maximum iteration count exceeded",iterations:l}},numeric._solveLP=function(t,e,n,i,o){var r,s=t.length,a=n.length,u=(numeric.sum,numeric.log,numeric.mul,numeric.sub),l=numeric.dot,c=(numeric.div,numeric.add,numeric.rep([s],0).concat([1])),h=numeric.rep([a,1],-1),d=numeric.blockMatrix([[e,h]]),f=n,r=numeric.rep([s],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),p=numeric.__solveLP(c,d,f,i,o,r,!1),m=numeric.clone(p.solution);m.length=s;var g=numeric.inf(u(n,l(e,m)));if(0>g)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var _=numeric.__solveLP(t,e,n,i,o-p.iterations,m,!0);return _.iterations+=p.iterations,_},numeric.solveLP=function(t,e,n,i,o,r,s){if("undefined"==typeof s&&(s=1e3),"undefined"==typeof r&&(r=numeric.epsilon),"undefined"==typeof i)return numeric._solveLP(t,e,n,r,s);var a,u=i.length,l=i[0].length,c=e.length,h=numeric.echelonize(i),d=numeric.rep([l],0),f=h.P,p=[];for(a=f.length-1;-1!==a;--a)d[f[a]]=1;for(a=l-1;-1!==a;--a)0===d[a]&&p.push(a);var m=numeric.getRange,g=numeric.linspace(0,u-1),_=numeric.linspace(0,c-1),y=m(i,g,p),v=m(e,_,f),b=m(e,_,p),w=numeric.dot,L=numeric.sub,x=w(v,h.I),P=L(b,w(x,y)),k=L(n,w(x,o)),C=Array(f.length),M=Array(p.length);for(a=f.length-1;-1!==a;--a)C[a]=t[f[a]];for(a=p.length-1;-1!==a;--a)M[a]=t[p[a]];var T=L(M,w(C,w(h.I,y))),S=numeric._solveLP(T,P,k,r,s),E=S.solution;if(E!==E)return S;var D=w(h.I,L(o,w(y,E))),A=Array(t.length);for(a=f.length-1;-1!==a;--a)A[f[a]]=D[a];for(a=p.length-1;-1!==a;--a)A[p[a]]=E[a];return{solution:A,message:S.message,iterations:S.iterations}},numeric.MPStoLP=function(t){function e(e){throw new Error("MPStoLP: "+e+"\nLine "+n+": "+t[n]+"\nCurrent state: "+a[s]+"\n")}t instanceof String&&t.split("\n");var n,i,o,r,s=0,a=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],u=t.length,l=0,c={},h=[],d=0,f={},p=0,m=[],g=[],_=[];for(n=0;u>n;++n){o=t[n];var y=o.match(/\S*/g),v=[];for(i=0;i<y.length;++i)""!==y[i]&&v.push(y[i]);if(0!==v.length){for(i=0;i<a.length&&o.substr(0,a[i].length)!==a[i];++i);if(i<a.length){if(s=i,1===i&&(r=v[1]),6===i)return{name:r,c:m,A:numeric.transpose(g),b:_,rows:c,vars:f}}else switch(s){case 0:case 1:e("Unexpected line");case 2:switch(v[0]){case"N":0===l?l=v[1]:e("Two or more N rows");break;case"L":c[v[1]]=d,h[d]=1,_[d]=0,++d;break;case"G":c[v[1]]=d,h[d]=-1,_[d]=0,++d;break;case"E":c[v[1]]=d,h[d]=0,_[d]=0,++d;break;default:e("Parse error "+numeric.prettyPrint(v))}break;case 3:f.hasOwnProperty(v[0])||(f[v[0]]=p,m[p]=0,g[p]=numeric.rep([d],0),++p);var b=f[v[0]];for(i=1;i<v.length;i+=2)if(v[i]!==l){var w=c[v[i]];g[b][w]=(h[w]<0?-1:1)*parseFloat(v[i+1])}else m[b]=parseFloat(v[i+1]);break;case 4:for(i=1;i<v.length;i+=2)_[c[v[i]]]=(h[c[v[i]]]<0?-1:1)*parseFloat(v[i+1]);break;case 5:break;case 6:e("Internal error")}}}e("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(t,e,n,i,o,r,s){function a(t){var e,i,o=this,r=t.length,s=0,a=o.i=o.j=o.m=0;for(o.S=[],o.c=[],r||(t=[r++]);n>s;)o.S[s]=s++;for(s=0;n>s;s++)e=o.S[s],a=c(a+e+t[s%r]),i=o.S[a],o.S[s]=i,o.S[a]=e;o.g=function(t){var e=o.S,i=c(o.i+1),r=e[i],s=c(o.j+r),a=e[s];e[i]=a,e[s]=r;for(var u=e[c(r+a)];--t;)i=c(i+1),r=e[i],s=c(s+r),a=e[s],e[i]=a,e[s]=r,u=u*n+e[c(r+a)];return o.i=i,o.j=s,u},o.g(n)}function u(t,e,n,i,o){if(n=[],o=typeof t,e&&"object"==o)for(i in t)if(i.indexOf("S")<5)try{n.push(u(t[i],e-1))}catch(r){}return n.length?n:t+("string"!=o?"\x00":"")}function l(t,e,n,i){for(t+="",n=0,i=0;i<t.length;i++)e[c(i)]=c((n^=19*e[c(i)])+t.charCodeAt(i));t="";for(i in e)t+=String.fromCharCode(e[i]);return t}function c(t){return t&n-1}e.seedrandom=function(c,h){var d,f=[];return c=l(u(h?[c,t]:arguments.length?c:[(new Date).getTime(),t,window],3),f),d=new a(f),l(d.S,t),e.random=function(){for(var t=d.g(i),e=s,a=0;o>t;)t=(t+a)*n,e*=n,a=d.g(1);for(;t>=r;)t/=2,e/=2,a>>>=1;return(t+a)/e},c},s=e.pow(n,i),o=e.pow(2,o),r=2*o,l(e.random(),t)}([],numeric.seedrandom,256,6,52),function(t){function e(t){if("object"!=typeof t)return t;var n,i=[],o=t.length;for(n=0;o>n;n++)i[n+1]=e(t[n]);return i}function n(t){if("object"!=typeof t)return t;var e,i=[],o=t.length;for(e=1;o>e;e++)i[e-1]=n(t[e]);return i}function i(t,e,n){var i,o,r,s,a;for(r=1;n>=r;r+=1){for(t[r][r]=1/t[r][r],a=-t[r][r],i=1;r>i;i+=1)t[i][r]=a*t[i][r];if(s=r+1,s>n)break;for(o=s;n>=o;o+=1)for(a=t[r][o],t[r][o]=0,i=1;r>=i;i+=1)t[i][o]=t[i][o]+a*t[i][r]}}function o(t,e,n,i){var o,r,s,a;for(r=1;n>=r;r+=1){for(a=0,o=1;r>o;o+=1)a+=t[o][r]*i[o];i[r]=(i[r]-a)/t[r][r]}for(s=1;n>=s;s+=1)for(r=n+1-s,i[r]=i[r]/t[r][r],a=-i[r],o=1;r>o;o+=1)i[o]=i[o]+a*t[o][r]}function r(t,e,n,i){var o,r,s,a,u,l;for(r=1;n>=r;r+=1){if(i[1]=r,l=0,s=r-1,1>s){if(l=t[r][r]-l,0>=l)break;t[r][r]=Math.sqrt(l)}else{for(a=1;s>=a;a+=1){for(u=t[a][r],o=1;a>o;o+=1)u-=t[o][r]*t[o][a];u/=t[a][a],t[a][r]=u,l+=u*u}if(l=t[r][r]-l,0>=l)break;t[r][r]=Math.sqrt(l)}i[1]=0}}function s(t,e,n,s,a,u,l,c,h,d,f,p,m,g,_,y){function v(){for(g[1]=g[1]+1,C=R,P=1;d>=P;P+=1){for(C+=1,j=-c[P],k=1;s>=k;k+=1)j+=l[k][P]*a[k];if(Math.abs(j)<V&&(j=0),P>f)_[C]=j;else if(_[C]=-Math.abs(j),j>0){for(k=1;s>=k;k+=1)l[k][P]=-l[k][P];c[P]=-c[P]}}for(P=1;m>=P;P+=1)_[R+p[P]]=0;for(O=0,z=0,P=1;d>=P;P+=1)_[R+P]<z*_[I+P]&&(O=P,z=_[R+P]/_[I+P]);return 0===O?999:0}function b(){for(P=1;s>=P;P+=1){for(j=0,k=1;s>=k;k+=1)j+=t[k][P]*l[k][O];_[P]=j}for(M=E,P=1;s>=P;P+=1)_[M+P]=0;for(k=m+1;s>=k;k+=1)for(P=1;s>=P;P+=1)_[M+P]=_[M+P]+t[P][k]*_[k];for(G=!0,P=m;P>=1;P-=1){for(j=_[P],C=A+P*(P+3)/2,M=C-P,k=P+1;m>=k;k+=1)j-=_[C]*_[D+k],C+=k;if(j/=_[M],_[D+P]=j,p[P]<f)break;if(0>j)break;G=!1,S=P}if(!G)for(N=_[U+S]/_[D+S],P=1;m>=P&&!(p[P]<f)&&!(_[D+P]<0);P+=1)z=_[U+P]/_[D+P],N>z&&(N=z,S=P);for(j=0,P=E+1;E+s>=P;P+=1)j+=_[P]*_[P];if(Math.abs(j)<=V){if(G)return y[1]=1,999;for(P=1;m>=P;P+=1)_[U+P]=_[U+P]-N*_[D+P];return _[U+m+1]=_[U+m+1]+N,700}for(j=0,P=1;s>=P;P+=1)j+=_[E+P]*l[P][O];for(F=-_[R+O]/j,q=!0,G||F>N&&(F=N,q=!1),P=1;s>=P;P+=1)a[P]=a[P]+F*_[E+P],Math.abs(a[P])<V&&(a[P]=0);for(u[1]=u[1]+F*j*(F/2+_[U+m+1]),P=1;m>=P;P+=1)_[U+P]=_[U+P]-F*_[D+P];if(_[U+m+1]=_[U+m+1]+F,!q){for(j=-c[O],k=1;s>=k;k+=1)j+=a[k]*l[k][O];if(O>f)_[R+O]=j;else if(_[R+O]=-Math.abs(j),j>0){for(k=1;s>=k;k+=1)l[k][O]=-l[k][O];c[O]=-c[O]}return 700}for(m+=1,p[m]=O,C=A+(m-1)*m/2+1,P=1;m-1>=P;P+=1)_[C]=_[P],C+=1;if(m===s)_[C]=_[s];else{for(P=s;P>=m+1&&0!==_[P]&&(W=Math.max(Math.abs(_[P-1]),Math.abs(_[P])),Z=Math.min(Math.abs(_[P-1]),Math.abs(_[P])),z=_[P-1]>=0?Math.abs(W*Math.sqrt(1+Z*Z/(W*W))):-Math.abs(W*Math.sqrt(1+Z*Z/(W*W))),W=_[P-1]/z,Z=_[P]/z,1!==W);P-=1)if(0===W)for(_[P-1]=Z*z,k=1;s>=k;k+=1)z=t[k][P-1],t[k][P-1]=t[k][P],t[k][P]=z;else for(_[P-1]=z,H=Z/(1+W),k=1;s>=k;k+=1)z=W*t[k][P-1]+Z*t[k][P],t[k][P]=H*(t[k][P-1]+z)-t[k][P],t[k][P-1]=z;_[C]=_[m]}return 0}function w(){if(C=A+S*(S+1)/2+1,M=C+S,0===_[M])return 798;if(W=Math.max(Math.abs(_[M-1]),Math.abs(_[M])),Z=Math.min(Math.abs(_[M-1]),Math.abs(_[M])),z=_[M-1]>=0?Math.abs(W*Math.sqrt(1+Z*Z/(W*W))):-Math.abs(W*Math.sqrt(1+Z*Z/(W*W))),W=_[M-1]/z,Z=_[M]/z,1===W)return 798;if(0===W){for(P=S+1;m>=P;P+=1)z=_[M-1],_[M-1]=_[M],_[M]=z,M+=P;for(P=1;s>=P;P+=1)z=t[P][S],t[P][S]=t[P][S+1],t[P][S+1]=z}else{for(H=Z/(1+W),P=S+1;m>=P;P+=1)z=W*_[M-1]+Z*_[M],_[M]=H*(_[M-1]+z)-_[M],_[M-1]=z,M+=P;for(P=1;s>=P;P+=1)z=W*t[P][S]+Z*t[P][S+1],t[P][S+1]=H*(t[P][S]+z)-t[P][S+1],t[P][S]=z}return 0}function L(){for(M=C-S,P=1;S>=P;P+=1)_[M]=_[C],C+=1,M+=1;return _[U+S]=_[U+S+1],p[S]=p[S+1],S+=1,m>S?797:0}function x(){return _[U+m]=_[U+m+1],_[U+m+1]=0,p[m]=0,m-=1,g[2]=g[2]+1,0}var P,k,C,M,T,S,E,D,A,R,U,O,B,I,z,j,N,F,W,Z,H,G,q,V,Q,Y,J;B=Math.min(s,d),C=2*s+B*(B+5)/2+2*d+1,V=1e-60;do V+=V,Q=1+.1*V,Y=1+.2*V;while(1>=Q||1>=Y);for(P=1;s>=P;P+=1)_[P]=e[P];for(P=s+1;C>=P;P+=1)_[P]=0;for(P=1;d>=P;P+=1)p[P]=0;if(T=[],0===y[1]){if(r(t,n,s,T),0!==T[1])return void(y[1]=2);o(t,n,s,e),i(t,n,s)}else{for(k=1;s>=k;k+=1)for(a[k]=0,P=1;k>=P;P+=1)a[k]=a[k]+t[P][k]*e[P];for(k=1;s>=k;k+=1)for(e[k]=0,P=k;s>=P;P+=1)e[k]=e[k]+t[k][P]*a[P]}for(u[1]=0,k=1;s>=k;k+=1)for(a[k]=e[k],u[1]=u[1]+_[k]*a[k],_[k]=0,P=k+1;s>=P;P+=1)t[P][k]=0;for(u[1]=-u[1]/2,y[1]=0,E=s,D=E+s,U=D+B,A=U+B+1,R=A+B*(B+1)/2,I=R+d,P=1;d>=P;P+=1){for(j=0,k=1;s>=k;k+=1)j+=l[k][P]*l[k][P];_[I+P]=Math.sqrt(j)}for(m=0,g[1]=0,g[2]=0,J=0;;){if(J=v(),999===J)return;for(;;){if(J=b(),0===J)break;if(999===J)return;if(700===J)if(S===m)x();else{for(;;)if(w(),J=L(),797!==J)break;x()}}}}function a(t,i,o,r,a,u){t=e(t),i=e(i),o=e(o);var l,c,h,d,f,p,m=[],g=[],_=[],y=[],v=[];if(a=a||0,u=u?e(u):[void 0,0],r=r?e(r):[],c=t.length-1,h=o[1].length-1,!r)for(l=1;h>=l;l+=1)r[l]=0;for(l=1;h>=l;l+=1)g[l]=0;for(d=0,f=Math.min(c,h),l=1;c>=l;l+=1)_[l]=0;for(m[1]=0,l=1;2*c+f*(f+5)/2+2*h+1>=l;l+=1)y[l]=0;for(l=1;2>=l;l+=1)v[l]=0;return s(t,i,c,c,_,m,o,r,c,h,a,g,d,v,y,u),p="",1===u[1]&&(p="constraints are inconsistent, no solution!"),2===u[1]&&(p="matrix D in quadratic function is not positive definite!"),{solution:n(_),value:n(m),unconstrained_solution:n(i),iterations:n(v),iact:n(g),message:p}}t.solveQP=a}(numeric),numeric.svd=function(t){function e(t,e){return t=Math.abs(t),e=Math.abs(e),t>e?t*Math.sqrt(1+e*e/t/t):0==e?t:e*Math.sqrt(1+t*t/e/e)}var n,i=numeric.epsilon,o=1e-64/i,r=50,s=0,a=0,u=0,l=0,c=0,h=numeric.clone(t),d=h.length,f=h[0].length;if(f>d)throw"Need more rows than columns";var p=new Array(f),m=new Array(f);for(a=0;f>a;a++)p[a]=m[a]=0;var g=numeric.rep([f,f],0),_=0,y=0,v=0,b=0,w=0,L=0,x=0;for(a=0;f>a;a++){for(p[a]=y,x=0,c=a+1,u=a;d>u;u++)x+=h[u][a]*h[u][a];if(o>=x)y=0;else for(_=h[a][a],y=Math.sqrt(x),_>=0&&(y=-y),v=_*y-x,h[a][a]=_-y,u=c;f>u;u++){for(x=0,l=a;d>l;l++)x+=h[l][a]*h[l][u];for(_=x/v,l=a;d>l;l++)h[l][u]+=_*h[l][a]}for(m[a]=y,x=0,u=c;f>u;u++)x+=h[a][u]*h[a][u];if(o>=x)y=0;else{for(_=h[a][a+1],y=Math.sqrt(x),_>=0&&(y=-y),v=_*y-x,h[a][a+1]=_-y,u=c;f>u;u++)p[u]=h[a][u]/v;for(u=c;d>u;u++){for(x=0,l=c;f>l;l++)x+=h[u][l]*h[a][l];for(l=c;f>l;l++)h[u][l]+=x*p[l]}}w=Math.abs(m[a])+Math.abs(p[a]),w>b&&(b=w)}for(a=f-1;-1!=a;a+=-1){if(0!=y){for(v=y*h[a][a+1],u=c;f>u;u++)g[u][a]=h[a][u]/v;for(u=c;f>u;u++){for(x=0,l=c;f>l;l++)x+=h[a][l]*g[l][u];for(l=c;f>l;l++)g[l][u]+=x*g[l][a]}}for(u=c;f>u;u++)g[a][u]=0,g[u][a]=0;g[a][a]=1,y=p[a],c=a}for(a=f-1;-1!=a;a+=-1){for(c=a+1,y=m[a],u=c;f>u;u++)h[a][u]=0;if(0!=y){for(v=h[a][a]*y,u=c;f>u;u++){for(x=0,l=c;d>l;l++)x+=h[l][a]*h[l][u];for(_=x/v,l=a;d>l;l++)h[l][u]+=_*h[l][a]}for(u=a;d>u;u++)h[u][a]=h[u][a]/y}else for(u=a;d>u;u++)h[u][a]=0;h[a][a]+=1}for(i*=b,l=f-1;-1!=l;l+=-1)for(var P=0;r>P;P++){var k=!1;for(c=l;-1!=c;c+=-1){if(Math.abs(p[c])<=i){k=!0;break}if(Math.abs(m[c-1])<=i)break}if(!k){s=0,x=1;var C=c-1;for(a=c;l+1>a&&(_=x*p[a],p[a]=s*p[a],!(Math.abs(_)<=i));a++)for(y=m[a],v=e(_,y),m[a]=v,s=y/v,x=-_/v,u=0;d>u;u++)w=h[u][C],L=h[u][a],h[u][C]=w*s+L*x,h[u][a]=-w*x+L*s}if(L=m[l],c==l){if(0>L)for(m[l]=-L,u=0;f>u;u++)g[u][l]=-g[u][l];break}if(P>=r-1)throw"Error: no convergence.";for(b=m[c],w=m[l-1],y=p[l-1],v=p[l],_=((w-L)*(w+L)+(y-v)*(y+v))/(2*v*w),y=e(_,1),_=0>_?((b-L)*(b+L)+v*(w/(_-y)-v))/b:((b-L)*(b+L)+v*(w/(_+y)-v))/b,s=1,x=1,a=c+1;l+1>a;a++){for(y=p[a],w=m[a],v=x*y,y=s*y,L=e(_,v),p[a-1]=L,s=_/L,x=v/L,_=b*s+y*x,y=-b*x+y*s,v=w*x,w*=s,u=0;f>u;u++)b=g[u][a-1],L=g[u][a],g[u][a-1]=b*s+L*x,g[u][a]=-b*x+L*s;for(L=e(_,v),m[a-1]=L,s=_/L,x=v/L,_=s*y+x*w,b=-x*y+s*w,u=0;d>u;u++)w=h[u][a-1],L=h[u][a],h[u][a-1]=w*s+L*x,h[u][a]=-w*x+L*s}p[c]=0,p[l]=_,m[l]=b}for(a=0;a<m.length;a++)m[a]<i&&(m[a]=0);for(a=0;f>a;a++)for(u=a-1;u>=0;u--)if(m[u]<m[a]){for(s=m[u],m[u]=m[a],m[a]=s,l=0;l<h.length;l++)n=h[l][a],h[l][a]=h[l][u],h[l][u]=n;for(l=0;l<g.length;l++)n=g[l][a],g[l][a]=g[l][u],g[l][u]=n;a=u}return{U:h,S:m,V:g}}}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/numeric/numeric-1.2.6.js","/node_modules/numeric")},{_process:53,buffer:17}],52:[function(t,e,n){(function(t,n,i,o,r,s,a,u,l){function c(t,e){t=Math.round(t*e),t<<=1,0>t&&(t=~t);for(var n="";t>=32;)n+=String.fromCharCode((32|31&t)+63),t>>=5;return n+=String.fromCharCode(t+63)}var h={};h.decode=function(t,e){for(var n,i,o=0,r=0,s=0,a=[],u=0,l=0,c=null,h=Math.pow(10,e||5);o<t.length;){c=null,u=0,l=0;do c=t.charCodeAt(o++)-63,l|=(31&c)<<u,u+=5;while(c>=32);n=1&l?~(l>>1):l>>1,u=l=0;do c=t.charCodeAt(o++)-63,l|=(31&c)<<u,u+=5;while(c>=32);i=1&l?~(l>>1):l>>1,r+=n,s+=i,a.push([r/h,s/h])}return a},h.encode=function(t,e){if(!t.length)return"";for(var n=Math.pow(10,e||5),i=c(t[0][0],n)+c(t[0][1],n),o=1;o<t.length;o++){var r=t[o],s=t[o-1];i+=c(r[0]-s[0],n),i+=c(r[1]-s[1],n)}return i},void 0!==typeof e&&(e.exports=h)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/polyline/src/polyline.js","/node_modules/polyline/src")},{_process:53,buffer:17}],53:[function(t,e,n){(function(t,n,i,o,r,s,a,u,l){function c(){g&&p&&(g=!1,p.length?m=p.concat(m):_=-1,m.length&&h())}function h(){if(!g){var t=setTimeout(c);g=!0;for(var e=m.length;e;){for(p=m,m=[];++_<e;)p&&p[_].run();_=-1,e=m.length}p=null,g=!1,clearTimeout(t)}}function d(t,e){this.fun=t,this.array=e}function f(){}var p,t=e.exports={},m=[],g=!1,_=-1;t.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new d(t,e)),1!==m.length||g||setTimeout(h,0)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=f,t.addListener=f,t.once=f,t.off=f,t.removeListener=f,t.removeAllListeners=f,t.emit=f,t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/process/browser.js","/node_modules/process")},{_process:53,buffer:17}],54:[function(t,e,n){(function(t,i,o,r,s,a,u,l,c){!function(t,i){"use strict";"object"==typeof n?e.exports=i():"function"==typeof define&&define.amd?define(i):t.IPv6=i(t)}(this,function(t){"use strict";function e(t){var e=t.toLowerCase(),n=e.split(":"),i=n.length,o=8;""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[i-1]&&""===n[i-2]&&n.pop(),i=n.length,-1!==n[i-1].indexOf(".")&&(o=7);var r;for(r=0;i>r&&""!==n[r];r++);if(o>r)for(n.splice(r,1,"0000");n.length<o;)n.splice(r,0,"0000");for(var s,a=0;o>a;a++){s=n[a].split("");for(var u=0;3>u&&("0"===s[0]&&s.length>1);u++)s.splice(0,1);n[a]=s.join("")}var l=-1,c=0,h=0,d=-1,f=!1;for(a=0;o>a;a++)f?"0"===n[a]?h+=1:(f=!1,h>c&&(l=d,c=h)):"0"===n[a]&&(f=!0,d=a,h=1);h>c&&(l=d,c=h),c>1&&n.splice(l,c,""),i=n.length;var p="";for(""===n[0]&&(p=":"),a=0;i>a&&(p+=n[a],a!==i-1);a++)p+=":";return""===n[i-1]&&(p+=":"),p}function n(){return t.IPv6===this&&(t.IPv6=i),this}var i=t&&t.IPv6;return{best:e,noConflict:n}})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/urijs/src/IPv6.js","/node_modules/urijs/src")},{_process:53,buffer:17}],55:[function(t,e,n){(function(t,i,o,r,s,a,u,l,c){!function(t,i){"use strict";"object"==typeof n?e.exports=i():"function"==typeof define&&define.amd?define(i):t.SecondLevelDomains=i(t)}(this,function(t){"use strict";var e=t&&t.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",
ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(t){var e=t.lastIndexOf(".");if(0>=e||e>=t.length-1)return!1;var i=t.lastIndexOf(".",e-1);if(0>=i||i>=e-1)return!1;var o=n.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(i+1,e)+" ")>=0:!1},is:function(t){var e=t.lastIndexOf(".");if(0>=e||e>=t.length-1)return!1;var i=t.lastIndexOf(".",e-1);if(i>=0)return!1;var o=n.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(0,e)+" ")>=0:!1},get:function(t){var e=t.lastIndexOf(".");if(0>=e||e>=t.length-1)return null;var i=t.lastIndexOf(".",e-1);if(0>=i||i>=e-1)return null;var o=n.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(i+1,e)+" ")<0?null:t.slice(i+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return n})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/urijs/src/SecondLevelDomains.js","/node_modules/urijs/src")},{_process:53,buffer:17}],56:[function(t,e,n){(function(i,o,r,s,a,u,l,c,h){!function(i,o){"use strict";"object"==typeof n?e.exports=o(t("./punycode"),t("./IPv6"),t("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],o):i.URI=o(i.punycode,i.IPv6,i.SecondLevelDomains,i)}(this,function(t,e,n,i){"use strict";function o(t,e){var n=arguments.length>=1,i=arguments.length>=2;if(!(this instanceof o))return n?i?new o(t,e):new o(t):new o;if(void 0===t){if(n)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}return this.href(t),void 0!==e?this.absoluteTo(e):this}function r(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===s(t)}function u(t,e){var n,i,o={};if("RegExp"===s(e))o=null;else if(a(e))for(n=0,i=e.length;i>n;n++)o[e[n]]=!0;else o[e]=!0;for(n=0,i=t.length;i>n;n++){var r=o&&void 0!==o[t[n]]||!o&&e.test(t[n]);r&&(t.splice(n,1),i--,n--)}return t}function l(t,e){var n,i;if(a(e)){for(n=0,i=e.length;i>n;n++)if(!l(t,e[n]))return!1;return!0}var o=s(e);for(n=0,i=t.length;i>n;n++)if("RegExp"===o){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function c(t,e){if(!a(t)||!a(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,i=t.length;i>n;n++)if(t[n]!==e[n])return!1;return!0}function h(t){var e=/^\/+|\/+$/g;return t.replace(e,"")}function d(t){return escape(t)}function f(t){return encodeURIComponent(t).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}function p(t){return function(e,n){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!n),this)}}function m(t,e){return function(n,i){return void 0===n?this._parts[t]||"":(null!==n&&(n+="",n.charAt(0)===e&&(n=n.substring(1))),this._parts[t]=n,this.build(!i),this)}}var g=i&&i.URI;o.version="1.18.0";var _=o.prototype,y=Object.prototype.hasOwnProperty;o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\.-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return o.domAttributes[e]}},o.encode=f,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=f,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(t,e){var n=o.encode(t+"");return void 0===e&&(e=o.escapeQuerySpace),e?n.replace(/%20/g,"+"):n},o.decodeQuery=function(t,e){t+="",void 0===e&&(e=o.escapeQuerySpace);try{return o.decode(e?t.replace(/\+/g,"%20"):t)}catch(n){return t}};var v,b={encode:"encode",decode:"decode"},w=function(t,e){return function(n){try{return o[e](n+"").replace(o.characters[t][e].expression,function(n){return o.characters[t][e].map[n]})}catch(i){return n}}};for(v in b)o[v+"PathSegment"]=w("pathname",b[v]),o[v+"UrnPathSegment"]=w("urnpath",b[v]);var L=function(t,e,n){return function(i){var r;r=n?function(t){return o[e](o[n](t))}:o[e];for(var s=(i+"").split(t),a=0,u=s.length;u>a;a++)s[a]=r(s[a]);return s.join(t)}};o.decodePath=L("/","decodePathSegment"),o.decodeUrnPath=L(":","decodeUrnPathSegment"),o.recodePath=L("/","encodePathSegment","decode"),o.recodeUrnPath=L(":","encodeUrnPathSegment","decode"),o.encodeReserved=w("reserved","encode"),o.parse=function(t,e){var n;return e||(e={}),n=t.indexOf("#"),n>-1&&(e.fragment=t.substring(n+1)||null,t=t.substring(0,n)),n=t.indexOf("?"),n>-1&&(e.query=t.substring(n+1)||null,t=t.substring(0,n)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=o.parseAuthority(t,e)):(n=t.indexOf(":"),n>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(o.protocol_expression)?e.protocol=void 0:"//"===t.substring(n+1,n+3)?(t=t.substring(n+3),t=o.parseAuthority(t,e)):(t=t.substring(n+1),e.urn=!0))),e.path=t,e},o.parseHost=function(t,e){t=t.replace(/\\/g,"/");var n,i,o=t.indexOf("/");if(-1===o&&(o=t.length),"["===t.charAt(0))n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,o)||null,"/"===e.port&&(e.port=null);else{var r=t.indexOf(":"),s=t.indexOf("/"),a=t.indexOf(":",r+1);-1!==a&&(-1===s||s>a)?(e.hostname=t.substring(0,o)||null,e.port=null):(i=t.substring(0,o).split(":"),e.hostname=i[0]||null,e.port=i[1]||null)}return e.hostname&&"/"!==t.substring(o).charAt(0)&&(o++,t="/"+t),t.substring(o)||"/"},o.parseAuthority=function(t,e){return t=o.parseUserinfo(t,e),o.parseHost(t,e)},o.parseUserinfo=function(t,e){var n,i=t.indexOf("/"),r=t.lastIndexOf("@",i>-1?i:t.length-1);return r>-1&&(-1===i||i>r)?(n=t.substring(0,r).split(":"),e.username=n[0]?o.decode(n[0]):null,n.shift(),e.password=n[0]?o.decode(n.join(":")):null,t=t.substring(r+1)):(e.username=null,e.password=null),t},o.parseQuery=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var n,i,r,s={},a=t.split("&"),u=a.length,l=0;u>l;l++)n=a[l].split("="),i=o.decodeQuery(n.shift(),e),r=n.length?o.decodeQuery(n.join("="),e):null,y.call(s,i)?("string"!=typeof s[i]&&null!==s[i]||(s[i]=[s[i]]),s[i].push(r)):s[i]=r;return s},o.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=o.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},o.buildHost=function(t){var e="";return t.hostname?(e+=o.ip6_expression.test(t.hostname)?"["+t.hostname+"]":t.hostname,t.port&&(e+=":"+t.port),e):""},o.buildAuthority=function(t){return o.buildUserinfo(t)+o.buildHost(t)},o.buildUserinfo=function(t){var e="";return t.username&&(e+=o.encode(t.username)),t.password&&(e+=":"+o.encode(t.password)),e&&(e+="@"),e},o.buildQuery=function(t,e,n){var i,r,s,u,l="";for(r in t)if(y.call(t,r)&&r)if(a(t[r]))for(i={},s=0,u=t[r].length;u>s;s++)void 0!==t[r][s]&&void 0===i[t[r][s]+""]&&(l+="&"+o.buildQueryParameter(r,t[r][s],n),e!==!0&&(i[t[r][s]+""]=!0));else void 0!==t[r]&&(l+="&"+o.buildQueryParameter(r,t[r],n));return l.substring(1)},o.buildQueryParameter=function(t,e,n){return o.encodeQuery(t,n)+(null!==e?"="+o.encodeQuery(e,n):"")},o.addQuery=function(t,e,n){if("object"==typeof e)for(var i in e)y.call(e,i)&&o.addQuery(t,i,e[i]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=n);"string"==typeof t[e]&&(t[e]=[t[e]]),a(n)||(n=[n]),t[e]=(t[e]||[]).concat(n)}},o.removeQuery=function(t,e,n){var i,r,l;if(a(e))for(i=0,r=e.length;r>i;i++)t[e[i]]=void 0;else if("RegExp"===s(e))for(l in t)e.test(l)&&(t[l]=void 0);else if("object"==typeof e)for(l in e)y.call(e,l)&&o.removeQuery(t,l,e[l]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===s(n)?!a(t[e])&&n.test(t[e])?t[e]=void 0:t[e]=u(t[e],n):t[e]!==String(n)||a(n)&&1!==n.length?a(t[e])&&(t[e]=u(t[e],n)):t[e]=void 0:t[e]=void 0}},o.hasQuery=function(t,e,n,i){switch(s(e)){case"String":break;case"RegExp":for(var r in t)if(y.call(t,r)&&e.test(r)&&(void 0===n||o.hasQuery(t,r,n)))return!0;return!1;case"Object":for(var u in e)if(y.call(e,u)&&!o.hasQuery(t,u,e[u]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(s(n)){case"Undefined":return e in t;case"Boolean":var h=Boolean(a(t[e])?t[e].length:t[e]);return n===h;case"Function":return!!n(t[e],e,t);case"Array":if(!a(t[e]))return!1;var d=i?l:c;return d(t[e],n);case"RegExp":return a(t[e])?i?l(t[e],n):!1:Boolean(t[e]&&t[e].match(n));case"Number":n=String(n);case"String":return a(t[e])?i?l(t[e],n):!1:t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var t=[],e=[],n=0,i=0;i<arguments.length;i++){var r=new o(arguments[i]);t.push(r);for(var s=r.segment(),a=0;a<s.length;a++)"string"==typeof s[a]&&e.push(s[a]),s[a]&&n++}if(!e.length||!n)return new o("");var u=new o("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},o.commonPath=function(t,e){var n,i=Math.min(t.length,e.length);for(n=0;i>n;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return 1>n?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(n)&&"/"===e.charAt(n)||(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},o.withinString=function(t,e,n){n||(n={});var i=n.start||o.findUri.start,r=n.end||o.findUri.end,s=n.trim||o.findUri.trim,a=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var u=i.exec(t);if(!u)break;var l=u.index;if(n.ignoreHtml){var c=t.slice(Math.max(l-3,0),l);if(c&&a.test(c))continue}var h=l+t.slice(l).search(r),d=t.slice(l,h).replace(s,"");if(!n.ignore||!n.ignore.test(d)){h=l+d.length;var f=e(d,l,h,t);t=t.slice(0,l)+f+t.slice(h),i.lastIndex=l+f.length}}return i.lastIndex=0,t},o.ensureValidHostname=function(e){if(e.match(o.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(t.toASCII(e).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}},o.noConflict=function(t){if(t){var e={URI:this.noConflict()};return i.URITemplate&&"function"==typeof i.URITemplate.noConflict&&(e.URITemplate=i.URITemplate.noConflict()),i.IPv6&&"function"==typeof i.IPv6.noConflict&&(e.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&"function"==typeof i.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=i.SecondLevelDomains.noConflict()),e}return i.URI===this&&(i.URI=g),this},_.build=function(t){return t===!0?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},_.clone=function(){return new o(this)},_.valueOf=_.toString=function(){return this.build(!1)._string},_.protocol=p("protocol"),_.username=p("username"),_.password=p("password"),_.hostname=p("hostname"),_.port=p("port"),_.query=m("query","?"),_.fragment=m("fragment","#"),_.search=function(t,e){var n=this.query(t,e);return"string"==typeof n&&n.length?"?"+n:n},_.hash=function(t,e){var n=this.fragment(t,e);return"string"==typeof n&&n.length?"#"+n:n},_.pathname=function(t,e){if(void 0===t||t===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?o.decodeUrnPath:o.decodePath)(n):n}return this._parts.urn?this._parts.path=t?o.recodeUrnPath(t):"":this._parts.path=t?o.recodePath(t):"/",this.build(!e),this},_.path=_.pathname,_.href=function(t,e){var n;if(void 0===t)return this.toString();this._string="",this._parts=o._parts();var i=t instanceof o,r="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){var s=o.getDomAttribute(t);t=t[s]||"",r=!1}if(!i&&r&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=o.parse(String(t),this._parts);else{if(!i&&!r)throw new TypeError("invalid input");var a=i?t._parts:t;for(n in a)y.call(this._parts,n)&&(this._parts[n]=a[n])}return this.build(!e),this},_.is=function(t){var e=!1,i=!1,r=!1,s=!1,a=!1,u=!1,l=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,i=o.ip4_expression.test(this._parts.hostname),r=o.ip6_expression.test(this._parts.hostname),e=i||r,s=!e,a=s&&n&&n.has(this._parts.hostname),u=s&&o.idn_expression.test(this._parts.hostname),l=s&&o.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return r;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var x=_.protocol,P=_.port,k=_.hostname;_.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(o.protocol_expression)))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return x.call(this,t,e)},_.scheme=_.protocol,_.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError('Port "'+t+'" contains characters other than [0-9]');return P.call(this,t,e)},_.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={},i=o.parseHost(t,n);if("/"!==i)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=n.hostname}return k.call(this,t,e)},_.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=this.protocol(),i=this.authority();return i?(n?n+"://":"")+this.authority():""}var r=o(t);return this.protocol(r.protocol()).authority(r.authority()).build(!e),this},_.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?o.buildHost(this._parts):"";var n=o.parseHost(t,this._parts);if("/"!==n)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},_.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?o.buildAuthority(this._parts):"";var n=o.parseAuthority(t,this._parts);if("/"!==n)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},_.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=o.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==t[t.length-1]&&(t+="@"),o.parseUserinfo(t,this._parts),this.build(!e),this},_.resource=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=o.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!e),this)},_.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var i=this._parts.hostname.length-this.domain().length,s=this._parts.hostname.substring(0,i),a=new RegExp("^"+r(s));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&o.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},_.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(e).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!t)throw new TypeError("cannot set domain empty");if(o.ensureValidHostname(t),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var s=new RegExp(r(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!e),this},_.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(i+1);return e!==!0&&n&&n.list[o.toLowerCase()]?n.get(this._parts.hostname)||o:o}var s;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');s=new RegExp(r(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(r(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!e),this},_.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return t?o.decodePath(i):i}var s=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,s),u=new RegExp("^"+r(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=o.recodePath(t),this._parts.path=this._parts.path.replace(u,t),this.build(!e),this},_.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(n+1);return t?o.decodePathSegment(i):i}var s=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(s=!0);var a=new RegExp(r(this.filename())+"$");return t=o.recodePath(t),this._parts.path=this._parts.path.replace(a,t),s?this.normalizePath(e):this.build(!e),this},_.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n,i,s=this.filename(),a=s.lastIndexOf(".");return-1===a?"":(n=s.substring(a+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",t?o.decodePathSegment(i):i)}"."===t.charAt(0)&&(t=t.substring(1));var u,l=this.suffix();if(l)u=t?new RegExp(r(l)+"$"):new RegExp(r("."+l)+"$");else{if(!t)return this;this._parts.path+="."+o.recodePath(t)}return u&&(t=o.recodePath(t),this._parts.path=this._parts.path.replace(u,t)),this.build(!e),this},_.segment=function(t,e,n){var i=this._parts.urn?":":"/",o=this.path(),r="/"===o.substring(0,1),s=o.split(i);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(r&&s.shift(),0>t&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(a(e)){s=[];for(var u=0,l=e.length;l>u;u++)(e[u].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(h(e[u])))}else(e||"string"==typeof e)&&(e=h(e),""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e?s[t]=h(e):s.splice(t,1);return r&&s.unshift(""),this.path(s.join(i),n)},_.segmentCoded=function(t,e,n){var i,r,s;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(i=this.segment(t,e,n),a(i))for(r=0,s=i.length;s>r;r++)i[r]=o.decode(i[r]);else i=void 0!==i?o.decode(i):void 0;return i}if(a(e))for(r=0,s=e.length;s>r;r++)e[r]=o.encode(e[r]);else e="string"==typeof e||e instanceof String?o.encode(e):e;return this.segment(t,e,n)};var C=_.query;return _.query=function(t,e){if(t===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=t.call(this,n);return this._parts.query=o.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=o.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):C.call(this,t,e)},_.setQuery=function(t,e,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)i[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var r in t)y.call(t,r)&&(i[r]=t[r])}return this._parts.query=o.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},_.addQuery=function(t,e,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(i,t,void 0===e?null:e),this._parts.query=o.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},_.removeQuery=function(t,e,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(i,t,e),this._parts.query=o.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},_.hasQuery=function(t,e,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(i,t,e,n)},_.setSearch=_.setQuery,_.addSearch=_.addQuery,_.removeSearch=_.removeQuery,_.hasSearch=_.hasQuery,_.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},_.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},_.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},_.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},_.normalizePath=function(t){var e=this._parts.path;if(!e)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;e=o.recodePath(e);var n,i,r,s="";for("/"!==e.charAt(0)&&(n=!0,e="/"+e),"/.."!==e.slice(-3)&&"/."!==e.slice(-2)||(e+="/"),e=e.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),n&&(s=e.substring(1).match(/^(\.\.\/)+/)||"",s&&(s=s[0]));;){if(i=e.search(/\/\.\.(\/|$)/),-1===i)break;0!==i?(r=e.substring(0,i).lastIndexOf("/"),-1===r&&(r=i),e=e.substring(0,r)+e.substring(i+3)):e=e.substring(3)}return n&&this.is("relative")&&(e=s+e.substring(1)),this._parts.path=e,this.build(!t),this},_.normalizePathname=_.normalizePath,_.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},_.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},_.normalizeSearch=_.normalizeQuery,_.normalizeHash=_.normalizeFragment,_.iso8859=function(){var t=o.encode,e=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},_.unicode=function(){var t=o.encode,e=o.decode;o.encode=f,o.decode=unescape;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},_.readable=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e._parts.protocol&&(n+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(n+=t.toUnicode(e._parts.hostname),e._parts.port&&(n+=":"+e._parts.port)):n+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(n+="/"),n+=e.path(!0),e._parts.query){for(var i="",r=0,s=e._parts.query.split("&"),a=s.length;a>r;r++){var u=(s[r]||"").split("=");i+="&"+o.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(i+="="+o.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=o.decodeQuery(e.hash(),!0)},_.absoluteTo=function(t){var e,n,i,r=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof o||(t=new o(t)),r._parts.protocol||(r._parts.protocol=t._parts.protocol),this._parts.hostname)return r;for(n=0;i=s[n];n++)r._parts[i]=t._parts[i];return r._parts.path?".."===r._parts.path.substring(-2)&&(r._parts.path+="/"):(r._parts.path=t._parts.path,r._parts.query||(r._parts.query=t._parts.query)),"/"!==r.path().charAt(0)&&(e=t.directory(),e=e?e:0===t.path().indexOf("/")?"/":"",r._parts.path=(e?e+"/":"")+r._parts.path,r.normalizePath()),r.build(),r},_.relativeTo=function(t){var e,n,i,r,s,a=this.clone().normalize();if(a._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new o(t).normalize(),e=a._parts,n=t._parts,r=a.path(),s=t.path(),"/"!==r.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");
if(e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password)return a.build();if(null!==e.protocol||null!==e.username||null!==e.password)return a.build();if(e.hostname!==n.hostname||e.port!==n.port)return a.build();if(e.hostname=null,e.port=null,r===s)return e.path="",a.build();if(i=o.commonPath(r,s),!i)return a.build();var u=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(i.length)||"./",a.build()},_.equals=function(t){var e,n,i,r=this.clone(),s=new o(t),u={},l={},h={};if(r.normalize(),s.normalize(),r.toString()===s.toString())return!0;if(e=r.query(),n=s.query(),r.query(""),s.query(""),r.toString()!==s.toString())return!1;if(e.length!==n.length)return!1;u=o.parseQuery(e,this._parts.escapeQuerySpace),l=o.parseQuery(n,this._parts.escapeQuerySpace);for(i in u)if(y.call(u,i)){if(a(u[i])){if(!c(u[i],l[i]))return!1}else if(u[i]!==l[i])return!1;h[i]=!0}for(i in l)if(y.call(l,i)&&!h[i])return!1;return!0},_.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},_.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},o})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/urijs/src/URI.js","/node_modules/urijs/src")},{"./IPv6":54,"./SecondLevelDomains":55,"./punycode":57,_process:53,buffer:17}],57:[function(t,e,n){(function(t,i,o,r,s,a,u,l,c){!function(t){function o(t){throw new RangeError(R[t])}function r(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function s(t,e){var n=t.split("@"),i="";n.length>1&&(i=n[0]+"@",t=n[1]),t=t.replace(A,".");var o=t.split("."),s=r(o,e).join(".");return i+s}function a(t){for(var e,n,i=[],o=0,r=t.length;r>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&r>o?(n=t.charCodeAt(o++),56320==(64512&n)?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),o--)):i.push(e);return i}function u(t){return r(t,function(t){var e="";return t>65535&&(t-=65536,e+=B(t>>>10&1023|55296),t=56320|1023&t),e+=B(t)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:L}function c(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function h(t,e,n){var i=0;for(t=n?O(t/C):t>>1,t+=O(t/e);t>U*P>>1;i+=L)t=O(t/U);return O(i+(U+1)*t/(t+k))}function d(t){var e,n,i,r,s,a,c,d,f,p,m=[],g=t.length,_=0,y=T,v=M;for(n=t.lastIndexOf(S),0>n&&(n=0),i=0;n>i;++i)t.charCodeAt(i)>=128&&o("not-basic"),m.push(t.charCodeAt(i));for(r=n>0?n+1:0;g>r;){for(s=_,a=1,c=L;r>=g&&o("invalid-input"),d=l(t.charCodeAt(r++)),(d>=L||d>O((w-_)/a))&&o("overflow"),_+=d*a,f=v>=c?x:c>=v+P?P:c-v,!(f>d);c+=L)p=L-f,a>O(w/p)&&o("overflow"),a*=p;e=m.length+1,v=h(_-s,e,0==s),O(_/e)>w-y&&o("overflow"),y+=O(_/e),_%=e,m.splice(_++,0,y)}return u(m)}function f(t){var e,n,i,r,s,u,l,d,f,p,m,g,_,y,v,b=[];for(t=a(t),g=t.length,e=T,n=0,s=M,u=0;g>u;++u)m=t[u],128>m&&b.push(B(m));for(i=r=b.length,r&&b.push(S);g>i;){for(l=w,u=0;g>u;++u)m=t[u],m>=e&&l>m&&(l=m);for(_=i+1,l-e>O((w-n)/_)&&o("overflow"),n+=(l-e)*_,e=l,u=0;g>u;++u)if(m=t[u],e>m&&++n>w&&o("overflow"),m==e){for(d=n,f=L;p=s>=f?x:f>=s+P?P:f-s,!(p>d);f+=L)v=d-p,y=L-p,b.push(B(c(p+v%y,0))),d=O(v/y);b.push(B(c(d,0))),s=h(n,_,i==r),n=0,++i}++n,++e}return b.join("")}function p(t){return s(t,function(t){return E.test(t)?d(t.slice(4).toLowerCase()):t})}function m(t){return s(t,function(t){return D.test(t)?"xn--"+f(t):t})}var g="object"==typeof n&&n&&!n.nodeType&&n,_="object"==typeof e&&e&&!e.nodeType&&e,y="object"==typeof i&&i;y.global!==y&&y.window!==y&&y.self!==y||(t=y);var v,b,w=2147483647,L=36,x=1,P=26,k=38,C=700,M=72,T=128,S="-",E=/^xn--/,D=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=L-x,O=Math.floor,B=String.fromCharCode;if(v={version:"1.3.2",ucs2:{decode:a,encode:u},decode:d,encode:f,toASCII:m,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return v});else if(g&&_)if(e.exports==g)_.exports=v;else for(b in v)v.hasOwnProperty(b)&&(g[b]=v[b]);else t.punycode=v}(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/urijs/src/punycode.js","/node_modules/urijs/src")},{_process:53,buffer:17}],58:[function(t,e,n){(function(t,e,n,i,o,r,s,a,u){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function r(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function s(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function a(t){var e=new FileReader;return e.readAsArrayBuffer(t),s(e)}function u(t){var e=new FileReader;return e.readAsText(t),s(e)}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=r(this);return t?t:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t){var e=t.toUpperCase();return g.indexOf(e)>-1?e:t}function h(t,e){e=e||{};var n=e.body;if(h.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=c(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(o))}}),e}function f(t){var e=new o,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),i=n.shift().trim(),o=n.join(":").trim();e.append(i,o)}),e}function p(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof o?e.headers:new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};o.prototype.append=function(t,i){t=e(t),i=n(i);var o=this.map[t];o||(o=[],this.map[t]=o),o.push(i)},o.prototype["delete"]=function(t){delete this.map[e(t)]},o.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},o.prototype.getAll=function(t){return this.map[e(t)]||[]},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,i){this.map[e(t)]=[n(i)]},o.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){t.call(e,i,n,this)},this)},this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),i(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),i(t)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},l.call(h.prototype),l.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},p.error=function(){var t=new p(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];p.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new p(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=h,t.Response=p,t.fetch=function(t,e){return new Promise(function(n,i){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var r;r=h.prototype.isPrototypeOf(t)&&!e?t:new h(t,e);var s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:f(s),url:o()},e="response"in s?s.response:s.responseText;n(new p(e,t))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&m.blob&&(s.responseType="blob"),r.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/whatwg-fetch/fetch.js","/node_modules/whatwg-fetch")},{_process:53,buffer:17}]},{},[13]);
//# sourceMappingURL=portal.js.map
